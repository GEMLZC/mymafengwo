(function(a){a.prompt=function(r,s){s=a.extend({},a.prompt.defaults,s);a.prompt.currentPrefix=s.prefix;var e=(a.browser.msie&&a.browser.version<7);var g=a(document.body);var c=a(window);s.classes=a.trim(s.classes);if(s.classes!=""){s.classes=" "+s.classes}var b='<div class="'+s.prefix+"box"+s.classes+'" id="'+s.prefix+'box">';if(s.useiframe&&((a("object, applet").length>0)||e)){b+='<iframe src="javascript:false;" style="display:block;position:absolute;z-index:-1;" class="'+s.prefix+'fade" id="'+s.prefix+'fade"></iframe>'}else{if(e){a("select").css("visibility","hidden")}b+='<div class="'+s.prefix+'fade" id="'+s.prefix+'fade"></div>'}b+='<div class="'+s.prefix+'" id="'+s.prefix+'"><div class="'+s.prefix+'container"><div class="';b+=s.prefix+'close"><i></i></div><div id="'+s.prefix+'states"></div>';b+="</div></div></div>";var q=a(b).appendTo(g);var n=q.children("#"+s.prefix);var o=q.children("#"+s.prefix+"fade");if(r.constructor==String){r={state0:{html:r,buttons:s.buttons,focus:s.focus,submit:s.submit}}}var p="";a.each(r,function(u,t){t=a.extend({},a.prompt.defaults.state,t);r[u]=t;p+='<div id="'+s.prefix+"_state_"+u+'" class="'+s.prefix+'_state" style="display:none;"><div class="'+s.prefix+'message">'+t.html+'</div><div class="'+s.prefix+'buttons">';a.each(t.buttons,function(x,w){if(typeof w=="object"){p+='<button name="'+s.prefix+"_"+u+"_button"+w.title.replace(/[^a-z0-9]+/gi,"")+'" id="'+s.prefix+"_"+u+"_button"+w.title.replace(/[^a-z0-9]+/gi,"")+'" value="'+w.value+'">'+w.title+"</button>"}else{p+='<button name="'+s.prefix+"_"+u+"_button"+x+'" id="'+s.prefix+"_"+u+"_button"+x+'" value="'+w+'">'+x+"</button>"}});p+="</div></div>"});n.find("#"+s.prefix+"states").html(p).children("."+s.prefix+"_state:first").css("display","block");n.find("."+s.prefix+"buttons:empty").css("display","none");a.each(r,function(v,u){var t=n.find("#"+s.prefix+"_state_"+v);t.children("."+s.prefix+"buttons").children("button").click(function(){var z=t.children("."+s.prefix+"message");var x=u.buttons[a(this).text()];if(x==undefined){for(var w in u.buttons){if(u.buttons[w].title==a(this).text()){x=u.buttons[w].value}}}if(typeof x=="object"){x=x.value}var A={};a.each(n.find("#"+s.prefix+"states :input").serializeArray(),function(B,C){if(A[C.name]===undefined){A[C.name]=C.value}else{if(typeof A[C.name]==Array||typeof A[C.name]=="object"){A[C.name].push(C.value)}else{A[C.name]=[A[C.name],C.value]}}});var y=u.submit(x,z,A);if(y===undefined||y){d(true,x,z,A)}});t.find("."+s.prefix+"buttons button:eq("+u.focus+")").addClass(s.prefix+"defaultbutton")});var f=function(){q.css({top:c.scrollTop()})};var l=function(){if(s.persistent){var u=0;q.addClass(s.prefix+"warning");var t=setInterval(function(){q.toggleClass(s.prefix+"warning");if(u++>1){clearInterval(t);q.removeClass(s.prefix+"warning")}},100)}else{d()}};var h=function(w){var v=(window.event)?event.keyCode:w.keyCode;if(v==27){l()}if(v==9){var x=a(":input:enabled:visible",q);var u=!w.shiftKey&&w.target==x[x.length-1];var t=w.shiftKey&&w.target==x[0];if(u||t){setTimeout(function(){if(!x){return}var y=x[t===true?x.length-1:0];if(y){y.focus()}},10);return false}}};var k=function(){q.css({position:(e)?"absolute":"fixed",height:c.height(),width:"100%",top:(e)?c.scrollTop():0,left:0,right:0,bottom:0});o.css({position:"absolute",height:c.height(),width:"100%",top:0,left:0,right:0,bottom:0});n.css({position:"absolute",top:"50%",left:"50%",marginLeft:((n.outerWidth()/2)*-1),marginTop:((n.outerHeight()/2)*-1)})};var m=function(){o.css({zIndex:s.zIndex,display:"none",opacity:s.opacity});n.css({zIndex:s.zIndex+1,display:"none"});q.css({zIndex:s.zIndex})};var d=function(v,u,w,t){n.remove();if(e){g.unbind("scroll",f)}c.unbind("resize",k);o.fadeOut(s.overlayspeed,function(){o.unbind("click",l);o.remove();if(v){s.callback(u,w,t)}q.unbind("keypress",h);q.remove();if(e&&!s.useiframe){a("select").css("visibility","visible")}})};k();m();if(e){c.scroll(f)}o.click(l);c.resize(k);q.bind("keydown keypress",h);n.find("."+s.prefix+"close").click(d);o.fadeIn(s.overlayspeed);n[s.show](s.promptspeed,s.loaded);n.find("#"+s.prefix+"states ."+s.prefix+"_state:first ."+s.prefix+"defaultbutton").focus();if(s.timeout>0){setTimeout(a.prompt.close,s.timeout)}return q};a.prompt.defaults={prefix:"jqi",classes:"",buttons:{Ok:true},loaded:function(){},submit:function(){return true},callback:function(){},opacity:0.6,zIndex:999,overlayspeed:"slow",promptspeed:"fast",show:"fadeIn",focus:0,useiframe:false,persistent:true,timeout:0,state:{html:"",buttons:{Ok:true},focus:0,submit:function(){return true}}};a.prompt.currentPrefix=a.prompt.defaults.prefix;a.prompt.setDefaults=function(b){a.prompt.defaults=a.extend({},a.prompt.defaults,b)};a.prompt.setStateDefaults=function(b){a.prompt.defaults.state=a.extend({},a.prompt.defaults.state,b)};a.prompt.getStateContent=function(b){return a("#"+a.prompt.currentPrefix+"_state_"+b)};a.prompt.getCurrentState=function(){return a("."+a.prompt.currentPrefix+"_state:visible")};a.prompt.getCurrentStateName=function(){var b=a.prompt.getCurrentState().attr("id");return b.replace(a.prompt.currentPrefix+"_state_","")};a.prompt.goToState=function(b,c){a("."+a.prompt.currentPrefix+"_state").slideUp("slow");a("#"+a.prompt.currentPrefix+"_state_"+b).slideDown("slow",function(){a(this).find("."+a.prompt.currentPrefix+"defaultbutton").focus();if(typeof c=="function"){c()}})};a.prompt.nextState=function(c){var b=a("."+a.prompt.currentPrefix+"_state:visible").next();a("."+a.prompt.currentPrefix+"_state").slideUp("slow");b.slideDown("slow",function(){b.find("."+a.prompt.currentPrefix+"defaultbutton").focus();if(typeof c=="function"){c()}})};a.prompt.prevState=function(c){var b=a("."+a.prompt.currentPrefix+"_state:visible").prev();a("."+a.prompt.currentPrefix+"_state").slideUp("slow");b.slideDown("slow",function(){b.find("."+a.prompt.currentPrefix+"defaultbutton").focus();if(typeof c=="function"){c()}})};a.prompt.close=function(){a("#"+a.prompt.currentPrefix+"box").fadeOut("fast",function(){a(this).remove()})};a.prompt.resize=function(){var b=(a.browser.msie&&a.browser.version<7);a("#"+a.prompt.currentPrefix+"box").css({position:(b)?"absolute":"fixed",height:a(window).height(),width:"100%",top:(b)?a(window).scrollTop():0,left:0,right:0,bottom:0});a("#"+a.prompt.currentPrefix+"fade").css({position:"absolute",height:a(window).height(),width:"100%",top:0,left:0,right:0,bottom:0});a("#"+a.prompt.currentPrefix).css({position:"absolute",top:"50%",left:"50%",marginLeft:((a("#"+a.prompt.currentPrefix).outerWidth()/2)*-1),marginTop:((a("#"+a.prompt.currentPrefix).outerHeight()/2)*-1)})};a.fn.prompt=function(b){if(b==undefined){b={}}if(b.withDataAndEvents==undefined){b.withDataAndEvents=false}a.prompt(a(this).clone(b.withDataAndEvents).html(),b)}})(jQuery);(function(a){a.jGrowl=function(b,c){if(a("#jGrowl").size()==0){a('<div id="jGrowl"></div>').addClass((c&&c.position)?c.position:a.jGrowl.defaults.position).appendTo("body")}a("#jGrowl").jGrowl(b,c)};a.fn.jGrowl=function(b,d){if(a.isFunction(this.each)){var c=arguments;return this.each(function(){var e=this;if(a(this).data("jGrowl.instance")==undefined){a(this).data("jGrowl.instance",a.extend(new a.fn.jGrowl(),{notifications:[],element:null,interval:null}));a(this).data("jGrowl.instance").startup(this)}if(a.isFunction(a(this).data("jGrowl.instance")[b])){a(this).data("jGrowl.instance")[b].apply(a(this).data("jGrowl.instance"),a.makeArray(c).slice(1))}else{a(this).data("jGrowl.instance").create(b,d)}})}};a.extend(a.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:false,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3000,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:true,closeTemplate:"&times;",closerTemplate:"<div>[ 关闭 ]</div>",log:function(c,b,d){},beforeOpen:function(c,b,d){},afterOpen:function(c,b,d){},open:function(c,b,d){},beforeClose:function(c,b,d){},close:function(c,b,d){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(b,c){var c=a.extend({},this.defaults,c);if(typeof c.speed!=="undefined"){c.openDuration=c.speed;c.closeDuration=c.speed}this.notifications.push({message:b,options:c});c.log.apply(this.element,[this.element,b,c])},render:function(d){var b=this;var c=d.message;var e=d.options;var d=a('<div class="jGrowl-notification '+e.themeState+" ui-corner-all"+((e.group!=undefined&&e.group!="")?" "+e.group:"")+'"><div class="jGrowl-close">'+e.closeTemplate+'</div><div class="jGrowl-header">'+e.header+'</div><div class="jGrowl-message">'+c+"</div></div>").data("jGrowl",e).addClass(e.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){a(this).parent().trigger("jGrowl.close")}).parent();a(d).bind("mouseover.jGrowl",function(){a("div.jGrowl-notification",b.element).data("jGrowl.pause",true)}).bind("mouseout.jGrowl",function(){a("div.jGrowl-notification",b.element).data("jGrowl.pause",false)}).bind("jGrowl.beforeOpen",function(){if(e.beforeOpen.apply(d,[d,c,e,b.element])!=false){a(this).trigger("jGrowl.open")}}).bind("jGrowl.open",function(){if(e.open.apply(d,[d,c,e,b.element])!=false){if(e.glue=="after"){a("div.jGrowl-notification:last",b.element).after(d)}else{a("div.jGrowl-notification:first",b.element).before(d)}a(this).animate(e.animateOpen,e.openDuration,e.easing,function(){if(a.browser.msie&&(parseInt(a(this).css("opacity"),10)===1||parseInt(a(this).css("opacity"),10)===0)){this.style.removeAttribute("filter")}a(this).data("jGrowl").created=new Date();a(this).trigger("jGrowl.afterOpen")})}}).bind("jGrowl.afterOpen",function(){e.afterOpen.apply(d,[d,c,e,b.element])}).bind("jGrowl.beforeClose",function(){if(e.beforeClose.apply(d,[d,c,e,b.element])!=false){a(this).trigger("jGrowl.close")}}).bind("jGrowl.close",function(){a(this).data("jGrowl.pause",true);a(this).animate(e.animateClose,e.closeDuration,e.easing,function(){a(this).remove();var f=e.close.apply(d,[d,c,e,b.element]);if(a.isFunction(f)){f.apply(d,[d,c,e,b.element])}})}).trigger("jGrowl.beforeOpen");if(e.corners!=""&&a.fn.corner!=undefined){a(d).corner(e.corners)}if(a("div.jGrowl-notification:parent",b.element).size()>1&&a("div.jGrowl-closer",b.element).size()==0&&this.defaults.closer!=false){a(this.defaults.closerTemplate).addClass("jGrowl-closer ui-state-highlight ui-corner-all").addClass(this.defaults.theme).appendTo(b.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().trigger("jGrowl.beforeClose");if(a.isFunction(b.defaults.closer)){b.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])}})}},update:function(){a(this.element).find("div.jGrowl-notification:parent").each(function(){if(a(this).data("jGrowl")!=undefined&&a(this).data("jGrowl").created!=undefined&&(a(this).data("jGrowl").created.getTime()+parseInt(a(this).data("jGrowl").life))<(new Date()).getTime()&&a(this).data("jGrowl").sticky!=true&&(a(this).data("jGrowl.pause")==undefined||a(this).data("jGrowl.pause")!=true)){a(this).trigger("jGrowl.beforeClose")}});if(this.notifications.length>0&&(this.defaults.pool==0||a(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)){this.render(this.notifications.shift())}if(a(this.element).find("div.jGrowl-notification:parent").size()<2){a(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})}},startup:function(b){this.element=a(b).addClass("jGrowl").append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){a(b).data("jGrowl.instance").update()},parseInt(this.defaults.check));if(a.browser.msie&&parseInt(a.browser.version)<7&&!window.XMLHttpRequest){a(this.element).addClass("ie6")}},shutdown:function(){a(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove();clearInterval(this.interval)},close:function(){a(this.element).find("div.jGrowl-notification").each(function(){a(this).trigger("jGrowl.beforeClose")})}});a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults})(jQuery);(function(a){a.suggests=function(u,k){var d=a(u).attr("autocomplete","off");var g;var y;var v;var c=false;var s=false;var f=0;var x=[];var w=0;if(k.parentClass.length){g=a('<div class="hide"><ul data-tag="result"></ul><ul data-tag="more"></ul></div>');g.addClass(k.parentClass).appendTo("body").css("position","absolute");y=g.children().eq(0);y.addClass(k.resultsClass);v=g.children().eq(1);v.addClass(k.moreClass)}else{g=a(document.createElement("ul"));g.addClass(k.resultsClass).appendTo("body").css("position","absolute");y=g;v=g}if(a.trim(d.val())==""||a.trim(d.val())==k.text){d.val(k.text).css("color","#aaa")}var t=k.text;d.focus(function(){if(a.trim(a(this).val())==t){a(this).val("").css("color","#E8C568")}});var p=null;if(k.form){p=d.parents("form").submit(function(){if(c&&a.trim(d.val())!=""&&a.trim(d.val())!=k.text){c=false;if(k.mustMatch){return true}}else{c=false;return false}});p.find(":submit,:image").click(function(){var e=z();setTimeout(function(){if(k.mustMatch&&e==false){(k.noMatch)()}else{var E=d.data("url");if(E&&E.length){window.location.href=E}else{c=true;p.trigger("submit")}}},300)})}o();a(window).load(o).resize(o);d.blur(function(){setTimeout(function(){g.hide()},200)});try{g.bgiframe()}catch(A){}if(a.browser.mozilla){d.keypress(h)}else{d.keydown(h)}d.keyup(r);function o(){var e=d.offset();g.css({top:(e.top+u.offsetHeight+k.topOffset)+"px",left:(e.left+k.leftOffset)+"px"})}function r(F){if(/13$|^9$/.test(F.keyCode)){if(F.preventDefault){F.preventDefault()}if(F.stopPropagation){F.stopPropagation()}F.cancelBubble=true;F.returnValue=false;if(a.browser.msie&&a.browser.version<="8.0"){var G=z();if(F.keyCode=="13"){if(k.mustMatch&&G==false){(k.noMatch)()}else{var E=d.data("url");if(E&&E.length){window.location.href=E}else{setTimeout(function(){c=true;if(p){p.trigger("submit")}},300)}}}}}else{if(d.val().length!=f){if(s){clearTimeout(s)}s=setTimeout(m,k.delay);f=d.val().length}}}function h(E){if(/27$|38$|40$/.test(E.keyCode)&&g.is(":visible")){if(E.preventDefault){E.preventDefault()}if(E.stopPropagation){E.stopPropagation()}E.cancelBubble=true;E.returnValue=false;switch(E.keyCode){case 38:q();break;case 40:B();break;case 27:g.hide();break}}else{if(d.val().length!=f){if(s){clearTimeout(s)}s=setTimeout(m,k.delay);f=d.val().length}}}function m(){if(d.data("disable")===true){return}var e=a.trim(d.val());if(e.length>=k.minchars){cached=D(e);if(cached){n(cached.items)}else{a.get(k.source,{key:e},function(E){g.hide();var F=b(E,e);n(F);l(e,F,E.length)})}}else{g.hide()}}function D(E){for(var e=0;e<x.length;e++){if(x[e]["q"]==E){x.unshift(x.splice(e,1)[0]);return x[0]}}return false}function l(G,e,E){while(x.length&&(w+E>k.maxCacheSize)){var F=x.pop();w-=F.size}x.push({q:G,size:E,items:e});w+=E}function n(e){if(!e){return}if(!e.length){g.hide();return}var G="";var F="";for(var E=0;E<e.length;E++){if(e[E]=="search://"){if(e[E+1]=="more"){F+='<li data-url="'+e[E+2]+'" data-title="'+e[E+4]+'"><i class="'+e[E+3]+'"></i><span>'+e[E+6]+"</span><em>"+e[E+5]+"</em></li>"}else{G+='<li data-url="'+e[E+2]+'" data-title="'+e[E+4]+'"><i class="'+e[E+3]+'"></i><span>'+e[E+6]+"</span><em>"+e[E+5]+"</em></li>"}E+=6}else{G+="<li>"+e[E]+"</li>"}}v.html(F);y.html(G);g.show();o();g.find("li").mouseover(function(){g.find("li").removeClass(k.selectClass);a(this).addClass(k.selectClass)}).click(function(I){I.preventDefault();I.stopPropagation();var H=a(this).data("url");if(H&&H.length){window.location.href=H}else{var J=z();setTimeout(function(){c=true;p.trigger("submit")},300)}})}function b(E,J){var F=[];var K=E.split(k.delimiter);for(var H=0;H<K.length;H++){var G=a.trim(K[H]);if(G=="search://"){var e=F.length;F[e]=K[H++];F[e+1]=K[H++];F[e+2]=K[H++];F[e+3]=K[H++];F[e+4]=K[H++];F[e+5]=K[H];continue}if(G){try{G=G.replace(new RegExp(J,"ig"),function(L){return'<span class="'+k.matchClass+'">'+L+"</span>"})}catch(I){G=G.replace(J,function(L){return'<span class="'+k.matchClass+'">'+L+"</span>"})}F[F.length]=G}}return F}function C(){if(!g.is(":visible")){return false}var e=g.find("li."+k.selectClass);if(!e.length){e=false}return e}function z(){$currentResult=C();if($currentResult==false&&k.mustMatch==true&&g.is(":visible")){$currentResult=y.children("li").eq(0)}if($currentResult){var e=$currentResult.data("title");if(!e||!e.length){e=a.trim($currentResult.text());if(e.indexOf("---")>0){e=a.trim(e.split("---")[1])}}d.val(e);d.data("url",$currentResult.data("url"));k.callback(e);g.hide();if(k.onSelect){k.onSelect.apply(d[0])}return true}else{return false}}function B(){$currentResult=C();if($currentResult){$currentResult.removeClass(k.selectClass);if("result"==$currentResult.parent().data("tag")&&!$currentResult.next().length){v.children("li:first-child").addClass(k.selectClass)}else{$currentResult.next().addClass(k.selectClass)}}else{g.find("li:first").addClass(k.selectClass)}}function q(){$currentResult=C();if($currentResult){$currentResult.removeClass(k.selectClass);if("more"==$currentResult.parent().data("tag")&&!$currentResult.prev().length){y.children("li:last-child").addClass(k.selectClass)}else{$currentResult.prev().addClass(k.selectClass)}}else{g.find("li:last").addClass(k.selectClass)}}};a.fn.suggests=function(c,b){if(!c){return}b=b||{};b.source=c;b.delay=b.delay||100;b.parentClass=b.parentClass||"";b.resultsClass=b.resultsClass||"acs_results";b.selectClass=b.selectClass||"acs_over";b.matchClass=b.matchClass||"acs_match";b.moreClass=b.moreClass||"";b.minchars=b.minchars||1;b.delimiter=b.delimiter||"\n";b.onSelect=b.onSelect||false;b.maxCacheSize=b.maxCacheSize||65536;b.form=b.form||true;b.text=b.text||"";b.mustMatch=b.mustMatch||false;b.noMatch=b.noMatch||undefined;b.callback=(("function"==typeof b.callback)?b.callback:function(){});b.topOffset=b.topOffset||0;b.leftOffset=b.leftOffset||0;this.each(function(){new a.suggests(this,b)});return this}})(jQuery);(function($){var methods={init:function(options){var settings=$.extend({page:1,total:0,args:"",item_size:10,display_num:5,prev_text:"&lt;&lt;Prev",next_text:"Next&gt;&gt;",ellipse_text:"...",prev_show_always:true,next_show_always:true,callback:function(){return false}},options);return this.each(function(){var $this=$(this);methods._drawLinks.call($this,settings);$this.data("settings",settings)})},_drawLinks:function(settings){var self=this;var pagesize=Math.ceil(settings.total/settings.item_size);if(pagesize<=1){return""}if(settings.display_num%2==0){settings.display_num++}if(settings.args.substr(0,1)!=","&&settings.args!=""){settings.args=","+settings.args}this.empty();var has_fisrt=false,prev_flag=0,next_flag=0;if(settings.page>1&&settings.prev_show_always){this.append($('<a href="javascript:void(0);" class="ti prev">'+settings.prev_text+"</a>").click(function(){eval("settings.callback("+(settings.page-1)+settings.args+")");settings.page=settings.page-1;methods._drawLinks.call(self,settings)}))}if(settings.page!=1){this.append($('<a href="javascript:void(0);" class="ti">'+((pagesize>(settings.display_num+2)&&settings.page-(settings.display_num+1)/2>1)?"1"+settings.ellipse_text:"1")+"</a>").click(function(){eval("settings.callback(1"+settings.args+")");settings.page=1;methods._drawLinks.call(self,settings)}));has_fisrt=true}var left_start=(pagesize-settings.page>=(settings.display_num+1)/2)?settings.page-(settings.display_num-1)/2:settings.page-(settings.display_num-(pagesize-settings.page));for(var i=left_start;i<settings.page;i++){if(i<=1){continue}(function(obj,index,settings){obj.append($('<a href="javascript:void(0);" class="ti">'+index+"</a>").click(function(){eval("settings.callback("+index+settings.args+")");settings.page=index;methods._drawLinks.call(obj,settings)}))})(this,i,settings);prev_flag++}this.append($('<span class="this-page">'+settings.page+"</span>"));next_flag=(settings.display_num-1)-prev_flag+(!has_fisrt?1:0);if(settings.page<pagesize){for(var j=settings.page+1;j<pagesize&&j<=settings.page+next_flag;j++){(function(obj,index,settings){obj.append($('<a href="javascript:void(0);" class="ti">'+index+"</a>").click(function(){eval("settings.callback("+index+settings.args+")");settings.page=index;methods._drawLinks.call(obj,settings)}))})(this,j,settings)}}if(settings.page!=pagesize){this.append($('<a href="javascript:void(0);" class="ti">'+((pagesize>(settings.display_num+2)&&settings.page+(settings.display_num+1)/2<pagesize)?settings.ellipse_text+pagesize:pagesize)+"</a>").click(function(){eval("settings.callback("+pagesize+settings.args+")");settings.page=pagesize;methods._drawLinks.call(self,settings)}))}if(settings.page<pagesize&&settings.next_show_always){this.append($('<a href="javascript:void(0);" class="ti next">'+settings.next_text+"</a>").click(function(){eval("settings.callback("+(settings.page+1)+settings.args+")");settings.page=settings.page+1;methods._drawLinks.call(self,settings)}))}},destroy:function(){return this.each(function(){var $this=$(this);$this.html("")})}};$.fn.pagination=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments)}else{$.error("Method "+method+" does not exist in pagination")}}}})(jQuery);(function(a){a.fn.tokenInput=function(c,b){function e(f){if(window.M){window.M.fetchCSSJS(f)}}var d=a.extend({url:c,hintText:"汉字/拼音",noResultsText:"没有找到",searchingText:"读取中...",searchDelay:300,minChars:1,tokenLimit:null,jsonContainer:null,method:"GET",contentType:"json",queryParam:"k",onResult:null,onAdd:null,onDel:null},b);d.classes=a.extend({tokenList:"token-input-list-facebook",token:"token-input-token-facebook",tokenDelete:"token-input-delete-token-facebook",selectedToken:"token-input-selected-token-facebook",highlightedToken:"token-input-highlighted-token-facebook",dropdown:"token-input-dropdown-facebook",dropdownItem:"token-input-dropdown-item-facebook",dropdownItem2:"token-input-dropdown-item2-facebook",selectedDropdownItem:"token-input-selected-dropdown-item-facebook",inputToken:"token-input-input-token-facebook"},b.classes||{});if(b.withoutcss!=1){e("/css/plugins/token-input.css")}return this.each(function(){var f=new a.TokenList(this,d)})};a.TokenList=function(u,F){var x={BEFORE:0,AFTER:1,END:2};var c={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,COMMA:188};var e=[];var l=0;var w=new a.TokenList.Cache();var s;var B=a('<input type="text">').css({outline:"none"}).focus(function(){if(F.tokenLimit==null||F.tokenLimit!=l){I()}}).bind("propertychange",function(K){setTimeout(function(){E(false)},5)}).bind("input",function(K){setTimeout(function(){E(false)},5)}).blur(function(){v()}).keydown(function(L){var N;var K;switch(L.keyCode){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:if(!a(this).val()){N=r.prev();K=r.next();if((N.length&&N.get(0)===m)||(K.length&&K.get(0)===m)){if(L.keyCode==c.LEFT||L.keyCode==c.UP){H(a(m),x.BEFORE)}else{H(a(m),x.AFTER)}}else{if((L.keyCode==c.LEFT||L.keyCode==c.UP)&&N.length){C(a(N.get(0)))}else{if((L.keyCode==c.RIGHT||L.keyCode==c.DOWN)&&K.length){C(a(K.get(0)))}}}}else{var M=null;if(L.keyCode==c.DOWN||L.keyCode==c.RIGHT){M=a(d).next()}else{M=a(d).prev()}if(M.length){n(M)}else{setTimeout(function(){E(false)},5)}return false}break;case c.BACKSPACE:N=r.prev();if(!a(this).val().length){if(m){k(a(m))}else{if(N.length){C(a(N.get(0)))}}return false}else{if(a(this).val().length==1){v()}else{setTimeout(function(){E(false)},5)}}break;case c.TAB:case c.RETURN:case c.COMMA:if(d){b(a(d));return false}else{setTimeout(function(){E(false)},5)}break;case c.ESC:v();return true;default:if(h(L.keyCode)){setTimeout(function(){E(false)},5)}break}});var J=a(u).hide().focus(function(){B.focus()}).blur(function(){B.blur()});var m=null;var d=null;var f=a("<ul />").addClass(F.classes.tokenList).insertAfter(J).click(function(L){var K=p(L,"li");if(K&&K.get(0)!=r.get(0)){o(K);return false}else{B.focus();if(m){H(a(m),x.END)}}}).mouseover(function(L){var K=p(L,"li");if(K&&m!==this){K.addClass(F.classes.highlightedToken)}}).mouseout(function(L){var K=p(L,"li");if(K&&m!==this){K.removeClass(F.classes.highlightedToken)}}).mousedown(function(L){var K=p(L,"li");if(K){return false}});var D=a("<div>").addClass(F.classes.dropdown).insertAfter(f).hide();var r=a("<li />").addClass(F.classes.inputToken).appendTo(f).append(B);G();function G(){li_data=F.prePopulate;if(li_data&&li_data.length){for(var K in li_data){var M=a("<li><p>"+li_data[K].name+"</p> </li>").addClass(F.classes.token).insertBefore(r);a("<span>x</span>").addClass(F.classes.tokenDelete).appendTo(M).click(function(){k(a(this).parent());return false});a.data(M.get(0),"tokeninput",{id:li_data[K].id,name:li_data[K].name});B.val("").focus();v();var L=li_data[K].id+",";J.val(J.val()+L)}}}function h(K){if((K>=48&&K<=90)||(K>=96&&K<=111)||(K>=186&&K<=192)||(K>=219&&K<=222)){return true}else{return false}}function p(L,N){var M=a(L.target);var K=null;if(M.is(N)){K=M}else{if(M.parent(N).length){K=M.parent(N+":first")}}return K}function z(M,K){var L=a("<li><p>"+K+"</p> </li>").attr("id","tok_"+M).addClass(F.classes.token).insertBefore(r);a("<span>x</span>").addClass(F.classes.tokenDelete).appendTo(L).click(function(){k(a(this).parent());return false});a.data(L.get(0),"tokeninput",{id:M,name:K});return L}function b(K){var N=a.data(K.get(0),"tokeninput");if(a("#tok_"+N.id).length>0){a("#tok_"+N.id).animate({opacity:"0.2"},400).animate({opacity:"1"},600);return false}var M=z(N.id,N.name);if(a.isFunction(F.onAdd)){F.onAdd.call(this,N)}B.val("").focus();v();var L=N.id+",";J.val(J.val()+L);l++;if(F.tokenLimit!=null&&F.tokenLimit>=l){B.hide();v()}}function C(K){K.addClass(F.classes.selectedToken);m=K.get(0);B.val("");v()}function H(L,K){L.removeClass(F.classes.selectedToken);m=null;if(K==x.BEFORE){r.insertBefore(L)}else{if(K==x.AFTER){r.insertAfter(L)}else{r.appendTo(f)}}B.focus()}function o(K){if(m==K.get(0)){H(K,x.END)}else{if(m){H(a(m),x.END)}C(K)}}function k(L){var M=a.data(L.get(0),"tokeninput");L.remove();if(a.isFunction(F.onDel)){F.onDel.call(this,M)}m=null;B.focus();var N=J.val();var O=N.indexOf(M.id+",");var K=N.indexOf(",",O)+1;if(K>=N.length){J.val(N.slice(0,O))}else{J.val(N.slice(0,O)+N.slice(K,N.length))}l--;if(F.tokenLimit!=null){B.show().val("").focus()}}function v(){D.hide().empty();d=null}function g(){D.html("<p>"+F.searchingText+"</p>").show()}function I(){D.html("<p>"+F.hintText+"</p>").show()}function t(L,K){return L.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+K+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>")}function A(N,L){if(L.length){D.empty();var M=a("<ul>").appendTo(D).mouseover(function(P){n(p(P,"li"))}).mousedown(function(P){b(p(P,"li"));return false}).hide();for(var K in L){if(L.hasOwnProperty(K)){var O=a("<li>"+t(L[K].name,N)+"</li>").appendTo(M);if(K%2){O.addClass(F.classes.dropdownItem)}else{O.addClass(F.classes.dropdownItem2)}if(K==0){n(O)}a.data(O.get(0),"tokeninput",L[K])}}D.show();M.slideDown("fast")}else{D.html("<p>"+F.noResultsText+"</p>").show()}}function n(K){if(K){if(d){q(a(d))}K.addClass(F.classes.selectedDropdownItem);d=K.get(0)}}function q(K){K.removeClass(F.classes.selectedDropdownItem);d=null}function E(K){var L=B.val().toLowerCase();if(L&&L.length){if(m){H(a(m),x.AFTER)}if(L.length>=F.minChars){g();if(K){y(L)}else{clearTimeout(s);s=setTimeout(function(){y(L)},F.searchDelay)}}else{v()}}}function y(L){var K=w.get(L);if(K){A(L,K)}else{var N=F.url.indexOf("?")<0?"?":"&";var M=function(O){if(a.isFunction(F.onResult)){O=F.onResult.call(this,O)}w.add(L,F.jsonContainer?O[F.jsonContainer]:O);A(L,F.jsonContainer?O[F.jsonContainer]:O)};if(F.method=="POST"){a.post(F.url+N+F.queryParam+"="+L,{},M,F.contentType)}else{a.get(F.url+N+F.queryParam+"="+L,{},M,F.contentType)}}}};a.TokenList.Cache=function(c){var e=a.extend({max_size:50},c);var f={};var d=0;var b=function(){f={};d=0};this.add=function(h,g){if(d>e.max_size){b()}if(!f[h]){d++}f[h]=g};this.get=function(g){return f[g]}}})(jQuery);(function(a){a.fn.menuAim=function(c){this.each(function(){b.call(this,c)});return this};function b(c){var d=a(this),r=null,g=[],s=null,q=null,t=a.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:a.noop,exit:a.noop,activate:a.noop,deactivate:a.noop,exitMenu:a.noop},c);var l=3,f=300;var e=function(u){g.push({x:u.pageX,y:u.pageY});if(g.length>l){g.shift()}};var p=function(){if(q){clearTimeout(q)}if(r){t.deactivate(r)}r=null};var n=function(){if(q){clearTimeout(q)}t.enter(this);h(this)},m=function(){t.exit(this)};var k=function(u){if(u==r){return}if(r){t.deactivate(r)}t.activate(u);r=u};var h=function(v){var u=o();if(u){q=setTimeout(function(){h(v)},u)}else{k(v)}};var o=function(){if(!r||!a(r).is(t.submenuSelector)){return 0}var y=d.offset(),u={x:y.left,y:y.top-t.tolerance},F={x:y.left+d.outerWidth(),y:u.y},H={x:y.left,y:y.top+d.outerHeight()+t.tolerance},z={x:y.left+d.outerWidth(),y:H.y},A=g[g.length-1],E=g[0];if(!A){return 0}if(!E){E=A}if(E.x<y.left||E.x>z.x||E.y<y.top||E.y>z.y){return 0}if(s&&A.x==s.x&&A.y==s.y){return 0}function B(J,I){return(I.y-J.y)/(I.x-J.x)}var D=F,v=z;if(t.submenuDirection=="left"){D=H;v=u}else{if(t.submenuDirection=="below"){D=z;v=H}else{if(t.submenuDirection=="above"){D=u;v=F}}}var w=B(A,D),C=B(A,v),G=B(E,D),x=B(E,v);if(w<G&&C>x){s=A;return f}s=null;return 0};d.mouseleave(p).find(t.rowSelector).mouseenter(n).mouseleave(m);a(document).mousemove(e)}})(jQuery);(function($){var autoload={css:function(file,options){var collection=$("link[rel=stylesheet]"),path=options.cssPath+file,element,i;for(i=0;i<collection.length;i+=1){if(path===this.href){return true}}if($.browser.msie){element=window.document.createStyleSheet(path);$(element).attr({media:"all"})}else{element=$("<link/>").attr({href:path,media:"all",rel:"stylesheet",type:"text/css"}).appendTo("head")}return true},js:function(file,options){var collection=$("script"),path=options.jsPath+file,i;for(i=0;i<collection.length;i+=1){if(path===collection[i].src){if(options.successCallback){options.successCallback()}return true}}$.ajax({url:path,dataType:"script",success:function(data,textStatus,XMLHttpRequest){if(options.successCallback){options.successCallback()}},error:function(XMLHttpRequest,textStatus,errorThrown){if(console){console.log(XMLHttpRequest,textStatus,errorThrown)}}});return true},findPath:function(baseFile){baseFile=baseFile.replace(/\./g,"\\.");var collection=$("script"),reg=eval("/^(.*)"+baseFile+"$/"),i,p;for(i=0;i<collection.length;i+=1){p=reg.exec(collection[i].src);if(null!==p){return p[1]}}return null}};$.autoload={css:function(names,options){var cssPath=(undefined===options.cssPath)?"/css/":options.cssPath,i;options={cssPath:cssPath};if("string"===typeof names){names=[names]}for(i=0;i<names.length;i+=1){autoload.css(names[i],options)}},js:function(names,options){var i;options.jsPath=(undefined===options.jsPath)?"/js/":options.jsPath;if("string"===typeof names){names=[names]}for(i=0;i<names.length;i+=1){autoload.js(names[i],options)}}}})(jQuery);(function(f){function p(v,A){var z=(v&65535)+(A&65535),w=(v>>16)+(A>>16)+(z>>16);return(w<<16)|(z&65535)}function t(v,w){return(v<<w)|(v>>>(32-w))}function c(B,y,w,v,A,z){return p(t(p(p(y,B),p(v,z)),A),w)}function b(y,w,C,B,v,A,z){return c((w&C)|((~w)&B),y,w,v,A,z)}function h(y,w,C,B,v,A,z){return c((w&B)|(C&(~B)),y,w,v,A,z)}function o(y,w,C,B,v,A,z){return c(w^C^B,y,w,v,A,z)}function a(y,w,C,B,v,A,z){return c(C^(w|(~B)),y,w,v,A,z)}function d(G,B){G[B>>5]|=128<<((B)%32);G[(((B+64)>>>9)<<4)+14]=B;var y,A,z,w,v,F=1732584193,E=-271733879,D=-1732584194,C=271733878;for(y=0;y<G.length;y+=16){A=F;z=E;w=D;v=C;F=b(F,E,D,C,G[y],7,-680876936);C=b(C,F,E,D,G[y+1],12,-389564586);D=b(D,C,F,E,G[y+2],17,606105819);E=b(E,D,C,F,G[y+3],22,-1044525330);F=b(F,E,D,C,G[y+4],7,-176418897);C=b(C,F,E,D,G[y+5],12,1200080426);D=b(D,C,F,E,G[y+6],17,-1473231341);E=b(E,D,C,F,G[y+7],22,-45705983);F=b(F,E,D,C,G[y+8],7,1770035416);C=b(C,F,E,D,G[y+9],12,-1958414417);D=b(D,C,F,E,G[y+10],17,-42063);E=b(E,D,C,F,G[y+11],22,-1990404162);F=b(F,E,D,C,G[y+12],7,1804603682);C=b(C,F,E,D,G[y+13],12,-40341101);D=b(D,C,F,E,G[y+14],17,-1502002290);E=b(E,D,C,F,G[y+15],22,1236535329);F=h(F,E,D,C,G[y+1],5,-165796510);C=h(C,F,E,D,G[y+6],9,-1069501632);D=h(D,C,F,E,G[y+11],14,643717713);E=h(E,D,C,F,G[y],20,-373897302);F=h(F,E,D,C,G[y+5],5,-701558691);C=h(C,F,E,D,G[y+10],9,38016083);D=h(D,C,F,E,G[y+15],14,-660478335);E=h(E,D,C,F,G[y+4],20,-405537848);F=h(F,E,D,C,G[y+9],5,568446438);C=h(C,F,E,D,G[y+14],9,-1019803690);D=h(D,C,F,E,G[y+3],14,-187363961);E=h(E,D,C,F,G[y+8],20,1163531501);F=h(F,E,D,C,G[y+13],5,-1444681467);C=h(C,F,E,D,G[y+2],9,-51403784);D=h(D,C,F,E,G[y+7],14,1735328473);E=h(E,D,C,F,G[y+12],20,-1926607734);F=o(F,E,D,C,G[y+5],4,-378558);C=o(C,F,E,D,G[y+8],11,-2022574463);D=o(D,C,F,E,G[y+11],16,1839030562);E=o(E,D,C,F,G[y+14],23,-35309556);F=o(F,E,D,C,G[y+1],4,-1530992060);C=o(C,F,E,D,G[y+4],11,1272893353);D=o(D,C,F,E,G[y+7],16,-155497632);E=o(E,D,C,F,G[y+10],23,-1094730640);F=o(F,E,D,C,G[y+13],4,681279174);C=o(C,F,E,D,G[y],11,-358537222);D=o(D,C,F,E,G[y+3],16,-722521979);E=o(E,D,C,F,G[y+6],23,76029189);F=o(F,E,D,C,G[y+9],4,-640364487);C=o(C,F,E,D,G[y+12],11,-421815835);D=o(D,C,F,E,G[y+15],16,530742520);E=o(E,D,C,F,G[y+2],23,-995338651);F=a(F,E,D,C,G[y],6,-198630844);C=a(C,F,E,D,G[y+7],10,1126891415);D=a(D,C,F,E,G[y+14],15,-1416354905);E=a(E,D,C,F,G[y+5],21,-57434055);F=a(F,E,D,C,G[y+12],6,1700485571);C=a(C,F,E,D,G[y+3],10,-1894986606);D=a(D,C,F,E,G[y+10],15,-1051523);E=a(E,D,C,F,G[y+1],21,-2054922799);F=a(F,E,D,C,G[y+8],6,1873313359);C=a(C,F,E,D,G[y+15],10,-30611744);D=a(D,C,F,E,G[y+6],15,-1560198380);E=a(E,D,C,F,G[y+13],21,1309151649);F=a(F,E,D,C,G[y+4],6,-145523070);C=a(C,F,E,D,G[y+11],10,-1120210379);D=a(D,C,F,E,G[y+2],15,718787259);E=a(E,D,C,F,G[y+9],21,-343485551);F=p(F,A);E=p(E,z);D=p(D,w);C=p(C,v)}return[F,E,D,C]}function q(w){var x,v="";for(x=0;x<w.length*32;x+=8){v+=String.fromCharCode((w[x>>5]>>>(x%32))&255)}return v}function k(w){var x,v=[];v[(w.length>>2)-1]=undefined;for(x=0;x<v.length;x+=1){v[x]=0}for(x=0;x<w.length*8;x+=8){v[x>>5]|=(w.charCodeAt(x/8)&255)<<(x%32)}return v}function l(v){return q(d(k(v),v.length*8))}function e(x,A){var w,z=k(x),v=[],y=[],B;v[15]=y[15]=undefined;if(z.length>16){z=d(z,x.length*8)}for(w=0;w<16;w+=1){v[w]=z[w]^909522486;y[w]=z[w]^1549556828}B=d(v.concat(k(A)),512+A.length*8);return q(d(y.concat(B),512+128))}function u(y){var A="0123456789abcdef",w="",v,z;for(z=0;z<y.length;z+=1){v=y.charCodeAt(z);w+=A.charAt((v>>>4)&15)+A.charAt(v&15)}return w}function n(v){return unescape(encodeURIComponent(v))}function r(v){return l(n(v))}function m(v){return u(r(v))}function g(v,w){return e(n(v),n(w))}function s(v,w){return u(g(v,w))}f.md5=function(w,x,v){if(!x){if(!v){return m(w)}else{return r(w)}}if(!v){return s(x,w)}else{return g(x,w)}}}(typeof jQuery==="function"?jQuery:this));var swfobject=function(){var Z="undefined",P="object",B="Shockwave Flash",h="ShockwaveFlash.ShockwaveFlash",W="application/x-shockwave-flash",K="SWFObjectExprInst",G=window,g=document,N=navigator,f=[],H=[],Q=null,L=null,T=null,S=false,C=false;var a=function(){var l=typeof g.getElementById!=Z&&typeof g.getElementsByTagName!=Z&&typeof g.createElement!=Z&&typeof g.appendChild!=Z&&typeof g.replaceChild!=Z&&typeof g.removeChild!=Z&&typeof g.cloneNode!=Z,t=[0,0,0],n=null;if(typeof N.plugins!=Z&&typeof N.plugins[B]==P){n=N.plugins[B].description;if(n){n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1");t[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10);t[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10);t[2]=/r/.test(n)?parseInt(n.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof G.ActiveXObject!=Z){var o=null,s=false;try{o=new ActiveXObject(h+".7")}catch(k){try{o=new ActiveXObject(h+".6");t=[6,0,21];o.AllowScriptAccess="always"}catch(k){if(t[0]==6){s=true}}if(!s){try{o=new ActiveXObject(h)}catch(k){}}}if(!s&&o){try{n=o.GetVariable("$version");if(n){n=n.split(" ")[1].split(",");t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]}}catch(k){}}}}var v=N.userAgent.toLowerCase(),j=N.platform.toLowerCase(),r=/webkit/.test(v)?parseFloat(v.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,i=false,q=j?/win/.test(j):/win/.test(v),m=j?/mac/.test(j):/mac/.test(v);
/*@cc_on i=true;@if(@_win32)q=true;@elif(@_mac)m=true;@end@*/
return{w3cdom:l,pv:t,webkit:r,ie:i,win:q,mac:m}}();var e=function(){if(!a.w3cdom){return}J(I);if(a.ie&&a.win){try{g.write("<script id=__ie_ondomload defer=true src=//:><\/script>");var i=c("__ie_ondomload");if(i){i.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);V()}}}}catch(j){}}if(a.webkit&&typeof g.readyState!=Z){Q=setInterval(function(){if(/loaded|complete/.test(g.readyState)){V()}},10)}if(typeof g.addEventListener!=Z){g.addEventListener("DOMContentLoaded",V,null)}M(V)}();function V(){if(S){return}if(a.ie&&a.win){var m=Y("span");try{var l=g.getElementsByTagName("body")[0].appendChild(m);l.parentNode.removeChild(l)}catch(n){return}}S=true;if(Q){clearInterval(Q);Q=null}var j=f.length;for(var k=0;k<j;k++){f[k]()}}function J(i){if(S){i()}else{f[f.length]=i}}function M(j){if(typeof G.addEventListener!=Z){G.addEventListener("load",j,false)}else{if(typeof g.addEventListener!=Z){g.addEventListener("load",j,false)}else{if(typeof G.attachEvent!=Z){G.attachEvent("onload",j)}else{if(typeof G.onload=="function"){var i=G.onload;G.onload=function(){i();j()}}else{G.onload=j}}}}}function I(){var l=H.length;for(var j=0;j<l;j++){var m=H[j].id;if(a.pv[0]>0){var k=c(m);if(k){H[j].width=k.getAttribute("width")?k.getAttribute("width"):"0";H[j].height=k.getAttribute("height")?k.getAttribute("height"):"0";if(O(H[j].swfVersion)){if(a.webkit&&a.webkit<312){U(k)}X(m,true)}else{if(H[j].expressInstall&&!C&&O("6.0.65")&&(a.win||a.mac)){D(H[j])}else{d(k)}}}}else{X(m,true)}}}function U(m){var k=m.getElementsByTagName(P)[0];if(k){var p=Y("embed"),r=k.attributes;if(r){var o=r.length;for(var n=0;n<o;n++){if(r[n].nodeName.toLowerCase()=="data"){p.setAttribute("src",r[n].nodeValue)}else{p.setAttribute(r[n].nodeName,r[n].nodeValue)}}}var q=k.childNodes;if(q){var s=q.length;for(var l=0;l<s;l++){if(q[l].nodeType==1&&q[l].nodeName.toLowerCase()=="param"){p.setAttribute(q[l].getAttribute("name"),q[l].getAttribute("value"))}}}m.parentNode.replaceChild(p,m)}}function F(i){if(a.ie&&a.win&&O("8.0.0")){G.attachEvent("onunload",function(){var k=c(i);if(k){for(var j in k){if(typeof k[j]=="function"){k[j]=function(){}}}k.parentNode.removeChild(k)}})}}function D(j){C=true;var o=c(j.id);if(o){if(j.altContentId){var l=c(j.altContentId);if(l){L=l;T=j.altContentId}}else{L=b(o)}if(!(/%$/.test(j.width))&&parseInt(j.width,10)<310){j.width="310"}if(!(/%$/.test(j.height))&&parseInt(j.height,10)<137){j.height="137"}g.title=g.title.slice(0,47)+" - Flash Player Installation";var n=a.ie&&a.win?"ActiveX":"PlugIn",k=g.title,m="MMredirectURL="+G.location+"&MMplayerType="+n+"&MMdoctitle="+k,p=j.id;if(a.ie&&a.win&&o.readyState!=4){var i=Y("div");p+="SWFObjectNew";i.setAttribute("id",p);o.parentNode.insertBefore(i,o);o.style.display="none";G.attachEvent("onload",function(){o.parentNode.removeChild(o)})}R({data:j.expressInstall,id:K,width:j.width,height:j.height},{flashvars:m},p)}}function d(j){if(a.ie&&a.win&&j.readyState!=4){var i=Y("div");j.parentNode.insertBefore(i,j);i.parentNode.replaceChild(b(j),i);j.style.display="none";G.attachEvent("onload",function(){j.parentNode.removeChild(j)})}else{j.parentNode.replaceChild(b(j),j)}}function b(n){var m=Y("div");if(a.win&&a.ie){m.innerHTML=n.innerHTML}else{var k=n.getElementsByTagName(P)[0];if(k){var o=k.childNodes;if(o){var j=o.length;for(var l=0;l<j;l++){if(!(o[l].nodeType==1&&o[l].nodeName.toLowerCase()=="param")&&!(o[l].nodeType==8)){m.appendChild(o[l].cloneNode(true))}}}}}return m}function R(AE,AC,q){var p,t=c(q);if(typeof AE.id==Z){AE.id=q}if(a.ie&&a.win){var AD="";for(var z in AE){if(AE[z]!=Object.prototype[z]){if(z=="data"){AC.movie=AE[z]}else{if(z.toLowerCase()=="styleclass"){AD+=' class="'+AE[z]+'"'}else{if(z!="classid"){AD+=" "+z+'="'+AE[z]+'"'}}}}}var AB="";for(var y in AC){if(AC[y]!=Object.prototype[y]){AB+='<param name="'+y+'" value="'+AC[y]+'" />'}}t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AD+">"+AB+"</object>";F(AE.id);p=c(AE.id)}else{if(a.webkit&&a.webkit<312){var AA=Y("embed");AA.setAttribute("type",W);for(var x in AE){if(AE[x]!=Object.prototype[x]){if(x=="data"){AA.setAttribute("src",AE[x])}else{if(x.toLowerCase()=="styleclass"){AA.setAttribute("class",AE[x])}else{if(x!="classid"){AA.setAttribute(x,AE[x])}}}}}for(var w in AC){if(AC[w]!=Object.prototype[w]){if(w!="movie"){AA.setAttribute(w,AC[w])}}}t.parentNode.replaceChild(AA,t);p=AA}else{var s=Y(P);s.setAttribute("type",W);for(var v in AE){if(AE[v]!=Object.prototype[v]){if(v.toLowerCase()=="styleclass"){s.setAttribute("class",AE[v])}else{if(v!="classid"){s.setAttribute(v,AE[v])}}}}for(var u in AC){if(AC[u]!=Object.prototype[u]&&u!="movie"){E(s,u,AC[u])}}t.parentNode.replaceChild(s,t);p=s}}return p}function E(k,i,j){var l=Y("param");l.setAttribute("name",i);l.setAttribute("value",j);k.appendChild(l)}function c(i){return g.getElementById(i)}function Y(i){return g.createElement(i)}function O(k){var j=a.pv,i=k.split(".");i[0]=parseInt(i[0],10);i[1]=parseInt(i[1],10);i[2]=parseInt(i[2],10);return(j[0]>i[0]||(j[0]==i[0]&&j[1]>i[1])||(j[0]==i[0]&&j[1]==i[1]&&j[2]>=i[2]))?true:false}function A(m,j){if(a.ie&&a.mac){return}var l=g.getElementsByTagName("head")[0],k=Y("style");k.setAttribute("type","text/css");k.setAttribute("media","screen");if(!(a.ie&&a.win)&&typeof g.createTextNode!=Z){k.appendChild(g.createTextNode(m+" {"+j+"}"))}l.appendChild(k);if(a.ie&&a.win&&typeof g.styleSheets!=Z&&g.styleSheets.length>0){var i=g.styleSheets[g.styleSheets.length-1];if(typeof i.addRule==P){i.addRule(m,j)}}}function X(k,i){var j=i?"visible":"hidden";if(S){c(k).style.visibility=j}else{A("#"+k,"visibility:"+j)}}return{registerObject:function(l,i,k){if(!a.w3cdom||!l||!i){return}var j={};j.id=l;j.swfVersion=i;j.expressInstall=k?k:false;H[H.length]=j;X(l,false)},getObjectById:function(l){var i=null;if(a.w3cdom&&S){var j=c(l);if(j){var k=j.getElementsByTagName(P)[0];if(!k||(k&&typeof j.SetVariable!=Z)){i=j}else{if(typeof k.SetVariable!=Z){i=k}}}}return i},embedSWF:function(n,u,r,t,j,m,k,p,s){if(!a.w3cdom||!n||!u||!r||!t||!j){return}r+="";t+="";if(O(j)){X(u,false);var q=(typeof s==P)?s:{};q.data=n;q.width=r;q.height=t;var o=(typeof p==P)?p:{};if(typeof k==P){for(var l in k){if(k[l]!=Object.prototype[l]){if(typeof o.flashvars!=Z){o.flashvars+="&"+l+"="+k[l]}else{o.flashvars=l+"="+k[l]}}}}J(function(){R(q,o,u);if(q.id==u){X(u,true)}})}else{if(m&&!C&&O("6.0.65")&&(a.win||a.mac)){X(u,false);J(function(){var i={};i.id=i.altContentId=u;i.width=r;i.height=t;i.expressInstall=m;D(i)})}}},getFlashPlayerVersion:function(){return{major:a.pv[0],minor:a.pv[1],release:a.pv[2]}},hasFlashPlayerVersion:O,createSWF:function(k,j,i){if(a.w3cdom&&S){return R(k,j,i)}else{return undefined}},createCSS:function(j,i){if(a.w3cdom){A(j,i)}},addDomLoadEvent:J,addLoadEvent:M,getQueryParamValue:function(m){var l=g.location.search||g.location.hash;if(m==null){return l}if(l){var k=l.substring(1).split("&");for(var j=0;j<k.length;j++){if(k[j].substring(0,k[j].indexOf("="))==m){return k[j].substring((k[j].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(C&&L){var i=c(K);if(i){i.parentNode.replaceChild(L,i);if(T){X(T,true);if(a.ie&&a.win){L.style.display="block"}}L=null;T=null;C=false}}}}}();(function(g,c){function f(p,m){var o,l=[];for(var n=0;n<p.length;++n){o=k[p[n]]||h(p[n]);if(!o){throw"module definition dependecy not found: "+p[n]}l.push(o)}m.apply(null,l)}function b(n,l,m){if(typeof n!=="string"){throw"invalid module definition, module id must be defined and be a string"}if(l===c){throw"invalid module definition, dependencies must be specified"}if(m===c){throw"invalid module definition, definition function must be specified"}f(l,function(){k[n]=m.apply(null,arguments)})}function d(l){return !!k[l]}function h(l){var o=g;var m=l.split(/[.\/]/);for(var e=0;e<m.length;++e){if(!o[m[e]]){return}o=o[m[e]]}return o}function a(p){for(var m=0;m<p.length;m++){var n=g;var q=p[m];var l=q.split(/[.\/]/);for(var e=0;e<l.length-1;++e){if(n[l[e]]===c){n[l[e]]={}}n=n[l[e]]}n[l[l.length-1]]=k[q]}}var k={};b("moxie/core/utils/Basic",[],function(){var z=function(n){var l;if(n===l){return"undefined"}else{if(n===null){return"null"}else{if(n.nodeType){return"node"}}}return{}.toString.call(n).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()};var D=function(l){var e;q(arguments,function(o,n){if(n>0){q(o,function(t,r){if(t!==e){if(z(l[r])===z(t)&&!!~p(z(t),["array","object"])){D(l[r],t)}else{l[r]=t}}})}});return l};var q=function(H,u){var J,G,l,F;if(H){try{J=H.length}catch(I){J=F}if(J===F){for(G in H){if(H.hasOwnProperty(G)){if(u(H[G],G)===false){return}}}}else{for(l=0;l<J;l++){if(u(H[l],l)===false){return}}}}};var m=function(e){var l;if(!e||z(e)!=="object"){return true}for(l in e){return false}return true};var w=function(l,F){function o(n){if(z(l[n])==="function"){l[n](function(r){++n<e&&!r?o(n):F(r)})}}var u=0,e=l.length;if(z(F)!=="function"){F=function(){}}if(!l||!l.length){F()}o(u)};var E=function(F,n){var u=0,l=F.length,o=new Array(l);q(F,function(r,s){r(function(t){if(t){return n(t)}var G=[].slice.call(arguments);G.shift();o[s]=G;u++;if(u===l){o.unshift(null);n.apply(this,o)}})})};var p=function(s,l){if(l){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(l,s)}for(var u=0,o=l.length;u<o;u++){if(l[u]===s){return u}}}return -1};var C=function(l,s){var o=[];if(z(l)!=="array"){l=[l]}if(z(s)!=="array"){s=[s]}for(var e in l){if(p(l[e],s)===-1){o.push(l[e])}}return o.length?o:false};var B=function(o,l){var n=[];q(o,function(r){if(p(r,l)!==-1){n.push(r)}});return n.length?n:null};var y=function(o){var l,r=[];for(l=0;l<o.length;l++){r[l]=o[l]}return r};var v=function(){var l=0;return function(e){var s=(new Date).getTime().toString(32),o;for(o=0;o<5;o++){s+=Math.floor(Math.random()*65535).toString(32)}return(e||"o_")+s+(l++).toString(32)}}();var A=function(l){if(!l){return l}return String.prototype.trim?String.prototype.trim.call(l):l.toString().replace(/^\s*/,"").replace(/\s*$/,"")};var x=function(o){if(typeof o!=="string"){return o}var l={t:1099511627776,g:1073741824,m:1048576,k:1024},r;o=/^([0-9]+)([mgk]?)$/.exec(o.toLowerCase().replace(/[^0-9mkg]/g,""));r=o[2];o=+o[1];if(l.hasOwnProperty(r)){o*=l[r]}return o};return{guid:v,typeOf:z,extend:D,each:q,isEmptyObj:m,inSeries:w,inParallel:E,inArray:p,arrayDiff:C,arrayIntersect:B,toArray:y,trim:A,parseSizeStr:x}});b("moxie/core/I18n",["moxie/core/utils/Basic"],function(m){var l={};return{addI18n:function(e){return m.extend(l,e)},translate:function(n){return l[n]||n},_:function(n){return this.translate(n)},sprintf:function(e){var o=[].slice.call(arguments,1);return e.replace(/%[a-z]/g,function(){var n=o.shift();return m.typeOf(n)!=="undefined"?n:""})}}});b("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(o,l){var p="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe";var m={mimes:{},extensions:{},addMimeType:function(v){var s=v.split(/,/),w,u,q;for(w=0;w<s.length;w+=2){q=s[w+1].split(/ /);for(u=0;u<q.length;u++){this.mimes[q[u]]=s[w]}this.extensions[s[w]]=q}},extList2mimes:function(w,A){var y=this,v,x,z,q,e=[];for(x=0;x<w.length;x++){v=w[x].extensions.split(/\s*,\s*/);for(z=0;z<v.length;z++){if(v[z]==="*"){return[]}q=y.mimes[v[z]];if(!q){if(A&&/^\w+$/.test(v[z])){e.push("."+v[z])}else{return[]}}else{if(o.inArray(q,e)===-1){e.push(q)}}}}return e},mimes2exts:function(e){var s=this,q=[];o.each(e,function(r){if(r==="*"){q=[];return false}var n=r.match(/^(\w+)\/(\*|\w+)$/);if(n){if(n[2]==="*"){o.each(s.extensions,function(v,u){if((new RegExp("^"+n[1]+"/")).test(u)){[].push.apply(q,s.extensions[u])}})}else{if(s.extensions[r]){[].push.apply(q,s.extensions[r])}}}});return q},mimes2extList:function(s){var q=[],e=[];if(o.typeOf(s)==="string"){s=o.trim(s).split(/\s*,\s*/)}e=this.mimes2exts(s);q.push({title:l.translate("Files"),extensions:e.length?e.join(","):"*"});q.mimes=s;return q},getFileExtension:function(q){var n=q&&q.match(/\.([^.]+)$/);if(n){return n[1].toLowerCase()}return""},getFileMime:function(n){return this.mimes[this.getFileExtension(n)]||""}};m.addMimeType(p);return m});b("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(p){function q(z,C,x){var v=0,y=0,D=0,w={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},B=function(n){n=(""+n).replace(/[_\-+]/g,".");n=n.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".");return !n.length?[-8]:n.split(".")},A=function(n){return !n?0:isNaN(n)?w[n]||-7:parseInt(n,10)};z=B(z);C=B(C);y=Math.max(z.length,C.length);for(v=0;v<y;v++){if(z[v]==C[v]){continue}z[v]=A(z[v]);C[v]=A(C[v]);if(z[v]<C[v]){D=-1;break}else{if(z[v]>C[v]){D=1;break}}}if(!x){return D}switch(x){case">":case"gt":return D>0;case">=":case"ge":return D>=0;case"<=":case"le":return D<=0;case"==":case"=":case"eq":return D===0;case"<>":case"!=":case"ne":return D!==0;case"":case"<":case"lt":return D<0;default:return null}}var m=function(O){var C="",H="?",E="function",K="undefined",D="object",G="major",B="model",S="name",N="type",J="vendor",Q="version",L="architecture",F="console",P="mobile",A="tablet";var I={has:function(r,n){return n.toLowerCase().indexOf(r.toLowerCase())!==-1},lowerize:function(n){return n.toLowerCase()}};var M={rgx:function(){for(var X,s=0,r,W,V,y,v,U,w=arguments;s<w.length;s+=2){var e=w[s],T=w[s+1];if(typeof X===K){X={};for(V in T){y=T[V];if(typeof y===D){X[y[0]]=O}else{X[y]=O}}}for(r=W=0;r<e.length;r++){v=e[r].exec(this.getUA());if(!!v){for(V=0;V<T.length;V++){U=v[++W];y=T[V];if(typeof y===D&&y.length>0){if(y.length==2){if(typeof y[1]==E){X[y[0]]=y[1].call(this,U)}else{X[y[0]]=y[1]}}else{if(y.length==3){if(typeof y[1]===E&&!(y[1].exec&&y[1].test)){X[y[0]]=U?y[1].call(this,U,y[2]):O}else{X[y[0]]=U?U.replace(y[1],y[2]):O}}else{if(y.length==4){X[y[0]]=U?y[3].call(this,U.replace(y[1],y[2])):O}}}}else{X[y]=U?U:O}}break}}if(!!v){break}}return X},str:function(n,s){for(var e in s){if(typeof s[e]===D&&s[e].length>0){for(var u=0;u<s[e].length;u++){if(I.has(s[e][u],n)){return e===H?O:e}}}else{if(I.has(s[e],n)){return e===H?O:e}}}return n}};var x={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}};var R={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[S,Q,G],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[S,"Opera"],Q,G],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[S,Q,G],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[S,"IE"],Q,G],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[S,"Yandex"],Q,G],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[S,/_/g," "],Q,G],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[S,Q,G],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[S,"Dolphin"],Q,G],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[S,"Chrome"],Q,G],[/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],[[S,"Android Browser"],Q,G],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[Q,G,[S,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[Q,G,S],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[S,[G,M.str,x.browser.oldsafari.major],[Q,M.str,x.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[S,Q,G],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[S,"Netscape"],Q,G],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[S,Q,G]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[S,Q],[/rv\:([\w\.]+).*(gecko)/i],[Q,S]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[S,[Q,M.str,x.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[S,"Windows"],[Q,M.str,x.os.windows.version]],[/\((bb)(10);/i],[[S,"BlackBerry"],Q],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[S,Q],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[S,"Symbian"],Q],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[S,"Firefox OS"],Q],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[S,Q],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[S,"Chromium OS"],Q],[/(sunos)\s?([\w\.]+\d)*/i],[[S,"Solaris"],Q],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[S,Q],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[S,"iOS"],[Q,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[S,[Q,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[S,Q]]};var z=function(r){var s=r||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:C);this.getBrowser=function(){return M.rgx.apply(this,R.browser)};this.getEngine=function(){return M.rgx.apply(this,R.engine)};this.getOS=function(){return M.rgx.apply(this,R.os)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}};this.getUA=function(){return s};this.setUA=function(n){s=n;return this};this.setUA(s)};return(new z).getResult()}();var o=function(){var e={define_property:function(){return false}(),create_canvas:function(){var n=document.createElement("canvas");return !!(n.getContext&&n.getContext("2d"))}(),return_response_type:function(s){try{if(p.inArray(s,["","text","document"])!==-1){return true}else{if(window.XMLHttpRequest){var v=new XMLHttpRequest;v.open("get","/");if("responseType" in v){v.responseType=s;if(v.responseType!==s){return false}return true}}}}catch(u){}return false},use_data_uri:function(){var n=new Image;n.onload=function(){e.use_data_uri=n.width===1&&n.height===1};setTimeout(function(){n.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1);return false}(),use_data_uri_over32kb:function(){return e.use_data_uri&&(l.browser!=="IE"||l.version>=9)},use_data_uri_of:function(n){return e.use_data_uri&&n<33000||e.use_data_uri_over32kb()},use_fileinput:function(){var n=document.createElement("input");n.setAttribute("type","file");return !n.disabled}};return function(t){var s=[].slice.call(arguments);s.shift();return p.typeOf(e[t])==="function"?e[t].apply(this,s):!!e[t]}}();var l={can:o,browser:m.browser.name,version:parseFloat(m.browser.major),os:m.os.name,osVersion:m.os.version,verComp:q,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};l.OS=l.os;return l});b("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(w){var p=function(n){if(typeof n!=="string"){return n}return document.getElementById(n)};var y=function(r,o){if(!r.className){return false}var s=new RegExp("(^|\\s+)"+o+"(\\s+|$)");return s.test(r.className)};var v=function(o,n){if(!y(o,n)){o.className=!o.className?n:o.className.replace(/\s+$/,"")+" "+n}};var m=function(r,o){if(r.className){var s=new RegExp("(^|\\s+)"+o+"(\\s+|$)");r.className=r.className.replace(s,function(z,u,A){return u===" "&&A===" "?" ":""})}};var q=function(o,n){if(o.currentStyle){return o.currentStyle[n]}else{if(window.getComputedStyle){return window.getComputedStyle(o,null)[n]}}};var x=function(F,A){function C(H){var s,I,u=0,o=0;if(H){I=H.getBoundingClientRect();s=z.compatMode==="CSS1Compat"?z.documentElement:z.body;u=I.left+s.scrollLeft;o=I.top+s.scrollTop}return{x:u,y:o}}var e=0,B=0,G,z=document,E,D;F=F;A=A||z.body;if(F&&F.getBoundingClientRect&&w.browser==="IE"&&(!z.documentMode||z.documentMode<8)){E=C(F);D=C(A);return{x:E.x-D.x,y:E.y-D.y}}G=F;while(G&&G!=A&&G.nodeType){e+=G.offsetLeft||0;B+=G.offsetTop||0;G=G.offsetParent}G=F.parentNode;while(G&&G!=A&&G.nodeType){e-=G.scrollLeft||0;B-=G.scrollTop||0;G=G.parentNode}return{x:e,y:B}};var l=function(n){return{w:n.offsetWidth||n.clientWidth,h:n.offsetHeight||n.clientHeight}};return{get:p,hasClass:y,addClass:v,removeClass:m,getStyle:q,getPos:x,getSize:l}});b("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(m){function l(p,o){var q;for(q in p){if(p[q]===o){return q}}return null}return{RuntimeError:function(){function e(n){this.code=n;this.name=l(o,n);this.message=this.name+": RuntimeError "+this.code}var o={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};m.extend(e,o);e.prototype=Error.prototype;return e}(),OperationNotAllowedException:function(){function e(n){this.code=n;this.name="OperationNotAllowedException"}m.extend(e,{NOT_ALLOWED_ERR:1});e.prototype=Error.prototype;return e}(),ImageError:function(){function e(n){this.code=n;this.name=l(o,n);this.message=this.name+": ImageError "+this.code}var o={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};m.extend(e,o);e.prototype=Error.prototype;return e}(),FileException:function(){function e(n){this.code=n;this.name=l(o,n);this.message=this.name+": FileException "+this.code}var o={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};m.extend(e,o);e.prototype=Error.prototype;return e}(),DOMException:function(){function e(n){this.code=n;this.name=l(o,n);this.message=this.name+": DOMException "+this.code}var o={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};m.extend(e,o);e.prototype=Error.prototype;return e}(),EventException:function(){function e(n){this.code=n;this.name="EventException"}m.extend(e,{UNSPECIFIED_EVENT_TYPE_ERR:0});e.prototype=Error.prototype;return e}()}});b("moxie/core/EventTarget",["moxie/core/Exceptions","moxie/core/utils/Basic"],function(m,l){function o(){var e={};l.extend(this,{uid:null,init:function(){if(!this.uid){this.uid=l.guid("uid_")}},addEventListener:function(v,t,p,q){var w=this,n;v=l.trim(v);if(/\s/.test(v)){l.each(v.split(/\s+/),function(r){w.addEventListener(r,t,p,q)});return}v=v.toLowerCase();p=parseInt(p,10)||0;n=e[this.uid]&&e[this.uid][v]||[];n.push({fn:t,priority:p,scope:q||this});if(!e[this.uid]){e[this.uid]={}}e[this.uid][v]=n},hasEventListener:function(n){return n?!!(e[this.uid]&&e[this.uid][n]):!!e[this.uid]},removeEventListener:function(t,q){t=t.toLowerCase();var n=e[this.uid]&&e[this.uid][t],p;if(n){if(q){for(p=n.length-1;p>=0;p--){if(n[p].fn===q){n.splice(p,1);break}}}else{n=[]}if(!n.length){delete e[this.uid][t];if(l.isEmptyObj(e[this.uid])){delete e[this.uid]}}}},removeAllEventListeners:function(){if(e[this.uid]){delete e[this.uid]}},dispatchEvent:function(n){var t,z,p,y,x={},v=true,q;if(l.typeOf(n)!=="string"){y=n;if(l.typeOf(y.type)==="string"){n=y.type;if(y.total!==q&&y.loaded!==q){x.total=y.total;x.loaded=y.loaded}x.async=y.async||false}else{throw new m.EventException(m.EventException.UNSPECIFIED_EVENT_TYPE_ERR)}}if(n.indexOf("::")!==-1){(function(r){t=r[0];n=r[1]})(n.split("::"))}else{t=this.uid}n=n.toLowerCase();z=e[t]&&e[t][n];if(z){z.sort(function(s,r){return r.priority-s.priority});p=[].slice.call(arguments);p.shift();x.type=n;p.unshift(x);var w=[];l.each(z,function(r){p[0].target=r.scope;if(x.async){w.push(function(s){setTimeout(function(){s(r.fn.apply(r.scope,p)===false)},1)})}else{w.push(function(s){s(r.fn.apply(r.scope,p)===false)})}});if(w.length){l.inSeries(w,function(r){v=!r})}}return v},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(q){var s;if(l.typeOf(q)!=="array"){q=[q]}for(var p=0;p<q.length;p++){s="on"+q[p];if(l.typeOf(this[s])==="function"){this.addEventListener(q[p],this[s])}else{if(l.typeOf(this[s])==="undefined"){this[s]=null}}}}})}o.instance=new o;return o});b("moxie/core/utils/Encode",[],function(){var o=function(n){return unescape(encodeURIComponent(n))};var l=function(n){return decodeURIComponent(escape(n))};var p=function(C,x){if(typeof window.atob==="function"){return x?l(window.atob(C)):window.atob(C)}var q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var z,I,w,H,F,B,y,E,A=0,t=0,D="",G=[];if(!C){return C}C+="";do{H=q.indexOf(C.charAt(A++));F=q.indexOf(C.charAt(A++));B=q.indexOf(C.charAt(A++));y=q.indexOf(C.charAt(A++));E=H<<18|F<<12|B<<6|y;z=E>>16&255;I=E>>8&255;w=E&255;if(B==64){G[t++]=String.fromCharCode(z)}else{if(y==64){G[t++]=String.fromCharCode(z,I)}else{G[t++]=String.fromCharCode(z,I,w)}}}while(A<C.length);D=G.join("");return x?l(D):D};var m=function(I,x){if(x){o(I)}if(typeof window.btoa==="function"){return window.btoa(I)}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var A,J,w,H,F,C,z,E,B=0,q=0,D="",G=[];if(!I){return I}do{A=I.charCodeAt(B++);J=I.charCodeAt(B++);w=I.charCodeAt(B++);E=A<<16|J<<8|w;H=E>>18&63;F=E>>12&63;C=E>>6&63;z=E&63;G[q++]=e.charAt(H)+e.charAt(F)+e.charAt(C)+e.charAt(z)}while(B<I.length);D=G.join("");var y=I.length%3;return(y?D.slice(0,y-3):D)+"===".slice(y||3)};return{utf8_encode:o,utf8_decode:l,atob:p,btoa:m}});b("moxie/runtime/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(q,m,u){function o(t,e,s,A,z){var x=this,v,y=q.guid(e+"_"),w=z||"browser";t=t||{};l[y]=this;s=q.extend({access_binary:false,access_image_binary:false,display_media:false,do_cors:false,drag_and_drop:false,filter_by_extension:true,resize_image:false,report_upload_progress:false,return_response_headers:false,return_response_type:false,return_status_code:true,send_custom_headers:false,select_file:false,select_folder:false,select_multiple:true,send_binary_string:false,send_browser_cookies:true,send_multipart:true,slice_blob:false,stream_upload:false,summon_file_dialog:false,upload_filesize:true,use_http_method:true},s);if(t.preferred_caps){w=o.getMode(A,t.preferred_caps,w)}v=function(){var n={};return{exec:function(D,E,C,B){if(v[E]){if(!n[D]){n[D]={context:this,instance:new v[E]}}if(n[D].instance[C]){return n[D].instance[C].apply(this,B)}}},removeInstance:function(r){delete n[r]},removeAllInstances:function(){var r=this;q.each(n,function(B,C){if(q.typeOf(B.instance.destroy)==="function"){B.instance.destroy.call(B.context)}r.removeInstance(C)})}}}();q.extend(this,{initialized:false,uid:y,type:e,mode:o.getMode(A,t.required_caps,w),shimid:y+"_container",clients:0,options:t,can:function(C,E){var D=arguments[2]||s;if(q.typeOf(C)==="string"&&q.typeOf(E)==="undefined"){C=o.parseCaps(C)}if(q.typeOf(C)==="object"){for(var B in C){if(!this.can(B,C[B],D)){return false}}return true}if(q.typeOf(D[C])==="function"){return D[C].call(this,E)}else{return E===D[C]}},getShimContainer:function(){var C,B=m.get(this.shimid);if(!B){C=this.options.container?m.get(this.options.container):document.body;B=document.createElement("div");B.id=this.shimid;B.className="moxie-shim moxie-shim-"+this.type;q.extend(B.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"});C.appendChild(B);C=null}return B},getShim:function(){return v},shimExec:function(B,r){var C=[].slice.call(arguments,2);return x.getShim().exec.call(this,this.uid,B,r,C)},exec:function(B,r){var C=[].slice.call(arguments,2);if(x[B]&&x[B][r]){return x[B][r].apply(this,C)}return x.shimExec.apply(this,arguments)},destroy:function(){if(!x){return}var n=m.get(this.shimid);if(n){n.parentNode.removeChild(n)}if(v){v.removeAllInstances()}this.unbindAll();delete l[this.uid];this.uid=null;y=x=v=n=null}});if(this.mode&&t.required_caps&&!this.can(t.required_caps)){this.mode=false}}var p={},l={};o.order="html5,flash,silverlight,html4";o.getRuntime=function(n){return l[n]?l[n]:false};o.addConstructor=function(r,n){n.prototype=u.instance;p[r]=n};o.getConstructor=function(n){return p[n]||null};o.getInfo=function(r){var n=o.getRuntime(r);if(n){return{uid:n.uid,type:n.type,mode:n.mode,can:function(){return n.can.apply(n,arguments)}}}return null};o.parseCaps=function(e){var r={};if(q.typeOf(e)!=="string"){return e||{}}q.each(e.split(","),function(n){r[n]=true});return r};o.can=function(x,v){var y,w=o.getConstructor(x),s;if(w){y=new w({required_caps:v});s=y.mode;y.destroy();return !!s}return false};o.thatCan=function(w,s){var x=(s||o.order).split(/\s*,\s*/);for(var v in x){if(o.can(x[v],w)){return x[v]}}return null};o.getMode=function(s,w,v){var e=null;if(q.typeOf(v)==="undefined"){v="browser"}if(w&&!q.isEmptyObj(s)){q.each(w,function(y,x){if(s.hasOwnProperty(x)){var t=s[x](y);if(typeof t==="string"){t=[t]}if(!e){e=t}else{if(!(e=q.arrayIntersect(e,t))){return e=false}}}});if(e){return q.inArray(v,e)!==-1?v:e[0]}else{if(e===false){return false}}}return v};o.capTrue=function(){return true};o.capFalse=function(){return false};o.capTest=function(n){return function(){return !!n}};return o});b("moxie/runtime/RuntimeClient",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(m,l,o){return function(){var e;l.extend(this,{connectRuntime:function(q){function n(s){var u,r;if(!s.length){p.trigger("RuntimeError",new m.RuntimeError(m.RuntimeError.NOT_INIT_ERR));e=null;return}u=s.shift();r=o.getConstructor(u);if(!r){n(s);return}e=new r(q);e.bind("Init",function(){e.initialized=true;setTimeout(function(){e.clients++;p.trigger("RuntimeInit",e)},1)});e.bind("Error",function(){e.destroy();n(s)});if(!e.mode){e.trigger("Error");return}e.init()}var p=this,t;if(l.typeOf(q)==="string"){t=q}else{if(l.typeOf(q.ruid)==="string"){t=q.ruid}}if(t){e=o.getRuntime(t);if(e){e.clients++;return e}else{throw new m.RuntimeError(m.RuntimeError.NOT_INIT_ERR)}}n((q.runtime_order||o.order).split(/\s*,\s*/))},getRuntime:function(){if(e&&e.uid){return e}e=null;return null},disconnectRuntime:function(){if(e&&--e.clients<=0){e.destroy();e=null}}})}});b("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(p,m,q){function l(n,r){function e(w,z,x){var y,v=o[this.uid];if(p.typeOf(v)!=="string"||!v.length){return null}y=new l(null,{type:x,size:z-w});y.detach(v.substr(w,y.size));return y}q.call(this);if(n){this.connectRuntime(n)}if(!r){r={}}else{if(p.typeOf(r)==="string"){r={data:r}}}p.extend(this,{uid:r.uid||p.guid("uid_"),ruid:n,size:r.size||0,type:r.type||"",slice:function(u,s,v){if(this.isDetached()){return e.apply(this,arguments)}return this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),u,s,v)},getSource:function(){if(!o[this.uid]){return null}return o[this.uid]},detach:function(s){if(this.ruid){this.getRuntime().exec.call(this,"Blob","destroy");this.disconnectRuntime();this.ruid=null}s=s||"";var t=s.match(/^data:([^;]*);base64,/);if(t){this.type=t[1];s=m.atob(s.substring(s.indexOf("base64,")+7))}this.size=s.length;o[this.uid]=s},isDetached:function(){return !this.ruid&&p.typeOf(o[this.uid])==="string"},destroy:function(){this.detach();delete o[this.uid]}});if(r.data){this.detach(r.data)}else{o[this.uid]=r}}var o={};return l});b("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(o,l,p){function m(t,n){var q,v;if(!n){n={}}if(n.type&&n.type!==""){v=n.type}else{v=l.getFileMime(n.name)}if(n.name){q=n.name.replace(/\\/g,"/");q=q.substr(q.lastIndexOf("/")+1)}else{var e=v.split("/")[0];q=o.guid((e!==""?e:"file")+"_");if(l.extensions[v]){q+="."+l.extensions[v][0]}}p.apply(this,arguments);o.extend(this,{type:v||"",name:q||o.guid("file_"),lastModifiedDate:n.lastModifiedDate||(new Date).toLocaleString()})}m.prototype=p.prototype;return m});b("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/file/File","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(y,B,q,m,w,C,p,A,z){function v(n){var e=this,s,o,r;if(y.inArray(y.typeOf(n),["string","node"])!==-1){n={browse_button:n}}o=q.get(n.browse_button);if(!o){throw new m.DOMException(m.DOMException.NOT_FOUND_ERR)}r={accept:[{title:C.translate("All Files"),extensions:"*"}],name:"file",multiple:false,required_caps:false,container:o.parentNode||document.body};n=y.extend({},r,n);if(typeof n.required_caps==="string"){n.required_caps=A.parseCaps(n.required_caps)}if(typeof n.accept==="string"){n.accept=B.mimes2extList(n.accept)}s=q.get(n.container);if(!s){s=document.body}if(q.getStyle(s,"position")==="static"){s.style.position="relative"}s=o=null;z.call(e);y.extend(e,{uid:y.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){e.convertEventPropsToHandlers(x);e.bind("RuntimeInit",function(l,u){e.ruid=u.uid;e.shimid=u.shimid;e.bind("Ready",function(){e.trigger("Refresh")},999);e.bind("Change",function(){var D=u.exec.call(e,"FileInput","getFiles");e.files=[];y.each(D,function(t){if(t.size===0){return true}e.files.push(new p(e.ruid,t))})},999);e.bind("Refresh",function(){var E,F,G,D;G=q.get(n.browse_button);D=q.get(u.shimid);if(G){E=q.getPos(G,q.get(n.container));F=q.getSize(G);if(D){y.extend(D.style,{top:E.y+"px",left:E.x+"px",width:F.w+"px",height:F.h+"px"})}}D=G=null});u.exec.call(e,"FileInput","init",n)});e.connectRuntime(y.extend({},n,{required_caps:{select_file:true}}))},disable:function(l){var u=this.getRuntime();if(u){u.exec.call(this,"FileInput","disable",y.typeOf(l)==="undefined"?true:l)}},refresh:function(){e.trigger("Refresh")},destroy:function(){var l=this.getRuntime();if(l){l.exec.call(this,"FileInput","destroy");this.disconnectRuntime()}if(y.typeOf(this.files)==="array"){y.each(this.files,function(t){t.destroy()})}this.files=null}})}var x=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];v.prototype=w.instance;return v});b("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(w,z,p,l,q,A,m,y){function v(s){var r=this,e;if(typeof s==="string"){s={drop_zone:s}}e={accept:[{title:w.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:true}};s=typeof s==="object"?l.extend({},e,s):e;s.container=z.get(s.drop_zone)||document.body;if(z.getStyle(s.container,"position")==="static"){s.container.style.position="relative"}if(typeof s.accept==="string"){s.accept=y.mimes2extList(s.accept)}A.call(r);l.extend(r,{uid:l.guid("uid_"),ruid:null,files:null,init:function(){r.convertEventPropsToHandlers(x);r.bind("RuntimeInit",function(o,n){r.ruid=n.uid;r.bind("Drop",function(){var t=n.exec.call(r,"FileDrop","getFiles");r.files=[];l.each(t,function(u){r.files.push(new q(r.ruid,u))})},999);n.exec.call(r,"FileDrop","init",s);r.dispatchEvent("ready")});r.connectRuntime(s)},destroy:function(){var n=this.getRuntime();if(n){n.exec.call(this,"FileDrop","destroy");this.disconnectRuntime()}this.files=null}})}var x=["ready","dragenter","dragleave","drop","error"];v.prototype=m.instance;return v});b("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(o,l,p){function m(){this.uid=o.guid("uid_");l.call(this);this.destroy=function(){this.disconnectRuntime();this.unbindAll()}}m.prototype=p.instance;return m});b("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/runtime/RuntimeTarget"],function(v,y,p,l,q,z,m){function w(){function o(A,t){function r(C){n.readyState=w.DONE;n.error=C;n.trigger("error");B()}function B(){e.destroy();e=null;n.trigger("loadend")}function s(C){e.bind("Error",function(E,D){r(D)});e.bind("Progress",function(D){n.result=C.exec.call(e,"FileReader","getResult");n.trigger(D)});e.bind("Load",function(D){n.readyState=w.DONE;n.result=C.exec.call(e,"FileReader","getResult");n.trigger(D);B()});C.exec.call(e,"FileReader","read",A,t)}e=new m;this.convertEventPropsToHandlers(x);if(this.readyState===w.LOADING){return r(new p.DOMException(p.DOMException.INVALID_STATE_ERR))}this.readyState=w.LOADING;this.trigger("loadstart");if(t instanceof q){if(t.isDetached()){var u=t.getSource();switch(A){case"readAsText":case"readAsBinaryString":this.result=u;break;case"readAsDataURL":this.result="data:"+t.type+";base64,"+y.btoa(u);break}this.readyState=w.DONE;this.trigger("load");B()}else{s(e.connectRuntime(t.ruid))}}else{r(new p.DOMException(p.DOMException.NOT_FOUND_ERR))}}var n=this,e;v.extend(this,{uid:v.guid("uid_"),readyState:w.EMPTY,result:null,error:null,readAsBinaryString:function(r){o.call(this,"readAsBinaryString",r)},readAsDataURL:function(r){o.call(this,"readAsDataURL",r)},readAsText:function(r){o.call(this,"readAsText",r)},abort:function(){this.result=null;if(v.inArray(this.readyState,[w.EMPTY,w.DONE])!==-1){return}else{if(this.readyState===w.LOADING){this.readyState=w.DONE}}if(e){e.getRuntime().exec.call(this,"FileReader","abort")}this.trigger("abort");this.trigger("loadend")},destroy:function(){this.abort();if(e){e.getRuntime().exec.call(this,"FileReader","destroy");e.disconnectRuntime()}n=e=null}})}var x=["loadstart","progress","load","abort","error","loadend"];w.EMPTY=0;w.LOADING=1;w.DONE=2;w.prototype=l.instance;return w});b("moxie/core/utils/Url",[],function(){var m=function(z,q){var e=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],v=e.length,A={http:80,https:443},p={},y=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,x=y.exec(z||"");while(v--){if(x[v]){p[e[v]]=x[v]}}if(!p.scheme){if(!q||typeof q==="string"){q=m(q||document.location.href)}p.scheme=q.scheme;p.host=q.host;p.port=q.port;var w="";if(/^[^\/]/.test(p.path)){w=q.path;if(!/(\/|\/[^\.]+)$/.test(w)){w=w.replace(/\/[^\/]+$/,"/")}else{w+="/"}}p.path=w+(p.path||"")}if(!p.port){p.port=A[p.scheme]||80}p.port=parseInt(p.port,10);if(!p.path){p.path="/"}delete p.source;return p};var l=function(e){var q={http:80,https:443},p=m(e);return p.scheme+"://"+p.host+(p.port!==q[p.scheme]?":"+p.port:"")+p.path+(p.query?p.query:"")};var o=function(e){function p(n){return[n.scheme,n.host,n.port].join("/")}if(typeof e==="string"){e=m(e)}return p(m())===p(e)};return{parseUrl:m,resolveUrl:l,hasSameOrigin:o}});b("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(m,l,o){return function(){function e(x,q){if(q.isDetached()){var w=q.getSource();switch(x){case"readAsBinaryString":return w;case"readAsDataURL":return"data:"+q.type+";base64,"+o.btoa(w);case"readAsText":var p="";for(var v=0,y=w.length;v<y;v++){p+=String.fromCharCode(w[v])}return p}}else{var n=this.connectRuntime(q.ruid).exec.call(this,"FileReaderSync","read",x,q);this.disconnectRuntime();return n}}l.call(this);m.extend(this,{uid:m.guid("uid_"),readAsBinaryString:function(n){return e.call(this,"readAsBinaryString",n)},readAsDataURL:function(n){return e.call(this,"readAsDataURL",n)},readAsText:function(n){return e.call(this,"readAsText",n)}})}});b("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(o,l,p){function m(){var q,n=[];l.extend(this,{append:function(r,t){var v=this,e=l.typeOf(t);if(t instanceof p){q={name:r,value:t}}else{if("array"===e){r+="[]";l.each(t,function(s){v.append(r,s)})}else{if("object"===e){l.each(t,function(u,s){v.append(r+"["+s+"]",u)})}else{if("null"===e||"undefined"===e||"number"===e&&isNaN(t)){v.append(r,"false")}else{n.push({name:r,value:t.toString()})}}}}},hasBlob:function(){return !!this.getBlob()},getBlob:function(){return q&&q.value||null},getBlobName:function(){return q&&q.name||null},each:function(e){l.each(n,function(r){e(r.value,r.name)});if(q){e(q.value,q.name)}},destroy:function(){q=null;n=[]}})}return m});b("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(J,x,C,z,F,y,B,w,M,I,E,L){function A(){this.uid=J.guid("uid_")}function H(){function U(n,m){if(!ak.hasOwnProperty(n)){return}if(arguments.length===1){return E.can("define_property")?ak[n]:af[n]}else{if(E.can("define_property")){ak[n]=m}else{af[n]=m}}}function ad(v){function N(){if(ac){ac.destroy();ac=null}O.dispatchEvent("loadend");O=null}function m(n){ac.bind("LoadStart",function(P){U("readyState",H.LOADING);O.dispatchEvent("readystatechange");O.dispatchEvent(P);if(ah){O.upload.dispatchEvent(P)}});ac.bind("Progress",function(P){if(U("readyState")!==H.LOADING){U("readyState",H.LOADING);O.dispatchEvent("readystatechange")}O.dispatchEvent(P)});ac.bind("UploadProgress",function(P){if(ah){O.upload.dispatchEvent({type:"progress",lengthComputable:false,total:P.total,loaded:P.loaded})}});ac.bind("Load",function(P){U("readyState",H.DONE);U("status",Number(n.exec.call(ac,"XMLHttpRequest","getStatus")||0));U("statusText",G[U("status")]||"");U("response",n.exec.call(ac,"XMLHttpRequest","getResponse",U("responseType")));if(!!~J.inArray(U("responseType"),["text",""])){U("responseText",U("response"))}else{if(U("responseType")==="document"){U("responseXML",U("response"))}}ai=n.exec.call(ac,"XMLHttpRequest","getAllResponseHeaders");O.dispatchEvent("readystatechange");if(U("status")>0){if(ah){O.upload.dispatchEvent(P)}O.dispatchEvent(P)}else{ae=true;O.dispatchEvent("error")}N()});ac.bind("Abort",function(P){O.dispatchEvent(P);N()});ac.bind("Error",function(P){ae=true;U("readyState",H.DONE);O.dispatchEvent("readystatechange");u=true;O.dispatchEvent(P);N()});n.exec.call(ac,"XMLHttpRequest","send",{url:ag,method:Q,async:X,user:W,password:Z,headers:aj,mimeType:e,encoding:l,responseType:O.responseType,withCredentials:O.withCredentials,options:V},v)}var O=this;t=(new Date).getTime();ac=new B;if(typeof V.required_caps==="string"){V.required_caps=y.parseCaps(V.required_caps)}V.required_caps=J.extend({},V.required_caps,{return_response_type:O.responseType});if(v instanceof I){V.required_caps.send_multipart=true}if(!r){V.required_caps.do_cors=true}if(V.ruid){m(ac.connectRuntime(V))}else{ac.bind("RuntimeInit",function(P,n){m(n)});ac.bind("RuntimeError",function(P,n){O.dispatchEvent("RuntimeError",n)});ac.connectRuntime(V)}}function o(){U("responseText","");U("responseXML",null);U("response",null);U("status",0);U("statusText","");t=al=null}var af=this,ak={timeout:0,readyState:H.UNSENT,withCredentials:false,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},X=true,ag,Q,aj={},W,Z,l=null,e=null,s=false,ab=false,ah=false,u=false,ae=false,r=false,t,al,aa=null,p=null,V={},ac,ai="",Y;J.extend(this,ak,{uid:J.guid("uid_"),upload:new A,open:function(R,N,P,v,m){var O;if(!R||!N){throw new x.DOMException(x.DOMException.SYNTAX_ERR)}if(/[\u0100-\uffff]/.test(R)||z.utf8_encode(R)!==R){throw new x.DOMException(x.DOMException.SYNTAX_ERR)}if(!!~J.inArray(R.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])){Q=R.toUpperCase()}if(!!~J.inArray(Q,["CONNECT","TRACE","TRACK"])){throw new x.DOMException(x.DOMException.SECURITY_ERR)}N=z.utf8_encode(N);O=F.parseUrl(N);r=F.hasSameOrigin(O);ag=F.resolveUrl(N);if((v||m)&&!r){throw new x.DOMException(x.DOMException.INVALID_ACCESS_ERR)}W=v||O.user;Z=m||O.pass;X=P||true;if(X===false&&(U("timeout")||U("withCredentials")||U("responseType")!=="")){throw new x.DOMException(x.DOMException.INVALID_ACCESS_ERR)}s=!X;ab=false;aj={};o.call(this);U("readyState",H.OPENED);this.convertEventPropsToHandlers(["readystatechange"]);this.dispatchEvent("readystatechange")},setRequestHeader:function(N,m){var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(U("readyState")!==H.OPENED||ab){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR)}if(/[\u0100-\uffff]/.test(N)||z.utf8_encode(N)!==N){throw new x.DOMException(x.DOMException.SYNTAX_ERR)}N=J.trim(N).toLowerCase();if(!!~J.inArray(N,v)||/^(proxy\-|sec\-)/.test(N)){return false}if(!aj[N]){aj[N]=m}else{aj[N]+=", "+m}return true},getAllResponseHeaders:function(){return ai||""},getResponseHeader:function(m){m=m.toLowerCase();if(ae||!!~J.inArray(m,["set-cookie","set-cookie2"])){return null}if(ai&&ai!==""){if(!Y){Y={};J.each(ai.split(/\r\n/),function(v){var N=v.split(/:\s+/);if(N.length===2){N[0]=J.trim(N[0]);Y[N[0].toLowerCase()]={header:N[0],value:J.trim(N[1])}}})}if(Y.hasOwnProperty(m)){return Y[m].header+": "+Y[m].value}}return null},overrideMimeType:function(N){var v,m;if(!!~J.inArray(U("readyState"),[H.LOADING,H.DONE])){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR)}N=J.trim(N.toLowerCase());if(/;/.test(N)&&(v=N.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))){N=v[1];if(v[2]){m=v[2]}}if(!L.mimes[N]){throw new x.DOMException(x.DOMException.SYNTAX_ERR)}aa=N;p=m},send:function(N,m){if(J.typeOf(m)==="string"){V={ruid:m}}else{if(!m){V={}}else{V=m}}this.convertEventPropsToHandlers(K);this.upload.convertEventPropsToHandlers(K);if(this.readyState!==H.OPENED||ab){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR)}if(N instanceof w){V.ruid=N.ruid;e=N.type||"application/octet-stream"}else{if(N instanceof I){if(N.hasBlob()){var v=N.getBlob();V.ruid=v.ruid;e=v.type||"application/octet-stream"}}else{if(typeof N==="string"){l="UTF-8";e="text/plain;charset=UTF-8";N=z.utf8_encode(N)}}}if(!this.withCredentials){this.withCredentials=V.required_caps&&V.required_caps.send_browser_cookies&&!r}ah=!s&&this.upload.hasEventListener();ae=false;u=!N;if(!s){ab=true}ad.call(this,N)},abort:function(){ae=true;s=false;if(!~J.inArray(U("readyState"),[H.UNSENT,H.OPENED,H.DONE])){U("readyState",H.DONE);ab=false;if(ac){ac.getRuntime().exec.call(ac,"XMLHttpRequest","abort",u)}else{throw new x.DOMException(x.DOMException.INVALID_STATE_ERR)}u=true}else{U("readyState",H.UNSENT)}},destroy:function(){if(ac){if(J.typeOf(ac.destroy)==="function"){ac.destroy()}ac=null}this.unbindAll();if(this.upload){this.upload.unbindAll();this.upload=null}}})}var G={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};A.prototype=C.instance;var K=["loadstart","progress","abort","error","load","timeout","loadend"];var q=1,D=2;H.UNSENT=0;H.OPENED=1;H.HEADERS_RECEIVED=2;H.LOADING=3;H.DONE=4;H.prototype=C.instance;return H});b("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(p,m,q,o){function l(){function t(){z=y=0;n=this.result=null}function x(s,B){var u=this;A=B;u.bind("TransportingProgress",function(r){y=r.loaded;if(y<z&&p.inArray(u.state,[l.IDLE,l.DONE])===-1){v.call(u)}},999);u.bind("TransportingComplete",function(){y=z;u.state=l.DONE;n=null;u.result=A.exec.call(u,"Transporter","getAsBlob",s||"")},999);u.state=l.BUSY;u.trigger("TransportingStarted");v.call(u)}function v(){var u=this,B,s=z-y;if(w>s){w=s}B=m.btoa(n.substr(y,w));A.exec.call(u,"Transporter","receive",B,z)}var e,A,n,z,y,w;q.call(this);p.extend(this,{uid:p.guid("uid_"),state:l.IDLE,result:null,transport:function(B,D,u){var C=this;u=p.extend({chunk_size:204798},u);if(e=u.chunk_size%3){u.chunk_size+=3-e}w=u.chunk_size;t.call(this);n=B;z=B.length;if(p.typeOf(u)==="string"||u.ruid){x.call(C,D,this.connectRuntime(u))}else{var r=function(E,s){C.unbind("RuntimeInit",r);x.call(C,D,s)};this.bind("RuntimeInit",r);this.connectRuntime(u)}},abort:function(){var r=this;r.state=l.IDLE;if(A){A.exec.call(r,"Transporter","clear");r.trigger("TransportingAborted")}t.call(r)},destroy:function(){this.unbindAll();A=null;this.disconnectRuntime();t.call(this)}})}l.IDLE=0;l.BUSY=1;l.DONE=2;l.prototype=o.instance;return l});b("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(B,G,w,m,y,H,v,F,E,A,x,D,z){function C(){function o(r){if(!r){r=this.getRuntime().exec.call(this,"Image","getInfo")}this.size=r.size;this.width=r.width;this.height=r.height;this.type=r.type;this.meta=r.meta;if(this.name===""){this.name=r.name}}function p(u){var I=B.typeOf(u);try{if(u instanceof C){if(!u.size){throw new w.DOMException(w.DOMException.INVALID_STATE_ERR)}l.apply(this,arguments)}else{if(u instanceof x){if(!~B.inArray(u.type,["image/jpeg","image/png"])){throw new w.ImageError(w.ImageError.WRONG_FORMAT)}e.apply(this,arguments)}else{if(B.inArray(I,["blob","file"])!==-1){p.call(this,new D(null,u),arguments[1])}else{if(I==="string"){if(/^data:[^;]*;base64,/.test(u)){p.call(this,new x(null,{data:u}),arguments[1])}else{n.apply(this,arguments)}}else{if(I==="node"&&u.nodeName.toLowerCase()==="img"){p.call(this,u.src,arguments[1])}else{throw new w.DOMException(w.DOMException.TYPE_MISMATCH_ERR)}}}}}}catch(s){this.trigger("error",s.code)}}function l(s,I){var u=this.connectRuntime(s.ruid);this.ruid=u.uid;u.exec.call(this,"Image","loadFromImage",s,B.typeOf(I)==="undefined"?true:I)}function e(u,J){function s(r){I.ruid=r.uid;r.exec.call(I,"Image","loadFromBlob",u)}var I=this;I.name=u.name||"";if(u.isDetached()){this.bind("RuntimeInit",function(K,r){s(r)});if(J&&typeof J.required_caps==="string"){J.required_caps=H.parseCaps(J.required_caps)}this.connectRuntime(B.extend({required_caps:{access_image_binary:true,resize_image:true}},J))}else{s(this.connectRuntime(u.ruid))}}function n(I,s){var J=this,u;u=new y;u.open("get",I);u.responseType="blob";u.onprogress=function(r){J.trigger(r)};u.onload=function(){e.call(J,u.response,true)};u.onerror=function(r){J.trigger(r)};u.onloadend=function(){u.destroy()};u.bind("RuntimeError",function(K,r){J.trigger("RuntimeError",r)});u.send(null,s)}v.call(this);B.extend(this,{uid:B.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){o.call(this)},999);this.convertEventPropsToHandlers(q);p.apply(this,arguments)},downsize:function(u){var I={width:this.width,height:this.height,crop:false,preserveHeaders:true};if(typeof u==="object"){u=B.extend(I,u)}else{u=B.extend(I,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]})}try{if(!this.size){throw new w.DOMException(w.DOMException.INVALID_STATE_ERR)}if(this.width>C.MAX_RESIZE_WIDTH||this.height>C.MAX_RESIZE_HEIGHT){throw new w.ImageError(w.ImageError.MAX_RESOLUTION_ERR)}this.getRuntime().exec.call(this,"Image","downsize",u.width,u.height,u.crop,u.preserveHeaders)}catch(s){this.trigger("error",s.code)}},crop:function(s,r,u){this.downsize(s,r,true,u)},getAsCanvas:function(){if(!E.can("create_canvas")){throw new w.RuntimeError(w.RuntimeError.NOT_SUPPORTED_ERR)}var r=this.connectRuntime(this.ruid);return r.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(s,r){if(!this.size){throw new w.DOMException(w.DOMException.INVALID_STATE_ERR)}if(!s){s="image/jpeg"}if(s==="image/jpeg"&&!r){r=90}return this.getRuntime().exec.call(this,"Image","getAsBlob",s,r)},getAsDataURL:function(s,r){if(!this.size){throw new w.DOMException(w.DOMException.INVALID_STATE_ERR)}return this.getRuntime().exec.call(this,"Image","getAsDataURL",s,r)},getAsBinaryString:function(s,r){var u=this.getAsDataURL(s,r);return z.atob(u.substring(u.indexOf("base64,")+7))},embed:function(t){function M(){if(E.can("create_canvas")){var s=S.getAsCanvas();if(s){t.appendChild(s);s=null;S.destroy();L.trigger("embedded");return}}var r=S.getAsDataURL(I,N);if(!r){throw new w.ImageError(w.ImageError.WRONG_FORMAT)}if(E.can("use_data_uri_of",r.length)){t.innerHTML='<img src="'+r+'" width="'+S.width+'" height="'+S.height+'" />';S.destroy();L.trigger("embedded")}else{var T=new F;T.bind("TransportingComplete",function(){J=L.connectRuntime(this.result.ruid);L.bind("Embedded",function(){B.extend(J.getShimContainer().style,{top:"0px",left:"0px",width:S.width+"px",height:S.height+"px"});J=null},999);J.exec.call(L,"ImageView","display",this.result.uid,u,R);S.destroy()});T.transport(z.atob(r.substring(r.indexOf("base64,")+7)),I,B.extend({},O,{required_caps:{display_media:true},runtime_order:"flash,silverlight",container:t}))}}var L=this,S,I,N,K,O=arguments[1]||{},u=this.width,R=this.height,J;try{if(!(t=G.get(t))){throw new w.DOMException(w.DOMException.INVALID_NODE_TYPE_ERR)}if(!this.size){throw new w.DOMException(w.DOMException.INVALID_STATE_ERR)}if(this.width>C.MAX_RESIZE_WIDTH||this.height>C.MAX_RESIZE_HEIGHT){throw new w.ImageError(w.ImageError.MAX_RESOLUTION_ERR)}I=O.type||this.type||"image/jpeg";N=O.quality||90;K=B.typeOf(O.crop)!=="undefined"?O.crop:false;if(O.width){u=O.width;R=O.height||u}else{var Q=G.getSize(t);if(Q.w&&Q.h){u=Q.w;R=Q.h}}S=new C;S.bind("Resize",function(){M.call(L)});S.bind("Load",function(){S.downsize(u,R,K,false)});S.clone(this,false);return S}catch(P){this.trigger("error",P.code)}},destroy:function(){if(this.ruid){this.getRuntime().exec.call(this,"Image","destroy");this.disconnectRuntime()}this.unbindAll()}})}var q=["progress","load","error","resize","embedded"];C.MAX_RESIZE_WIDTH=6500;C.MAX_RESIZE_HEIGHT=6500;C.prototype=A.instance;return C});b("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(u,m,w,q){function v(r){var x=this,n=w.capTest,e=w.capTrue;var s=u.extend({access_binary:n(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return x.can("access_binary")&&!!p.Image},display_media:n(q.can("create_canvas")||q.can("use_data_uri_over32kb")),do_cors:n(window.XMLHttpRequest&&"withCredentials" in new XMLHttpRequest),drag_and_drop:n(function(){var o=document.createElement("div");return("draggable" in o||"ondragstart" in o&&"ondrop" in o)&&(q.browser!=="IE"||q.version>9)}()),filter_by_extension:n(function(){return q.browser==="Chrome"&&q.version>=28||q.browser==="IE"&&q.version>=10}()),return_response_headers:e,return_response_type:function(o){if(o==="json"&&!!window.JSON){return true}return q.can("return_response_type",o)},return_status_code:e,report_upload_progress:n(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return x.can("access_binary")&&q.can("create_canvas")},select_file:function(){return q.can("use_fileinput")&&window.File},select_folder:function(){return x.can("select_file")&&q.browser==="Chrome"&&q.version>=21},select_multiple:function(){return x.can("select_file")&&!(q.browser==="Safari"&&q.os==="Windows")&&!(q.os==="iOS"&&q.verComp(q.osVersion,"7.0.4","<"))},send_binary_string:n(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:n(window.XMLHttpRequest),send_multipart:function(){return !!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||x.can("send_binary_string")},slice_blob:n(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return x.can("slice_blob")&&x.can("send_multipart")},summon_file_dialog:n(function(){return q.browser==="Firefox"&&q.version>=4||q.browser==="Opera"&&q.version>=12||q.browser==="IE"&&q.version>=10||!!~u.inArray(q.browser,["Chrome","Safari"])}()),upload_filesize:e},arguments[2]);w.call(this,r,arguments[1]||l,s);u.extend(this,{init:function(){this.trigger("Init")},destroy:function(o){return function(){o.call(x);o=x=null}}(this.destroy)});u.extend(this.getShim(),p)}var l="html5",p={};w.addConstructor(l,v);return p});b("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(m,l){function o(){function n(u,q,v){var s;if(window.File.prototype.slice){try{u.slice();return u.slice(q,v)}catch(p){return u.slice(q,v-q)}}else{if(s=window.File.prototype.webkitSlice||window.File.prototype.mozSlice){return s.call(u,q,v)}else{return null}}}this.slice=function(){return new l(this.getRuntime().uid,n.apply(this,arguments))}}return m.Blob=o});b("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(w){function v(){this.returnValue=false}function p(){this.cancelBubble=true}var m={},y="moxie_"+w.guid();var q=function(t,A,r,n){var z,e;A=A.toLowerCase();if(t.addEventListener){z=r;t.addEventListener(A,z,false)}else{if(t.attachEvent){z=function(){var o=window.event;if(!o.target){o.target=o.srcElement}o.preventDefault=v;o.stopPropagation=p;r(o)};t.attachEvent("on"+A,z)}}if(!t[y]){t[y]=w.guid()}if(!m.hasOwnProperty(t[y])){m[t[y]]={}}e=m[t[y]];if(!e.hasOwnProperty(A)){e[A]=[]}e[A].push({func:z,orig:r,key:n})};var x=function(A,t,z){var C,n;t=t.toLowerCase();if(A[y]&&m[A[y]]&&m[A[y]][t]){C=m[A[y]][t]}else{return}for(var e=C.length-1;e>=0;e--){if(C[e].orig===z||C[e].key===z){if(A.removeEventListener){A.removeEventListener(t,C[e].func,false)}else{if(A.detachEvent){A.detachEvent("on"+t,C[e].func)}}C[e].orig=null;C[e].func=null;C.splice(e,1);if(z!==n){break}}}if(!C.length){delete m[A[y]][t]}if(w.isEmptyObj(m[A[y]])){delete m[A[y]];try{delete A[y]}catch(B){A[y]=n}}};var l=function(n,e){if(!n||!n[y]){return}w.each(m[n[y]],function(r,o){x(n,o,e)})};return{addEvent:q,removeEvent:x,removeAllEvents:l}});b("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(u,m,w,q,l,p){function v(){var n=[],r;m.extend(this,{init:function(C){var A=this,x=A.getRuntime(),s,z,t,e,y,B;r=C;n=[];t=r.accept.mimes||l.extList2mimes(r.accept,x.can("filter_by_extension"));z=x.getShimContainer();z.innerHTML='<input id="'+x.uid+'" type="file" style="font-size:999px;opacity:0;"'+(r.multiple&&x.can("select_multiple")?"multiple":"")+(r.directory&&x.can("select_folder")?"webkitdirectory directory":"")+(t?' accept="'+t.join(",")+'"':"")+" />";s=w.get(x.uid);m.extend(s.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"});e=w.get(r.browse_button);if(x.can("summon_file_dialog")){if(w.getStyle(e,"position")==="static"){e.style.position="relative"}y=parseInt(w.getStyle(e,"z-index"),10)||1;e.style.zIndex=y;z.style.zIndex=y-1;q.addEvent(e,"click",function(E){var D=w.get(x.uid);if(D&&!D.disabled){D.click()}E.preventDefault()},A.uid)}B=x.can("summon_file_dialog")?e:z;q.addEvent(B,"mouseover",function(){A.trigger("mouseenter")},A.uid);q.addEvent(B,"mouseout",function(){A.trigger("mouseleave")},A.uid);q.addEvent(B,"mousedown",function(){A.trigger("mousedown")},A.uid);q.addEvent(w.get(r.container),"mouseup",function(){A.trigger("mouseup")},A.uid);s.onchange=function o(){n=[];if(r.directory){m.each(this.files,function(E){if(E.name!=="."){n.push(E)}})}else{n=[].slice.call(this.files)}if(p.browser!=="IE"&&p.browser!=="IEMobile"){this.value=""}else{var D=this.cloneNode(true);this.parentNode.replaceChild(D,this);D.onchange=o}A.trigger("change")};A.trigger({type:"ready",async:true});z=null},getFiles:function(){return n},disable:function(x){var o=this.getRuntime(),s;if(s=w.get(o.uid)){s.disabled=!!x}},destroy:function(){var o=this.getRuntime(),e=o.getShim(),x=o.getShimContainer();q.removeAllEvents(x,this.uid);q.removeAllEvents(r&&w.get(r.container),this.uid);q.removeAllEvents(r&&w.get(r.browse_button),this.uid);if(x){x.innerHTML=""}e.removeInstance(this.uid);n=r=x=e=null}})}return u.FileInput=v});b("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(q,m,u,p,l){function o(){function A(s){if(!s.dataTransfer||!s.dataTransfer.types){return false}var C=m.toArray(s.dataTransfer.types||[]);return m.inArray("Files",C)!==-1||m.inArray("public.file-url",C)!==-1||m.inArray("application/x-moz-file",C)!==-1}function z(C){var D=[];for(var s=0;s<C.length;s++){[].push.apply(D,C[s].extensions.split(/\s*,\s*/))}return m.inArray("*",D)===-1?D:[]}function w(s){if(!B.length){return true}var C=l.getFileExtension(s.name);return !C||m.inArray(C,B)!==-1}function t(C,s){var e=[];m.each(C,function(D){var F=D.webkitGetAsEntry();if(F){if(F.isFile){var E=D.getAsFile();if(w(E)){x.push(E)}}else{e.push(F)}}});if(e.length){y(e,s)}else{s()}}function y(C,D){var s=[];m.each(C,function(E){s.push(function(e){v(E,e)})});m.inSeries(s,function(){D()})}function v(e,s){if(e.isFile){e.file(function(C){if(w(C)){x.push(C)}s()},function(){s()})}else{if(e.isDirectory){n(e,s)}else{s()}}}function n(E,C){function s(G){D.readEntries(function(e){if(e.length){[].push.apply(F,e);s(G)}else{G()}},G)}var F=[],D=E.createReader();s(function(){y(F,C)})}var x=[],B=[],r;m.extend(this,{init:function(C){var e=this,s;r=C;B=z(r.accept);s=r.container;p.addEvent(s,"dragover",function(D){if(!A(D)){return}D.preventDefault();D.dataTransfer.dropEffect="copy"},e.uid);p.addEvent(s,"drop",function(D){if(!A(D)){return}D.preventDefault();x=[];if(D.dataTransfer.items&&D.dataTransfer.items[0].webkitGetAsEntry){t(D.dataTransfer.items,function(){e.trigger("drop")})}else{m.each(D.dataTransfer.files,function(E){if(w(E)){x.push(E)}});e.trigger("drop")}},e.uid);p.addEvent(s,"dragenter",function(D){e.trigger("dragenter")},e.uid);p.addEvent(s,"dragleave",function(D){e.trigger("dragleave")},e.uid)},getFiles:function(){return x},destroy:function(){p.removeAllEvents(r&&u.get(r.container),this.uid);x=B=r=null}})}return q.FileDrop=o});b("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(o,l,p){function m(){function n(r){return l.atob(r.substring(r.indexOf("base64,")+7))}var s,q=false;p.extend(this,{read:function(r,e){var u=this;s=new window.FileReader;s.addEventListener("progress",function(t){u.trigger(t)});s.addEventListener("load",function(t){u.trigger(t)});s.addEventListener("error",function(v){u.trigger(v,s.error)});s.addEventListener("loadend",function(){s=null});if(p.typeOf(s[r])==="function"){q=false;s[r](e.getSource())}else{if(r==="readAsBinaryString"){q=true;s.readAsDataURL(e.getSource())}}},getResult:function(){return s&&s.result?q?n(s.result):s.result:null},abort:function(){if(s){s.abort()}},destroy:function(){s=null}})}return o.FileReader=m});b("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(w,z,p,l,q,A,m,y,x){function v(){function B(C,F){var D=this,e,E;e=F.getBlob().getSource();E=new window.FileReader;E.onload=function(){F.append(F.getBlobName(),new A(null,{type:e.type,data:E.result}));s.send.call(D,C,F)};E.readAsBinaryString(e)}function o(){if(window.XMLHttpRequest&&!(x.browser==="IE"&&x.version<8)){return new window.XMLHttpRequest}else{return function(){var D=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"];for(var C=0;C<D.length;C++){try{return new ActiveXObject(D[C])}catch(E){}}}()}}function t(D){var C=D.responseXML;var E=D.responseText;if(x.browser==="IE"&&E&&C&&!C.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(D.getResponseHeader("Content-Type"))){C=new window.ActiveXObject("Microsoft.XMLDOM");C.async=false;C.validateOnParse=false;C.loadXML(E)}if(C){if(x.browser==="IE"&&C.parseError!==0||!C.documentElement||C.documentElement.tagName==="parsererror"){return null}}return C}function u(F){var D="----moxieboundary"+(new Date).getTime(),H="--",E="\r\n",C="",G=this.getRuntime();if(!G.can("send_binary_string")){throw new y.RuntimeError(y.RuntimeError.NOT_SUPPORTED_ERR)}r.setRequestHeader("Content-Type","multipart/form-data; boundary="+D);F.each(function(I,J){if(I instanceof A){C+=H+D+E+'Content-Disposition: form-data; name="'+J+'"; filename="'+unescape(encodeURIComponent(I.name||"blob"))+'"'+E+"Content-Type: "+(I.type||"application/octet-stream")+E+E+I.getSource()+E}else{C+=H+D+E+'Content-Disposition: form-data; name="'+J+'"'+E+E+unescape(encodeURIComponent(I))+E}});C+=H+D+H+E;return C}var s=this,r,n;z.extend(this,{send:function(H,I){var F=this,E=x.browser==="Mozilla"&&x.version>=4&&x.version<7,G=x.browser==="Android Browser",D=false;n=H.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase();r=o();r.open(H.method,H.url,H.async,H.user,H.password);if(I instanceof A){if(I.isDetached()){D=true}I=I.getSource()}else{if(I instanceof m){if(I.hasBlob()){if(I.getBlob().isDetached()){I=u.call(F,I);D=true}else{if((E||G)&&z.typeOf(I.getBlob().getSource())==="blob"&&window.FileReader){B.call(F,H,I);return}}}if(I instanceof m){var C=new window.FormData;I.each(function(K,J){if(K instanceof A){C.append(J,K.getSource())}else{C.append(J,K)}});I=C}}}if(r.upload){if(H.withCredentials){r.withCredentials=true}r.addEventListener("load",function(J){F.trigger(J)});r.addEventListener("error",function(J){F.trigger(J)});r.addEventListener("progress",function(J){F.trigger(J)});r.upload.addEventListener("progress",function(J){F.trigger({type:"UploadProgress",loaded:J.loaded,total:J.total})})}else{r.onreadystatechange=function(){switch(r.readyState){case 1:break;case 2:break;case 3:var K,e;try{if(l.hasSameOrigin(H.url)){K=r.getResponseHeader("Content-Length")||0}if(r.responseText){e=r.responseText.length}}catch(J){K=e=0}F.trigger({type:"progress",lengthComputable:!!K,total:parseInt(K,10),loaded:e});break;case 4:r.onreadystatechange=function(){};if(r.status===0){F.trigger("error")}else{F.trigger("load")}break}}}if(!z.isEmptyObj(H.headers)){z.each(H.headers,function(K,J){r.setRequestHeader(J,K)})}if(""!==H.responseType&&"responseType" in r){if("json"===H.responseType&&!x.can("return_response_type","json")){r.responseType="text"}else{r.responseType=H.responseType}}if(!D){r.send(I)}else{if(r.sendAsBinary){r.sendAsBinary(I)}else{(function(){var K=new Uint8Array(I.length);for(var J=0;J<I.length;J++){K[J]=I.charCodeAt(J)&255}r.send(K.buffer)})()}}F.trigger("loadstart")},getStatus:function(){try{if(r){return r.status}}catch(C){}return 0},getResponse:function(G){var D=this.getRuntime();try{switch(G){case"blob":var F=new q(D.uid,r.response);var E=r.getResponseHeader("Content-Disposition");if(E){var H=E.match(/filename=([\'\"'])([^\1]+)\1/);if(H){n=H[2]}}F.name=n;if(!F.type){F.type=p.getFileMime(n)}return F;case"json":if(!x.can("return_response_type","json")){return r.status===200&&!!window.JSON?JSON.parse(r.responseText):null}return r.response;case"document":return t(r);default:return r.responseText!==""?r.responseText:null}}catch(C){return null}},getAllResponseHeaders:function(){try{return r.getAllResponseHeaders()}catch(C){}return""},abort:function(){if(r){r.abort()}},destroy:function(){s=n=null}})}return w.XMLHttpRequest=v});b("moxie/runtime/html5/utils/BinaryReader",[],function(){return function(){function o(n,v){var e=p?0:-8*(v-1),u=0,w;for(w=0;w<v;w++){u|=q.charCodeAt(n+w)<<Math.abs(e+w*8)}return u}function l(u,n,s){s=arguments.length===3?s:q.length-n-1;q=q.substr(0,n)+u+q.substr(s+n)}function m(v,z,x){var w="",y=p?0:-8*(x-1),e;for(e=0;e<x;e++){w+=String.fromCharCode(z>>Math.abs(y+e*8)&255)}l(w,v,x)}var p=false,q;return{II:function(e){if(e===c){return p}else{p=e}},init:function(e){p=false;q=e},SEGMENT:function(u,n,s){switch(arguments.length){case 1:return q.substr(u,q.length-u-1);case 2:return q.substr(u,n);case 3:l(s,u,n);break;default:return q}},BYTE:function(n){return o(n,1)},SHORT:function(n){return o(n,2)},LONG:function(r,s){if(s===c){return o(r,4)}else{m(r,s,4)}},SLONG:function(r){var n=o(r,4);return n>2147483647?n-4294967296:n},STRING:function(s,r){var u="";for(r+=s;s<r;s++){u+=String.fromCharCode(o(s,1))}return u}}}});b("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader"],function(m){return function l(w){var t=[],p,q,v,e=0;p=new m;p.init(w);if(p.SHORT(0)!==65496){return}q=2;while(q<=w.length){v=p.SHORT(q);if(v>=65488&&v<=65495){q+=2;continue}if(v===65498||v===65497){break}e=p.SHORT(q+2)+2;if(v>=65505&&v<=65519){t.push({hex:v,name:"APP"+(v&15),start:q,length:e,segment:p.SEGMENT(q,e)})}q+=e}p.init(null);return{headers:t,restore:function(r){var o,s;p.init(r);q=p.SHORT(2)==65504?4+p.SHORT(4):2;for(s=0,o=t.length;s<o;s++){if(t[s].name=="APP2"&&t[s].segment.indexOf("ProPhoto RGB")>0){continue}else{p.SEGMENT(q,0,t[s].segment);q+=t[s].length}}r=p.SEGMENT();p.init(null);return r},strip:function(x){var y,u,o;u=new l(x);y=u.headers;u.purge();p.init(x);o=y.length;while(o--){p.SEGMENT(y[o].start,y[o].length,"")}x=p.SEGMENT();p.init(null);return x},get:function(s){var r=[];for(var u=0,o=t.length;u<o;u++){if(t[u].name===s.toUpperCase()){r.push(t[u].segment)}}return r},set:function(y,u){var A=[],r,x,z;if(typeof u==="string"){A.push(u)}else{A=u}for(r=x=0,z=t.length;r<z;r++){if(t[r].name===y.toUpperCase()){t[r].segment=A[x];t[r].length=A[x].length;x++}if(x>=A.length){break}}},purge:function(){t=[];p.init(null);p=null}}}});b("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(l,m){return function(){function t(E,z){var u=q.SHORT(E),I,y,D,B,G,C,x,F,H=[],A={};for(I=0;I<u;I++){x=C=E+12*I+2;D=z[q.SHORT(x)];if(D===c){continue}B=q.SHORT(x+=2);G=q.LONG(x+=2);x+=4;H=[];switch(B){case 1:case 7:if(G>4){x=q.LONG(x)+p.tiffHeader}for(y=0;y<G;y++){H[y]=q.BYTE(x+y)}break;case 2:if(G>4){x=q.LONG(x)+p.tiffHeader}A[D]=q.STRING(x,G-1);continue;case 3:if(G>2){x=q.LONG(x)+p.tiffHeader}for(y=0;y<G;y++){H[y]=q.SHORT(x+y*2)}break;case 4:if(G>1){x=q.LONG(x)+p.tiffHeader}for(y=0;y<G;y++){H[y]=q.LONG(x+y*4)}break;case 5:x=q.LONG(x)+p.tiffHeader;for(y=0;y<G;y++){H[y]=q.LONG(x+y*4)/q.LONG(x+y*4+4)}break;case 9:x=q.LONG(x)+p.tiffHeader;for(y=0;y<G;y++){H[y]=q.SLONG(x+y*4)}break;case 10:x=q.LONG(x)+p.tiffHeader;for(y=0;y<G;y++){H[y]=q.SLONG(x+y*4)/q.SLONG(x+y*4+4)}break;default:continue}F=G==1?H[0]:H;if(e.hasOwnProperty(D)&&typeof F!="object"){A[D]=e[D][F]}else{A[D]=F}}return A}function n(){var o=p.tiffHeader;q.II(q.SHORT(o)==18761);if(q.SHORT(o+=2)!==42){return false}p.IFD0=p.tiffHeader+q.LONG(o+=2);v=t(p.IFD0,r.tiff);if("ExifIFDPointer" in v){p.exifIFD=p.tiffHeader+v.ExifIFDPointer;delete v.ExifIFDPointer}if("GPSInfoIFDPointer" in v){p.gpsIFD=p.tiffHeader+v.GPSInfoIFDPointer;delete v.GPSInfoIFDPointer}return true}function w(B,E,x){var s,u,D,A=0;if(typeof E==="string"){var y=r[B.toLowerCase()];for(var C in y){if(y[C]===E){E=C;break}}}s=p[B.toLowerCase()+"IFD"];u=q.SHORT(s);for(var z=0;z<u;z++){D=s+12*z+2;if(q.SHORT(D)==E){A=D+8;break}}if(!A){return false}q.LONG(A,x);return true}var q,r,v,p={},e;q=new m;r={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};e={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(o){p={tiffHeader:10};if(o===c||!o.length){return false}q.init(o);if(q.SHORT(0)===65505&&q.STRING(4,5).toUpperCase()==="EXIF\0"){return n()}return false},TIFF:function(){return v},EXIF:function(){var o;o=t(p.exifIFD,r.exif);if(o.ExifVersion&&l.typeOf(o.ExifVersion)==="array"){for(var u=0,s="";u<o.ExifVersion.length;u++){s+=String.fromCharCode(o.ExifVersion[u])}o.ExifVersion=s}return o},GPS:function(){var o;o=t(p.gpsIFD,r.gps);if(o.GPSVersionID&&l.typeOf(o.GPSVersionID)==="array"){o.GPSVersionID=o.GPSVersionID.join(".")}return o},setExif:function(s,o){if(s!=="PixelXDimension"&&s!=="PixelYDimension"){return false}return w("exif",s,o)},getBinary:function(){return q.SEGMENT()},purge:function(){q.init(null);q=v=null;p={}}}}});b("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(q,m,u,p,l){function o(z){function t(){var A=0,s,B;while(A<=n.length){s=y.SHORT(A+=2);if(s>=65472&&s<=65475){A+=5;return{height:y.SHORT(A),width:y.SHORT(A+=2)}}B=y.SHORT(A+=2);A+=B-2}return null}function e(){if(!v||!x||!y){return}v.purge();x.purge();y.init(null);n=r=x=v=y=null}var n,y,x,v,r,w;n=z;y=new p;y.init(n);if(y.SHORT(0)!==65496){throw new m.ImageError(m.ImageError.WRONG_FORMAT)}x=new u(z);v=new l;w=!!v.init(x.get("app1")[0]);r=t.call(this);q.extend(this,{type:"image/jpeg",size:n.length,width:r&&r.width||0,height:r&&r.height||0,setExif:function(s,A){if(!w){return false}if(q.typeOf(s)==="object"){q.each(s,function(C,B){v.setExif(B,C)})}else{v.setExif(s,A)}x.set("app1",v.getBinary())},writeHeaders:function(){if(!arguments.length){return n=x.restore(n)}return x.restore(arguments[0])},stripHeaders:function(s){return x.strip(s)},purge:function(){e.call(this)}});if(w){this.meta={tiff:v.TIFF(),exif:v.EXIF(),gps:v.GPS()}}}return o});b("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(o,l,p){function m(e){function v(){var s,r;s=w.call(this,8);if(s.type=="IHDR"){r=s.start;return{width:z.LONG(r),height:z.LONG(r+=4)}}return null}function q(){if(!z){return}z.init(null);t=x=n=y=z=null}function w(B){var u,C,A,s;u=z.LONG(B);C=z.STRING(B+=4,4);A=B+=4;s=z.LONG(B+u);return{length:u,type:C,start:A,CRC:s}}var t,z,n,y,x;t=e;z=new p;z.init(t);(function(){var s=0,A=0,u=[35152,20039,3338,6666];for(A=0;A<u.length;A++,s+=2){if(u[A]!=z.SHORT(s)){throw new o.ImageError(o.ImageError.WRONG_FORMAT)}}})();x=v.call(this);l.extend(this,{type:"image/png",size:t.length,width:x.width,height:x.height,purge:function(){q.call(this)}});q.call(this)}return m});b("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(o,l,p,m){return function(e){var n=[p,m],q;q=function(){for(var r=0;r<n.length;r++){try{return new n[r](e)}catch(s){}}throw new l.ImageError(l.ImageError.WRONG_FORMAT)}();o.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(r){return r},stripHeaders:function(r){return r},purge:function(){}});o.extend(this,q);this.purge=function(){q.purge();q=null}}});b("moxie/runtime/html5/image/MegaPixel",[],function(){function m(O,F,K){var D=O.naturalWidth,H=O.naturalHeight;var B=K.width,T=K.height;var N=K.x||0,J=K.y||0;var Q=F.getContext("2d");if(l(O)){D/=2;H/=2}var L=1024;var G=document.createElement("canvas");G.width=G.height=L;var P=G.getContext("2d");var A=o(O,D,H);var I=0;while(I<H){var M=I+L>H?H-I:L;var q=0;while(q<D){var R=q+L>D?D-q:L;P.clearRect(0,0,L,L);P.drawImage(O,-q,-I);var z=q*B/D+N<<0;var C=Math.ceil(R*B/D);var n=I*T/H/A+J<<0;var t=Math.ceil(M*T/H/A);Q.drawImage(G,0,0,R,M,z,n,C,t);q+=L}I+=L}G=P=null}function l(u){var q=u.naturalWidth,v=u.naturalHeight;if(q*v>1024*1024){var s=document.createElement("canvas");s.width=s.height=1;var p=s.getContext("2d");p.drawImage(u,-q+1,0);return p.getImageData(0,0,1,1).data[3]===0}else{return false}}function o(z,C,v){var p=document.createElement("canvas");p.width=1;p.height=v;var x=p.getContext("2d");x.drawImage(z,0,0);var D=x.getImageData(0,0,1,v).data;var q=0;var B=v;var A=v;while(A>q){var y=D[(A-1)*4+3];if(y===0){B=A}else{q=A}A=B+q>>1}p=null;var w=A/v;return w===0?1:w}return{isSubsampled:l,renderTo:m}});b("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/MegaPixel","moxie/core/utils/Mime","moxie/core/utils/Env"],function(w,z,p,l,q,A,m,y,x){function v(){function o(){if(!H&&!C){throw new p.ImageError(p.DOMException.INVALID_STATE_ERR)}return H||C}function B(E){return l.atob(E.substring(E.indexOf("base64,")+7))}function I(N,E){return"data:"+(E||"")+";base64,"+l.btoa(N)}function J(N){var E=this;C=new Image;C.onerror=function(){F.call(this);E.trigger("error",p.ImageError.WRONG_FORMAT)};C.onload=function(){E.trigger("load")};C.src=/^data:[^;]*;base64,/.test(N)?N:I(N,n.type)}function K(P,N){var O=this,E;if(window.FileReader){E=new FileReader;E.onload=function(){N(this.result)};E.onerror=function(){O.trigger("error",p.ImageError.WRONG_FORMAT)};E.readAsDataURL(P)}else{return N(P.getAsDataURL())}}function M(V,P,E,R){var Z=this,O,Y,X=0,U=0,Q,S,N,T;L=R;T=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1;if(z.inArray(T,[5,6,7,8])!==-1){var W=V;V=P;P=W}Q=o();if(!E){O=Math.min(V/Q.width,P/Q.height)}else{V=Math.min(V,Q.width);P=Math.min(P,Q.height);O=Math.max(V/Q.width,P/Q.height)}if(O>1&&!E&&R){this.trigger("Resize");return}if(!H){H=document.createElement("canvas")}S=Math.round(Q.width*O);N=Math.round(Q.height*O);if(E){H.width=V;H.height=P;if(S>V){X=Math.round((S-V)/2)}if(N>P){U=Math.round((N-P)/2)}}else{H.width=S;H.height=N}if(!L){s(H.width,H.height,T)}t.call(this,Q,H,-X,-U,S,N);this.width=H.width;this.height=H.height;G=true;Z.trigger("Resize")}function t(R,O,S,Q,N,P){if(x.OS==="iOS"){m.renderTo(R,O,{width:N,height:P,x:S,y:Q})}else{var E=O.getContext("2d");E.drawImage(R,S,Q,N,P)}}function s(O,E,P){switch(P){case 5:case 6:case 7:case 8:H.width=E;H.height=O;break;default:H.width=O;H.height=E}var N=H.getContext("2d");switch(P){case 2:N.translate(O,0);N.scale(-1,1);break;case 3:N.translate(O,E);N.rotate(Math.PI);break;case 4:N.translate(0,E);N.scale(1,-1);break;case 5:N.rotate(0.5*Math.PI);N.scale(1,-1);break;case 6:N.rotate(0.5*Math.PI);N.translate(0,-E);break;case 7:N.rotate(0.5*Math.PI);N.translate(O,-E);N.scale(-1,1);break;case 8:N.rotate(-0.5*Math.PI);N.translate(-O,0);break}}function F(){if(r){r.purge();r=null}u=C=H=n=null;G=false}var D=this,C,r,H,u,n,G=false,L=true;z.extend(this,{loadFromBlob:function(P){var N=this,O=N.getRuntime(),E=arguments.length>1?arguments[1]:true;if(!O.can("access_binary")){throw new p.RuntimeError(p.RuntimeError.NOT_SUPPORTED_ERR)}n=P;if(P.isDetached()){u=P.getSource();J.call(this,u);return}else{K.call(this,P.getSource(),function(Q){if(E){u=B(Q)}J.call(N,Q)})}},loadFromImage:function(N,E){this.meta=N.meta;n=new q(null,{name:N.name,size:N.size,type:N.type});J.call(this,E?u=N.getAsBinaryString():N.getAsDataURL())},getInfo:function(){var N=this.getRuntime(),E;if(!r&&u&&N.can("access_image_binary")){r=new A(u)}E={width:o().width||0,height:o().height||0,type:n.type||y.getFileMime(n.name),size:u&&u.length||n.size||0,name:n.name||"",meta:r&&r.meta||this.meta||{}};return E},downsize:function(){M.apply(this,arguments)},getAsCanvas:function(){if(H){H.id=this.uid+"_canvas"}return H},getAsBlob:function(e,E){if(e!==this.type){M.call(this,this.width,this.height,false)}return new q(null,{name:n.name||"",type:e,data:D.getAsBinaryString.call(this,e,E)})},getAsDataURL:function(N){var E=arguments[1]||90;if(!G){return C.src}if("image/jpeg"!==N){return H.toDataURL("image/png")}else{try{return H.toDataURL("image/jpeg",E/100)}catch(O){return H.toDataURL("image/jpeg")}}},getAsBinaryString:function(E,O){if(!G){if(!u){u=B(D.getAsDataURL(E,O))}return u}if("image/jpeg"!==E){u=B(D.getAsDataURL(E,O))}else{var N;if(!O){O=90}try{N=H.toDataURL("image/jpeg",O/100)}catch(e){N=H.toDataURL("image/jpeg")}u=B(N);if(r){u=r.stripHeaders(u);if(L){if(r.meta&&r.meta.exif){r.setExif({PixelXDimension:this.width,PixelYDimension:this.height})}u=r.writeHeaders(u)}r.purge();r=null}}G=false;return u},destroy:function(){D=null;F.call(this);this.getRuntime().getShim().removeInstance(this.uid)}})}return w.Image=v});b("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(v,y,p,l,q){function x(){var r;try{r=navigator.plugins["Shockwave Flash"];r=r.description}catch(o){try{r=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(s){r="0.0"}}r=r.match(/\d+/g);return parseFloat(r[0]+"."+r[1])}function w(n){var o=this,e;n=v.extend({swf_url:y.swf_url},n);q.call(this,n,z,{access_binary:function(r){return r&&o.mode==="browser"},access_image_binary:function(r){return r&&o.mode==="browser"},display_media:q.capTrue,do_cors:q.capTrue,drag_and_drop:false,report_upload_progress:function(){return o.mode==="client"},resize_image:q.capTrue,return_response_headers:false,return_response_type:function(r){if(r==="json"&&!!window.JSON){return true}return !v.arrayDiff(r,["","text","document"])||o.mode==="browser"},return_status_code:function(r){return o.mode==="browser"||!v.arrayDiff(r,[200,404])},select_file:q.capTrue,select_multiple:q.capTrue,send_binary_string:function(r){return r&&o.mode==="browser"},send_browser_cookies:function(r){return r&&o.mode==="browser"},send_custom_headers:function(r){return r&&o.mode==="browser"},send_multipart:q.capTrue,slice_blob:function(r){return r&&o.mode==="browser"},stream_upload:function(r){return r&&o.mode==="browser"},summon_file_dialog:false,upload_filesize:function(r){return v.parseSizeStr(r)<=2097152||o.mode==="client"},use_http_method:function(r){return !v.arrayDiff(r,["GET","POST"])}},{access_binary:function(r){return r?"browser":"client"},access_image_binary:function(r){return r?"browser":"client"},report_upload_progress:function(r){return r?"browser":"client"},return_response_type:function(r){return v.arrayDiff(r,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(r){return v.arrayDiff(r,[200,404])?"browser":["client","browser"]},send_binary_string:function(r){return r?"browser":"client"},send_browser_cookies:function(r){return r?"browser":"client"},send_custom_headers:function(r){return r?"browser":"client"},stream_upload:function(r){return r?"client":"browser"},upload_filesize:function(r){return v.parseSizeStr(r)>=2097152?"client":"browser"}},"client");if(x()<10){this.mode=false}v.extend(this,{getShim:function(){return p.get(this.uid)},shimExec:function(s,r){var u=[].slice.call(arguments,2);return o.getShim().exec(this.uid,s,r,u)},init:function(){var u,r,t;t=this.getShimContainer();v.extend(t.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"});u='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+n.swf_url+'" ';if(y.browser==="IE"){u+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '}u+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+y.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';if(y.browser==="IE"){r=document.createElement("div");t.appendChild(r);r.outerHTML=u;r=t=null}else{t.innerHTML=u}e=setTimeout(function(){if(o&&!o.initialized){o.trigger("Error",new l.RuntimeError(l.RuntimeError.NOT_INIT_ERR))}},5000)},destroy:function(r){return function(){r.call(o);clearTimeout(e);n=e=r=o=null}}(this.destroy)},m)}var z="flash",m={};q.addConstructor(z,w);return m});b("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(m,l){var o={slice:function(u,v,t,p){var q=this.getRuntime();if(v<0){v=Math.max(u.size+v,0)}else{if(v>0){v=Math.min(v,u.size)}}if(t<0){t=Math.max(u.size+t,0)}else{if(t>0){t=Math.min(t,u.size)}}u=q.shimExec.call(this,"Blob","slice",v,t,p||"");if(u){u=new l(q.uid,u)}return u}};return m.Blob=o});b("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime"],function(m){var l={init:function(n){this.getRuntime().shimExec.call(this,"FileInput","init",{name:n.name,accept:n.accept,multiple:n.multiple});this.trigger("ready")}};return m.FileInput=l});b("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(p,m){function o(r,s){switch(s){case"readAsText":return m.atob(r,"utf8");case"readAsBinaryString":return m.atob(r);case"readAsDataURL":return r}return null}var q="";var l={read:function(v,r){var n=this,u=n.getRuntime();if(v==="readAsDataURL"){q="data:"+(r.type||"")+";base64,"}n.bind("Progress",function(s,e){if(e){q+=o(e,v)}});return u.shimExec.call(this,"FileReader","readAsBase64",r.uid)},getResult:function(){return q},destroy:function(){q=null}};return p.FileReader=l});b("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(o,l){function p(q,r){switch(r){case"readAsText":return l.atob(q,"utf8");case"readAsBinaryString":return l.atob(q);case"readAsDataURL":return q}return null}var m={read:function(u,q){var s,n=this.getRuntime();s=n.shimExec.call(this,"FileReaderSync","readAsBase64",q.uid);if(!s){return null}if(u==="readAsDataURL"){s="data:"+(q.type||"")+";base64,"+s}return p(s,u,q.type)}};return o.FileReaderSync=m});b("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter"],function(w,p,y,v,m,q,x){var l={send:function(A,n){function C(){A.transport=D.mode;D.shimExec.call(s,"XMLHttpRequest","send",A,n)}function z(u,r){D.shimExec.call(s,"XMLHttpRequest","appendBlob",u,r.uid);n=null;C()}function o(u,r){var E=new x;E.bind("TransportingComplete",function(){r(this.result)});E.transport(u.getSource(),u.type,{ruid:D.uid})}var s=this,D=s.getRuntime();if(!p.isEmptyObj(A.headers)){p.each(A.headers,function(u,r){D.shimExec.call(s,"XMLHttpRequest","setRequestHeader",r,u.toString())})}if(n instanceof q){var B;n.each(function(u,r){if(u instanceof y){B=r}else{D.shimExec.call(s,"XMLHttpRequest","append",r,u)}});if(!n.hasBlob()){n=null;C()}else{var t=n.getBlob();if(t.isDetached()){o(t,function(r){t.destroy();z(B,r)})}else{z(B,t)}}}else{if(n instanceof y){if(n.isDetached()){o(n,function(r){n.destroy();n=r.uid;C()})}else{n=n.uid;C()}}else{C()}}},getResponse:function(t){var z,r,u=this.getRuntime();r=u.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob");if(r){r=new v(u.uid,r);if("blob"===t){return r}try{z=new m;if(!!~p.inArray(t,["","text"])){return z.readAsText(r)}else{if("json"===t&&!!window.JSON){return JSON.parse(z.readAsText(r))}}}finally{r.destroy()}}return null},abort:function(o){var n=this.getRuntime();n.shimExec.call(this,"XMLHttpRequest","abort");this.dispatchEvent("readystatechange");this.dispatchEvent("abort")}};return w.XMLHttpRequest=l});b("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(m,l){var o={getAsBlob:function(q){var s=this.getRuntime(),p=s.shimExec.call(this,"Transporter","getAsBlob",q);if(p){return new l(s.uid,p)}return null}};return m.Transporter=o});b("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(q,m,u,p,l){var o={loadFromBlob:function(y){function v(r){x.shimExec.call(n,"Image","loadFromBlob",r.uid);n=x=null}var n=this,x=n.getRuntime();if(y.isDetached()){var w=new u;w.bind("TransportingComplete",function(){v(w.result.getSource())});w.transport(y.getSource(),y.type,{ruid:x.uid})}else{v(y.getSource())}},loadFromImage:function(r){var n=this.getRuntime();return n.shimExec.call(this,"Image","loadFromImage",r.uid)},getAsBlob:function(v,s){var w=this.getRuntime(),r=w.shimExec.call(this,"Image","getAsBlob",v,s);if(r){return new p(w.uid,r)}return null},getAsDataURL:function(){var s=this.getRuntime(),r=s.Image.getAsBlob.apply(this,arguments),v;if(!r){return null}v=new l;return v.readAsDataURL(r)}};return q.Image=o});b("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(v,y,p,l,q){function x(G){var K=false,C=null,A,E,L,B,J,I=0;try{try{C=new ActiveXObject("AgControl.AgControl");if(C.IsVersionSupported(G)){K=true}C=null}catch(F){var D=navigator.plugins["Silverlight Plug-In"];if(D){A=D.description;if(A==="1.0.30226.2"){A="2.0.30226.2"}E=A.split(".");while(E.length>3){E.pop()}while(E.length<4){E.push(0)}L=G.split(".");while(L.length>4){L.pop()}do{B=parseInt(L[I],10);J=parseInt(E[I],10);I++}while(I<L.length&&B===J);if(B<=J&&!isNaN(B)){K=true}}}}catch(H){K=false}return K}function w(n){var o=this,e;n=v.extend({xap_url:y.xap_url},n);q.call(this,n,z,{access_binary:q.capTrue,access_image_binary:q.capTrue,display_media:q.capTrue,do_cors:q.capTrue,drag_and_drop:false,report_upload_progress:q.capTrue,resize_image:q.capTrue,return_response_headers:function(r){return r&&o.mode==="client"},return_response_type:function(r){if(r!=="json"){return true}else{return !!window.JSON}},return_status_code:function(r){return o.mode==="client"||!v.arrayDiff(r,[200,404])},select_file:q.capTrue,select_multiple:q.capTrue,send_binary_string:q.capTrue,send_browser_cookies:function(r){return r&&o.mode==="browser"},send_custom_headers:function(r){return r&&o.mode==="client"},send_multipart:q.capTrue,slice_blob:q.capTrue,stream_upload:true,summon_file_dialog:false,upload_filesize:q.capTrue,use_http_method:function(r){return o.mode==="client"||!v.arrayDiff(r,["GET","POST"])}},{return_response_headers:function(r){return r?"client":"browser"},return_status_code:function(r){return v.arrayDiff(r,[200,404])?"client":["client","browser"]},send_browser_cookies:function(r){return r?"browser":"client"},send_custom_headers:function(r){return r?"client":"browser"},use_http_method:function(r){return v.arrayDiff(r,["GET","POST"])?"client":["client","browser"]}});if(!x("2.0.31005.0")||y.browser==="Opera"){this.mode=false}v.extend(this,{getShim:function(){return p.get(this.uid).content.Moxie},shimExec:function(s,r){var u=[].slice.call(arguments,2);return o.getShim().exec(this.uid,s,r,u)},init:function(){var r;r=this.getShimContainer();r.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+n.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+y.global_event_dispatcher+'"/></object>';e=setTimeout(function(){if(o&&!o.initialized){o.trigger("Error",new l.RuntimeError(l.RuntimeError.NOT_INIT_ERR))}},y.OS!=="Windows"?10000:5000)},destroy:function(r){return function(){r.call(o);clearTimeout(e);n=e=r=o=null}}(this.destroy)},m)}var z="silverlight",m={};q.addConstructor(z,w);return m});b("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(m,l,o){return m.Blob=l.extend({},o)});b("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime"],function(m){var l={init:function(o){function n(q){var p="";for(var r=0;r<q.length;r++){p+=(p!==""?"|":"")+q[r].title+" | *."+q[r].extensions.replace(/,/g,";*.")}return p}this.getRuntime().shimExec.call(this,"FileInput","init",n(o.accept),o.name,o.multiple);this.trigger("ready")}};return m.FileInput=l});b("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(o,l,p){var m={init:function(){var s=this,q=s.getRuntime(),n;n=q.getShimContainer();p.addEvent(n,"dragover",function(r){r.preventDefault();r.stopPropagation();r.dataTransfer.dropEffect="copy"},s.uid);p.addEvent(n,"dragenter",function(r){r.preventDefault();var t=l.get(q.uid).dragEnter(r);if(t){r.stopPropagation()}},s.uid);p.addEvent(n,"drop",function(r){r.preventDefault();var t=l.get(q.uid).dragDrop(r);if(t){r.stopPropagation()}},s.uid);return q.shimExec.call(this,"FileDrop","init")}};return o.FileDrop=m});b("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(m,l,o){return m.FileReader=l.extend({},o)});b("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(m,l,o){return m.FileReaderSync=l.extend({},o)});b("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest"],function(m,l,o){return m.XMLHttpRequest=l.extend({},o)});b("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(m,l,o){return m.Transporter=l.extend({},o)});b("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/image/Image"],function(m,l,o){return m.Image=l.extend({},o,{getInfo:function(){var s=this.getRuntime(),t=["tiff","exif","gps"],q={meta:{}},p=s.shimExec.call(this,"Image","getInfo");if(p.meta){l.each(t,function(x){var v=p.meta[x],z,w,y,r;if(v&&v.keys){q.meta[x]={};for(w=0,y=v.keys.length;w<y;w++){z=v.keys[w];r=v[z];if(r){if(/^(\d|[1-9]\d+)$/.test(r)){r=parseInt(r,10)}else{if(/^\d*\.\d+$/.test(r)){r=parseFloat(r)}}q.meta[x][z]=r}}}})}q.width=parseInt(p.width,10);q.height=parseInt(p.height,10);q.size=parseInt(p.size,10);q.type=p.type;q.name=p.name;return q}})});b("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(u,m,w,q){function v(r){var s=this,n=w.capTest,e=w.capTrue;w.call(this,r,l,{access_binary:n(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:false,display_media:n(p.Image&&(q.can("create_canvas")||q.can("use_data_uri_over32kb"))),do_cors:false,drag_and_drop:false,filter_by_extension:n(function(){return q.browser==="Chrome"&&q.version>=28||q.browser==="IE"&&q.version>=10}()),resize_image:function(){return p.Image&&s.can("access_binary")&&q.can("create_canvas")},report_upload_progress:false,return_response_headers:false,return_response_type:function(o){if(o==="json"&&!!window.JSON){return true}return !!~u.inArray(o,["text","document",""])},return_status_code:function(o){return !u.arrayDiff(o,[200,404])},select_file:function(){return q.can("use_fileinput")},select_multiple:false,send_binary_string:false,send_custom_headers:false,send_multipart:true,slice_blob:false,stream_upload:function(){return s.can("select_file")},summon_file_dialog:n(function(){return q.browser==="Firefox"&&q.version>=4||q.browser==="Opera"&&q.version>=12||!!~u.inArray(q.browser,["Chrome","Safari"])}()),upload_filesize:e,use_http_method:function(o){return !u.arrayDiff(o,["GET","POST"])}});u.extend(this,{init:function(){this.trigger("Init")},destroy:function(o){return function(){o.call(s);o=s=null}}(this.destroy)});u.extend(this.getShim(),p)}var l="html4",p={};w.addConstructor(l,v);return p});b("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(u,m,w,q,l,p){function v(){function s(){var z=this,o=z.getRuntime(),D,A,B,C,y,e;e=m.guid("uid_");D=o.getShimContainer();if(t){B=w.get(t+"_form");if(B){m.extend(B.style,{top:"100%"})}}C=document.createElement("form");C.setAttribute("id",e+"_form");C.setAttribute("method","post");C.setAttribute("enctype","multipart/form-data");C.setAttribute("encoding","multipart/form-data");m.extend(C.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"});y=document.createElement("input");y.setAttribute("id",e);y.setAttribute("type","file");y.setAttribute("name",n.name||"Filedata");y.setAttribute("accept",r.join(","));m.extend(y.style,{fontSize:"999px",opacity:0});C.appendChild(y);D.appendChild(C);m.extend(y.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"});if(p.browser==="IE"&&p.version<10){m.extend(y.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"})}y.onchange=function(){var F;if(!this.value){return}if(this.files){F=this.files[0]}else{F={name:this.value}}x=[F];this.onchange=function(){};s.call(z);z.bind("change",function E(){var I=w.get(e),H=w.get(e+"_form"),G;z.unbind("change",E);if(z.files.length&&I&&H){G=z.files[0];I.setAttribute("id",G.uid);H.setAttribute("id",G.uid+"_form");H.setAttribute("target",G.uid+"_iframe")}I=H=null},998);y=C=null;z.trigger("change")};if(o.can("summon_file_dialog")){A=w.get(n.browse_button);q.removeEvent(A,"click",z.uid);q.addEvent(A,"click",function(E){if(y&&!y.disabled){y.click()}E.preventDefault()},z.uid)}t=e;D=B=A=null}var t,x=[],r=[],n;m.extend(this,{init:function(A){var y=this,z=y.getRuntime(),B;n=A;r=A.accept.mimes||l.extList2mimes(A.accept,z.can("filter_by_extension"));B=z.getShimContainer();(function(){var C,o,e;C=w.get(A.browse_button);if(z.can("summon_file_dialog")){if(w.getStyle(C,"position")==="static"){C.style.position="relative"}o=parseInt(w.getStyle(C,"z-index"),10)||1;C.style.zIndex=o;B.style.zIndex=o-1}e=z.can("summon_file_dialog")?C:B;q.addEvent(e,"mouseover",function(){y.trigger("mouseenter")},y.uid);q.addEvent(e,"mouseout",function(){y.trigger("mouseleave")},y.uid);q.addEvent(e,"mousedown",function(){y.trigger("mousedown")},y.uid);q.addEvent(w.get(A.container),"mouseup",function(){y.trigger("mouseup")},y.uid);C=null})();s.call(this);B=null;y.trigger({type:"ready",async:true})},getFiles:function(){return x},disable:function(e){var o;if(o=w.get(t)){o.disabled=!!e}},destroy:function(){var o=this.getRuntime(),e=o.getShim(),y=o.getShimContainer();q.removeAllEvents(y,this.uid);q.removeAllEvents(n&&w.get(n.container),this.uid);q.removeAllEvents(n&&w.get(n.browse_button),this.uid);if(y){y.innerHTML=""}e.removeInstance(this.uid);t=x=r=n=y=e=null}})}return u.FileInput=v});b("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(m,l){return m.FileReader=l});b("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(v,y,p,l,q,z,m,x){function w(){function o(F){var D=this,E,C,G,B,A=false;if(!r){return}E=r.id.replace(/_iframe$/,"");C=p.get(E+"_form");if(C){G=C.getElementsByTagName("input");B=G.length;while(B--){switch(G[B].getAttribute("type")){case"hidden":G[B].parentNode.removeChild(G[B]);break;case"file":A=true;break}}G=[];if(!A){C.parentNode.removeChild(C)}C=null}setTimeout(function(){z.removeEvent(r,"load",D.uid);if(r.parentNode){r.parentNode.removeChild(r)}var e=D.getRuntime().getShimContainer();if(!e.children.length){e.parentNode.removeChild(e)}e=r=null;F()},1)}var s,n,r;y.extend(this,{send:function(C,u){function E(){var H=B.getShimContainer()||document.body,G=document.createElement("div");G.innerHTML='<iframe id="'+F+'_iframe" name="'+F+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>';r=G.firstChild;H.appendChild(r);z.addEvent(r,"load",function(){var J;try{J=r.contentWindow.document||r.contentDocument||window.frames[r.id].document;if(/^4(0[0-9]|1[0-7]|2[2346])\s/.test(J.title)){s=J.title.replace(/^(\d+).*$/,"$1")}else{s=200;n=y.trim(J.body.innerHTML);e.trigger({type:"progress",loaded:n.length,total:n.length});if(D){e.trigger({type:"uploadprogress",loaded:D.size||1025,total:D.size||1025})}}}catch(I){if(l.hasSameOrigin(C.url)){s=404}else{o.call(e,function(){e.trigger("error")});return}}o.call(e,function(){e.trigger("load")})},e.uid)}var e=this,B=e.getRuntime(),F,t,A,D;s=n=null;if(u instanceof x&&u.hasBlob()){D=u.getBlob();F=D.uid;A=p.get(F);t=p.get(F+"_form");if(!t){throw new q.DOMException(q.DOMException.NOT_FOUND_ERR)}}else{F=y.guid("uid_");t=document.createElement("form");t.setAttribute("id",F+"_form");t.setAttribute("method",C.method);t.setAttribute("enctype","multipart/form-data");t.setAttribute("encoding","multipart/form-data");t.setAttribute("target",F+"_iframe");B.getShimContainer().appendChild(t)}if(u instanceof x){u.each(function(H,I){if(H instanceof m){if(A){A.setAttribute("name",I)}}else{var G=document.createElement("input");y.extend(G,{type:"hidden",name:I,value:H});if(A){t.insertBefore(G,A)}else{t.appendChild(G)}}})}t.setAttribute("action",C.url);E();t.submit();e.trigger("loadstart")},getStatus:function(){return s},getResponse:function(t){if("json"===t){if(y.typeOf(n)==="string"&&!!window.JSON){try{return JSON.parse(n.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(u){return null}}}else{if("document"===t){}}return n},abort:function(){var t=this;if(r&&r.contentWindow){if(r.contentWindow.stop){r.contentWindow.stop()}else{if(r.contentWindow.document.execCommand){r.contentWindow.document.execCommand("Stop")}else{r.src="about:blank"}}}o.call(this,function(){t.dispatchEvent("abort")})}})}return v.XMLHttpRequest=w});b("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(m,l){return m.Image=l});a(["moxie/core/utils/Basic","moxie/core/I18n","moxie/core/utils/Mime","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/file/File","moxie/file/FileInput","moxie/file/FileDrop","moxie/runtime/RuntimeTarget","moxie/file/FileReader","moxie/core/utils/Url","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/runtime/Transporter","moxie/image/Image","moxie/core/utils/Events"])})(this);(function(c){var a={},d=c.moxie.core.utils.Basic.inArray;(function b(h){var f,g;for(f in h){g=typeof h[f];if(g==="object"&&!~d(f,["Exceptions","Env","Mime"])){b(h[f])}else{if(g==="function"){a[f]=h[f]}}}})(c.moxie);a.Env=c.moxie.core.utils.Env;a.Mime=c.moxie.core.utils.Mime;a.Exceptions=c.moxie.core.Exceptions;c.mOxie=a;if(!c.o){c.o=a}return a})(this);(function(f,b,h){function c(m){function l(s,p,q){var n={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};n[s]?o[n[s]]=p:q||(o[s]=p)}var k=m.required_features,o={};return typeof k=="string"?g.each(k.split(/\s*,\s*/),function(n){l(n,!0)}):typeof k=="object"?g.each(k,function(p,n){l(n,p)}):k===!0&&(m.multipart||(o.send_binary_string=!0),m.chunk_size>0&&(o.slice_blob=!0),m.resize.enabled&&(o.send_binary_string=!0),g.each(m,function(p,n){l(n,!!p,!0)})),o}var d=f.setTimeout,a={},g={VERSION:"2.1.1",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:b.mimes,ua:b.ua,typeOf:b.typeOf,extend:b.extend,guid:b.guid,get:function(m){var l=[],e;b.typeOf(m)!=="array"&&(m=[m]);var k=m.length;while(k--){e=b.get(m[k]),e&&l.push(e)}return l.length?l:null},each:b.each,getPos:b.getPos,getSize:b.getSize,xmlEncode:function(l){var k={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},m=/[<>&\"\']/g;return l?(""+l).replace(m,function(n){return k[n]?"&"+k[n]+";":n}):l},toArray:b.toArray,inArray:b.inArray,addI18n:b.addI18n,translate:b.translate,isEmptyObj:b.isEmptyObj,hasClass:b.hasClass,addClass:b.addClass,removeClass:b.removeClass,getStyle:b.getStyle,addEvent:b.addEvent,removeEvent:b.removeEvent,removeAllEvents:b.removeAllEvents,cleanName:function(l){var k,m;m=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(k=0;k<m.length;k+=2){l=l.replace(m[k],m[k+1])}return l=l.replace(/\s+/g,"_"),l=l.replace(/[^a-z0-9_\-\.]+/gi,""),l},buildUrl:function(l,k){var m="";return g.each(k,function(o,n){m+=(m?"&":"")+encodeURIComponent(n)+"="+encodeURIComponent(o)}),m&&(l+=(l.indexOf("?")>0?"&":"?")+m),l},formatSize:function(m){function k(o,n){return Math.round(o*Math.pow(10,n))/Math.pow(10,n)}if(m===h||/\D/.test(m)){return g.translate("N/A")}var l=Math.pow(1024,4);return m>l?k(m/l,1)+" "+g.translate("tb"):m>(l/=1024)?k(m/l,1)+" "+g.translate("gb"):m>(l/=1024)?k(m/l,1)+" "+g.translate("mb"):m>1024?Math.round(m/1024)+" "+g.translate("kb"):m+" "+g.translate("b")},parseSize:b.parseSizeStr,predictRuntime:function(m,o){var l,k;return l=new g.Uploader(m),k=b.Runtime.thatCan(l.getOption().required_features,o||m.runtimes),l.destroy(),k},addFileFilter:function(l,k){a[l]=k}};g.addFileFilter("mime_types",function(l,k,m){l.length&&!l.regexp.test(k.name)?(this.trigger("Error",{code:g.FILE_EXTENSION_ERROR,message:g.translate("File extension error."),file:k}),m(!1)):m(!0)}),g.addFileFilter("max_file_size",function(m,k,o){var l;m=g.parseSize(m),k.size!==l&&m&&k.size>m?(this.trigger("Error",{code:g.FILE_SIZE_ERROR,message:g.translate("File size error."),file:k}),o(!1)):o(!0)}),g.addFileFilter("prevent_duplicates",function(m,k,o){if(m){var l=this.files.length;while(l--){if(k.name===this.files[l].name&&k.size===this.files[l].size){this.trigger("Error",{code:g.FILE_DUPLICATE_ERROR,message:g.translate("Duplicate file error."),file:k}),o(!1);return}}}o(!0)}),g.Uploader=function(ab){function Z(){var l,k=0,m;if(this.state==g.STARTED){for(m=0;m<aa.length;m++){!l&&aa[m].status==g.QUEUED?(l=aa[m],this.trigger("BeforeUpload",l)&&(l.status=g.UPLOADING,this.trigger("UploadFile",l))):k++}k==aa.length&&(this.state!==g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",aa))}}function B(k){k.percent=k.size>0?Math.ceil(k.loaded/k.size*100):100,ae()}function ae(){var l,k;ac.reset();for(l=0;l<aa.length;l++){k=aa[l],k.size!==h?(ac.size+=k.origSize,ac.loaded+=k.loaded*k.origSize/k.size):ac.size=h,k.status==g.DONE?ac.uploaded++:k.status==g.FAILED?ac.failed++:ac.queued++}ac.size===h?ac.percent=aa.length>0?Math.ceil(ac.uploaded/aa.length*100):0:(ac.bytesPerSec=Math.ceil(ac.loaded/((+(new Date)-R||1)/1000)),ac.percent=ac.size>0?Math.ceil(ac.loaded/ac.size*100):0)}function G(){var k=ad[0]||Y[0];return k?k.getRuntime().uid:!1}function J(l,m){if(l.ruid){var k=b.Runtime.getInfo(l.ruid);if(k){return k.can(m)}}return !1}function o(){this.bind("FilesAdded",Q),this.bind("CancelUpload",t),this.bind("BeforeUpload",X),this.bind("UploadFile",z),this.bind("UploadProgress",U),this.bind("StateChanged",r),this.bind("QueueChanged",ae),this.bind("Error",K),this.bind("FileUploaded",ag),this.bind("Destroy",q)}function F(v,w){var p=this,l=0,m=[],k={accept:v.filters.mime_types,runtime_order:v.runtimes,required_caps:v.required_features,preferred_caps:W,swf_url:v.flash_swf_url,xap_url:v.silverlight_xap_url};g.each(v.runtimes.split(/\s*,\s*/),function(e){v[e]&&(k[e]=v[e])}),v.browse_button&&g.each(v.browse_button,function(e){m.push(function(x){var u=new b.FileInput(g.extend({},k,{name:v.file_data_name,multiple:v.multi_selection,container:v.container,browse_button:e}));u.onready=function(){var y=b.Runtime.getInfo(this.ruid);b.extend(p.features,{chunks:y.can("slice_blob"),multipart:y.can("send_multipart"),multi_selection:y.can("select_multiple")}),l++,ad.push(this),x()},u.onchange=function(){p.addFile(this.files)},u.bind("mouseenter mouseleave mousedown mouseup",function(y){H||(v.browse_button_hover&&("mouseenter"===y.type?b.addClass(e,v.browse_button_hover):"mouseleave"===y.type&&b.removeClass(e,v.browse_button_hover)),v.browse_button_active&&("mousedown"===y.type?b.addClass(e,v.browse_button_active):"mouseup"===y.type&&b.removeClass(e,v.browse_button_active)))}),u.bind("error runtimeerror",function(){u=null,x()}),u.init()})}),v.drop_element&&g.each(v.drop_element,function(u){m.push(function(x){var e=new b.FileDrop(g.extend({},k,{drop_zone:u}));e.onready=function(){var y=b.Runtime.getInfo(this.ruid);p.features.dragdrop=y.can("drag_and_drop"),l++,Y.push(this),x()},e.ondrop=function(){p.addFile(this.files)},e.bind("error runtimeerror",function(){e=null,x()}),e.init()})}),b.inSeries(m,function(){typeof w=="function"&&w(l)})}function n(p,u,m){var k=new b.Image;try{k.onload=function(){k.downsize(u.width,u.height,u.crop,u.preserve_headers)},k.onresize=function(){m(this.getAsBlob(p.type,u.quality)),this.destroy()},k.onerror=function(){m(p)},k.load(p)}catch(l){m(p)}}function s(v,w,m){function p(y,u,A){var x=af[y];switch(y){case"max_file_size":y==="max_file_size"&&(af.max_file_size=af.filters.max_file_size=u);break;case"chunk_size":if(u=g.parseSize(u)){af[y]=u}break;case"filters":g.typeOf(u)==="array"&&(u={mime_types:u}),A?g.extend(af.filters,u):af.filters=u,u.mime_types&&(af.filters.mime_types.regexp=function(D){var C=[];return g.each(D,function(E){g.each(E.extensions.split(/,/),function(L){/^\s*\*\s*$/.test(L)?C.push("\\.*"):C.push("\\."+L.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+C.join("|")+")$","i")}(af.filters.mime_types));break;case"resize":A?g.extend(af.resize,u,{enabled:!0}):af.resize=u;break;case"prevent_duplicates":af.prevent_duplicates=af.filters.prevent_duplicates=!!u;break;case"browse_button":case"drop_element":u=g.get(u);case"container":case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":af[y]=u,A||(k=!0);break;default:af[y]=u}A||l.trigger("OptionChanged",y,u,x)}var l=this,k=!1;typeof v=="object"?g.each(v,function(x,u){p(u,x,m)}):p(v,w,m),m?(af.required_features=c(g.extend({},af)),W=c(g.extend({},af,{required_features:!0}))):k&&(l.trigger("Destroy"),F.call(l,af,function(u){u?(l.runtime=b.Runtime.getInfo(G()).type,l.trigger("Init",{runtime:l.runtime}),l.trigger("PostInit")):l.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})}))}function Q(l,k){[].push.apply(aa,k),l.trigger("QueueChanged"),l.refresh()}function X(m,k){if(af.unique_names){var p=k.name.match(/\.([^.]+)$/),l="part";p&&(l=p[1]),k.target_name=k.id+"."+l}}function z(x,l){function v(){C-->0?d(k,1000):(l.loaded=w,x.trigger("Error",{code:g.HTTP_ERROR,message:g.translate("HTTP Error."),file:l,response:V.responseText,status:V.status,responseHeaders:V.getAllResponseHeaders()}))}function k(){var u,e,p,E;if(l.status==g.DONE||l.status==g.FAILED||x.state==g.STOPPED){return}p={name:l.target_name||l.name},D&&A.chunks&&y.size>D?(E=Math.min(D,y.size-w),u=y.slice(w,w+E)):(E=y.size,u=y),D&&A.chunks&&(x.settings.send_chunk_number?(p.chunk=Math.ceil(w/D),p.chunks=Math.ceil(y.size/D)):(p.offset=w,p.total=y.size)),V=new b.XMLHttpRequest,V.upload&&(V.upload.onprogress=function(L){l.loaded=Math.min(l.size,w+L.loaded),x.trigger("UploadProgress",l)}),V.onload=function(){if(V.status>=400){v();return}C=x.settings.max_retries,E<y.size?(u.destroy(),w+=E,l.loaded=Math.min(w,y.size),x.trigger("ChunkUploaded",l,{offset:l.loaded,total:y.size,response:V.responseText,status:V.status,responseHeaders:V.getAllResponseHeaders()}),b.Env.browser==="Android Browser"&&x.trigger("UploadProgress",l)):l.loaded=l.size,u=e=null,!w||w>=y.size?(l.size!=l.origSize&&(y.destroy(),y=null),x.trigger("UploadProgress",l),l.status=g.DONE,x.trigger("FileUploaded",l,{response:V.responseText,status:V.status,responseHeaders:V.getAllResponseHeaders()})):d(k,1)},V.onerror=function(){v()},V.onloadend=function(){this.destroy(),V=null},x.settings.multipart&&A.multipart?(p.name=l.target_name||l.name,V.open("post",m,!0),g.each(x.settings.headers,function(M,L){V.setRequestHeader(L,M)}),e=new b.FormData,g.each(g.extend(p,x.settings.multipart_params),function(M,L){e.append(L,M)}),e.append(x.settings.file_data_name,u),V.send(e,{runtime_order:x.settings.runtimes,required_caps:x.settings.required_features,preferred_caps:W,swf_url:x.settings.flash_swf_url,xap_url:x.settings.silverlight_xap_url})):(m=g.buildUrl(x.settings.url,g.extend(p,x.settings.multipart_params)),V.open("post",m,!0),V.setRequestHeader("Content-Type","application/octet-stream"),g.each(x.settings.headers,function(M,L){V.setRequestHeader(L,M)}),V.send(u,{runtime_order:x.settings.runtimes,required_caps:x.settings.required_features,preferred_caps:W,swf_url:x.settings.flash_swf_url,xap_url:x.settings.silverlight_xap_url}))}var m=x.settings.url,D=x.settings.chunk_size,C=x.settings.max_retries,A=x.features,w=0,y;l.loaded&&(w=l.loaded=D*Math.floor(l.loaded/D)),y=l.getSource(),x.settings.resize.enabled&&J(y,"send_binary_string")&&!!~b.inArray(y.type,["image/jpeg","image/png"])?n.call(this,y,x.settings.resize,function(p){y=p,l.size=p.size,k()}):k()}function U(l,k){B(k)}function r(l){if(l.state==g.STARTED){R=+(new Date)}else{if(l.state==g.STOPPED){for(var k=l.files.length-1;k>=0;k--){l.files[k].status==g.UPLOADING&&(l.files[k].status=g.QUEUED,ae())}}}}function t(){V&&V.abort()}function ag(k){ae(),d(function(){Z.call(k)},1)}function K(l,k){k.file&&(k.file.status=g.FAILED,B(k.file),l.state==g.STARTED&&(l.trigger("CancelUpload"),d(function(){Z.call(l)},1)))}function q(k){k.stop(),g.each(aa,function(l){l.destroy()}),aa=[],ad.length&&(g.each(ad,function(l){l.destroy()}),ad=[]),Y.length&&(g.each(Y,function(l){l.destroy()}),Y=[]),W={},H=!1,R=V=null,ac.reset()}var I=g.guid(),af,aa=[],W={},ad=[],Y=[],R,ac,H=!1,V;af={runtimes:b.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_chunk_number:!0},s.call(this,ab,null,!0),ac=new g.QueueProgress,g.extend(this,{id:I,uid:I,state:g.STOPPED,features:{},runtime:null,files:aa,settings:af,total:ac,init:function(){var k=this;typeof af.preinit=="function"?af.preinit(k):g.each(af.preinit,function(e,l){k.bind(l,e)});if(!af.browse_button||!af.url){this.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")});return}o.call(this),F.call(this,af,function(e){typeof af.init=="function"?af.init(k):g.each(af.init,function(l,m){k.bind(m,l)}),e?(k.runtime=b.Runtime.getInfo(G()).type,k.trigger("Init",{runtime:k.runtime}),k.trigger("PostInit")):k.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})})},setOption:function(l,k){s.call(this,l,k,!this.runtime)},getOption:function(k){return k?af[k]:af},refresh:function(){ad.length&&g.each(ad,function(k){k.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=g.STARTED&&(this.state=g.STARTED,this.trigger("StateChanged"),Z.call(this))},stop:function(){this.state!=g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){H=arguments[0]!==h?arguments[0]:!0,ad.length&&g.each(ad,function(k){k.disable(H)}),this.trigger("DisableBrowse",H)},getFile:function(l){var k;for(k=aa.length-1;k>=0;k--){if(aa[k].id===l){return aa[k]}}},addFile:function(x,A){function m(u,C){var l=[];b.each(v.settings.filters,function(e,D){a[D]&&l.push(function(E){a[D].call(v,e,u,function(L){E(!L)})})}),b.inSeries(l,C)}function y(u){var l=b.typeOf(u);if(u instanceof b.File){if(!u.ruid&&!u.isDetached()){if(!w){return !1}u.ruid=w,u.connectRuntime(w)}y(new g.File(u))}else{u instanceof b.Blob?(y(u.getSource()),u.destroy()):u instanceof g.File?(A&&(u.name=A),p.push(function(e){m(u,function(C){C||(k.push(u),v.trigger("FileFiltered",u)),d(e,1)})})):b.inArray(l,["file","blob"])!==-1?y(new b.File(null,u)):l==="node"&&b.typeOf(u.files)==="filelist"?b.each(u.files,y):l==="array"&&(A=null,b.each(u,y))}}var v=this,p=[],k=[],w;w=G(),y(x),p.length&&b.inSeries(p,function(){k.length&&v.trigger("FilesAdded",k)})},removeFile:function(l){var k=typeof l=="string"?l:l.id;for(var m=aa.length-1;m>=0;m--){if(aa[m].id===k){return this.splice(m,1)[0]}}},splice:function(p,l){var m=aa.splice(p===h?0:p,l===h?aa.length:l),k=!1;return this.state==g.STARTED&&(k=!0,this.stop()),this.trigger("FilesRemoved",m),g.each(m,function(u){u.destroy()}),this.trigger("QueueChanged"),this.refresh(),k&&this.start(),m},bind:function(m,k,p){var l=this;g.Uploader.prototype.bind.call(this,m,function(){var u=[].slice.call(arguments);return u.splice(0,1,l),k.apply(this,u)},0,p)},destroy:function(){this.trigger("Destroy"),af=ac=null,this.unbindAll()}})},g.Uploader.prototype=b.EventTarget.instance,g.File=function(){function l(e){g.extend(this,{id:g.guid(),name:e.name||e.fileName,type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:g.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var m=this.getSource().getSource();return b.inArray(b.typeOf(m),["blob","file"])!==-1?m:null},getSource:function(){return k[this.id]?k[this.id]:null},destroy:function(){var m=this.getSource();m&&(m.destroy(),delete k[this.id])}}),k[this.id]=e}var k={};return l}(),g.QueueProgress=function(){var k=this;k.size=0,k.loaded=0,k.uploaded=0,k.failed=0,k.queued=0,k.percent=0,k.bytesPerSec=0,k.reset=function(){k.size=k.loaded=k.uploaded=k.failed=k.queued=k.percent=k.bytesPerSec=0}},f.plupload=g})(window,mOxie);function Smoothing(){var a=this;a.hasSmoothing=function(){if(typeof screen.fontSmoothingEnabled!="undefined"){return screen.fontSmoothingEnabled}else{try{var e=document.createElement("canvas");e.width="35";e.height="35";e.style.display="none";document.body.appendChild(e);var g=e.getContext("2d");g.textBaseline="top";g.font="32px Arial";g.fillStyle="black";g.strokeStyle="black";g.fillText("E",0,0);for(var c=8;c<=32;c++){for(var b=1;b<=32;b++){var d=g.getImageData(b,c,1,1).data[3];if(d!=255&&d!=0){document.body.removeChild(e);return true}}}document.body.removeChild(e);return false}catch(h){return null}}};a.insertClasses=function(){var b=!(navigator.userAgent.indexOf("Windows NT 5.1")>-1)?true:a.hasSmoothing();document.getElementsByTagName("html")[0].className+=b==true?" hasFontSmoothing-true":b==false?" hasFontSmoothing-false":" hasFontSmoothing-unknown"};a.insertClasses()}$(function(){Smoothing()});function cbUploadImg(a,b){if(a=="fail"){alert(b)}else{jQuery("#imgshow").attr("src",b);processImg.init("draw")}}var processImg={_imgsetWH:[120,120],_showimgWH:[120,120],_showimgTL:[0,0],_min:0,_max:100,_start:50};processImg.init=function(a){jQuery("#imgshow").draggable({snapMode:"outer",cursor:"move",drag:function(c,b){processImg._showimgTL[0]=b.position.top;processImg._showimgTL[1]=b.position.left},stop:function(c,b){}});if(a=="draw"){jQuery("#imgshow").load(this.getimgwh)}else{this.getimgwh()}this.slider()};processImg.getimgwh=function(){var g=jQuery("#imgshow").attr("src");var b=jQuery("<img>").attr("src",g).css({position:"absolute",top:"-1000px",left:"-1000px"}).appendTo("body");var a=[b.get(0).offsetWidth,b.get(0).offsetHeight];try{document.body.removeChild(b[0])}catch(f){}processImg._showimgWH=a;var d=(a[0]-processImg._imgsetWH[0])/2;var c=(a[1]-processImg._imgsetWH[1])/2;jQuery("#imgshow").css("left",-d+"px");jQuery("#imgshow").css("top",-c+"px")};processImg.slider=function(){jQuery("#imgshow").removeAttr("width");jQuery("#imgshow").removeAttr("height");jQuery("#slider3").slider("destroy");jQuery("#slider3").slider({min:processImg._min,max:processImg._max,startValue:processImg._start,stop:function(b,a){},slide:function(k,m){var d=processImg;var f=jQuery("#imgshow").attr("width");var a=jQuery("#imgshow").attr("height");var o,c,r,b;var p=m.value;var g=p/d._start;if(g*d._showimgWH[0]<=d._imgsetWH[0]||g*d._showimgWH[1]<=d._imgsetWH[1]){return}o=g*d._showimgWH[0];c=g*d._showimgWH[1];var q=(o-f)/2;var n=(c-a)/2;b=jQuery("#imgshow").css("left");if(b=="auto"){b="0px"}b=b.split("px")[0];b=b-q;jQuery("#imgshow").css("left",b+"px");r=jQuery("#imgshow").css("top");if(r=="auto"){r="0px"}r=r.split("px")[0];r=r-n;jQuery("#imgshow").css("top",r+"px");jQuery("#imgshow").attr("width",o);jQuery("#imgshow").attr("height",c)}})};processImg.imgchip=function(){var a={};var b=jQuery("#imgshow");a.wsrc=b.attr("width");a.hsrc=b.attr("height");a.w=b.attr("width");a.h=b.attr("height");a.l=b.css("left").split("px")[0];a.t=b.css("top").split("px")[0];a.img=b.attr("src");jQuery(":input[name='img']").val(a.img);jQuery(":input[name='wsrc']").val(a.wsrc);jQuery(":input[name='hsrc']").val(a.hsrc);jQuery(":input[name='w']").val(a.w);jQuery(":input[name='h']").val(a.h);jQuery(":input[name='l']").val(a.l);jQuery(":input[name='t']").val(a.t);jQuery("#chipform").submit()};processImg.cbImgChip=function(a){jQuery("#bglogo").val(proJson_2(a))};function closeDiv(a){$("#"+a)[0].style.display="none"}function G_MsnInvite(b,a){$("#invitemsg")[0].style.display="";var c="/home/msninvite_ajax.php";var d="msn="+b+"&passwd="+a;var e=new Ajax.Request(c,{method:"post",parameters:d,onComplete:function(f){CB_MsnInvite(f)}})}function CB_MsnInvite(b){var a=proJson(b);if(a==1){window.location.href="/home/msninvite_form.php"}else{$("#invitemsg")[0].style.display="none"}}function checkInviteMsn(){var b=$("#msn")[0].value;var a=$("#passwd")[0].value;if(b==""||a==""){alert("msn账号和密码不能为空");return}G_MsnInvite(b,a)}function copyToClipboard(b){if(window.clipboardData){window.clipboardData.clearData();window.clipboardData.setData("Text",b)}else{if(navigator.userAgent.indexOf("Opera")!=-1){window.location=b}else{if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(g){alert("!!被浏览器拒绝！\n请在浏览器地址栏输入'about:config'并回车\n然后将'signed.applets.codebase_principal_support'设置为'true'")}var d=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!d){return}var c=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!c){return}c.addDataFlavor("text/unicode");var h=new Object();var a=new Object();var h=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);var k=b;h.data=k;c.setTransferData("text/unicode",h,k.length*2);var f=Components.interfaces.nsIClipboard;if(!d){return false}d.setData(c,null,f.kGlobalClipboard)}}}return true}function go(a){window.location.href=a}function G_GetAnchor(){var a=window.location.href.split("#");if(a.length>=2){return a[1]}return"0"}var g_auserhighlight=new Array();function G_UserHighLight(){for(i=0;i<g_auserhighlight.length;i++){clearInterval(g_auserhighlight[i])}g_auserhighlight=new Array();if(typeof(userhighlight)=="object"){if(typeof($(userhighlight).length)=="undefined"){g_auserhighlight.push(setInterval("$(userhighlight).style.color=($(userhighlight).style.color!='#eda000')?'#eda000':'#eb4e01';",500))}else{for(i=0;i<$(userhighlight).length;i++){g_auserhighlight.push(setInterval("$(userhighlight)["+i+"].style.color=($(userhighlight)["+i+"].style.color!='#eda000')?'#eda000':'#eb4e01';",500))}}}}function G_ShowResponse(b,a){$(a).html(b.res);G_UserHighLight()}function G_ShowJsonResponse(b,a){$(a).html(proJson(b));G_UserHighLight()}function G_ShowJsonResponse_2(b,a){$(a).html(proJson_2(b));G_UserHighLight()}var infovote=new Array();function G_ShowVote(a,e,d){if(typeof(infovote[a])=="undefined"){var b="/group/infovote.php";var c="iid="+a+"&vote="+e;infovote[a]=1;jQuery.post(b,{iid:a,vote:e},function(f){G_ShowJsonResponse(f,d)},"json")}}function G_ShowGUInfo_2(d,c){var b="/group/infolist_gu.php";var a={};a.page=d;jQuery.post(b,a,function(e){G_ShowJsonResponse_2(e,c)},"json")}function G_ShowGUInfo_ta(d,e,c){var b="/group/infolist_gu.php";var a={};a.page=e;a.type="ta";a.uid=d;jQuery.post(b,a,function(f){G_ShowJsonResponse_2(f,c)},"json")}function G_Play(){mfwplayer.controls.play()}function G_Pause(){mfwplayer.controls.pause()}function G_Stop(){mfwplayer.controls.stop()}function G_Invite(){if($("form[name='invite'] :checkbox:checked").size()==0){alert("请至少选择一个邀请人。");return false}var a=jQuery.map($("form[name='invite'] :checkbox:checked").not("#checkbox"),function(c){return $(c).attr("id")});var b="";jQuery.each(a,function(c,d){if(d!=""){b+=d+","}});b=b.substr(0,(b.length)-1);$(":input[name='ids']").attr("value",b);$("form[name='invite']").submit()}function proJson(a){if("err"==a.flag){alert(a.flag)}else{return a.res}}function proJson_2(a){if("err"==a.flag){alert(a.flag)}else{return a.res}}(function(){var a=function(b){this.option=b};a.prototype.display=function(){var b=$(window).width(),c=this,d;$("body").prepend('<div id="ywf_topimg" style="display:none; width:'+b+'px; margin:0 auto; text-align:center; overflow: hidden; background:#5FCFE7; "><a target="_blank" href="/sales/" style="display:block; width:100%; height:100%;" ><img src="http://images.mafengwo.net/images/mdd/yiwofeng/topimg_20130829.jpg" /></a></div>');setTimeout(function(){$("#ywf_topimg").slideDown(1000);setTimeout(function(){$("#ywf_topimg").animate({height:100},{complete:function(){$("#ywf_topimg").bind("mouseenter",function(){d=setTimeout(function(){$("#ywf_topimg").animate({height:208},{duration:500})},500)});$("#ywf_topimg").bind("mouseleave",function(){clearTimeout(d);$("#ywf_topimg").animate({height:100},{duration:500})})}})},8*1000)},1500);$("#ywf_topimg").bind("click",function(){$.get("/ajax/ajax_op_log_api.php?type=yiwofeng&mk="+encodeURIComponent("V4_目的地天窗跳转"))})};$(function(){return false;if(location.href.indexOf("sales")>0){return false}$.getJSON("/sales/ajax.php",{act:"GetInterest"},function(b){if(b.ret==1){(new a({sales_id:b.msg})).display();$.get("/ajax/ajax_op_log_api.php?type=yiwofeng&mk="+encodeURIComponent("V5_天窗_弹出总数"))}})})})();(function(c){c.asset={Err:"服务器繁忙！"};function d(){c().keypress(b).keyup(b).mousedown(b)}function a(){c().unbind("keypress",b).unbind("keyup",b).unbind("mousedown",b)}function b(f){var g=!c(f.target).parents("#popup_container")[0];if(g){setTimeout(function(){try{c("#popup_container input").eq(0).focus()}catch(e){}},10)}}c.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:true,overlayOpacity:0.6,overlayColor:"#000000",draggable:false,okButton:"&nbsp;\u786e\u5b9a&nbsp;",cancelButton:"&nbsp;\u53d6\u6d88&nbsp;",dialogClass:null,modal:true,alert:function(g,h,k,f,e){if(h==null||typeof(h)=="undefined"){h=g;g=""}if(f==null||typeof(f)=="undefined"){f=1}return c.alerts._show(h,g,null,"alert",f,function(l){if(k){var m=k(l);if(m===true||typeof(m)=="undefined"){c.alerts._hide()}else{c.alerts._errtip(m)}}else{c.alerts._hide()}},e)},confirm:function(g,k,h,f,e){if(h==null||typeof(h)=="undefined"){h=g;g=""}if(f==null||typeof(f)=="undefined"){f=2}return c.alerts._show(h,g,null,"confirm",f,function(l){if(k){var m=k(l);if(m===true||typeof(m)=="undefined"){c.alerts._hide()}else{c.alerts._errtip(m)}}else{c.alerts._hide()}},e)},prompt:function(f,k,g,h,e){if(h==null||typeof(h)=="undefined"){h="请您输入"}return c.alerts._show(h,f,g,"prompt",-1,function(l){if(k){var m=k(l);if(m===true||typeof(m)=="undefined"){c.alerts._hide()}else{c.alerts._errtip(m)}}else{c.alerts._hide()}},e)},_show:function(n,m,k,h,g,o,f){c.alerts._hide();c.alerts._overlay("show");c("BODY").append('<div id="popup_container" class="popup-box new-popbox"><a class="close-btn" href="javascript:void(0);" id="popup_close"><i></i></a><div class="pop-ico" id="popup_icon"></div><div class="pop-ctn"><p class="hd" id="popup_title"></p><p class="bd" id="popup_message"></p></div><div class="pop-btns" id="popup_btn"></div></div>');if(c.alerts.dialogClass){c("#popup_container").addClass(c.alerts.dialogClass)}if(g==-1){c("#popup_icon").remove()}else{g=parseInt(g)>3?3:parseInt(g);c("#popup_icon").html('<i class="i'+g+'"></i>')}c("#popup_content").addClass(h);c("#popup_title").html(n.replace(/\n/g,""));c("#popup_message").html(m.replace(/\n/g,""));if(f){c("#popup_close").hide()}else{c("#popup_close").click(function(){c.alerts._hide()})}switch(h){case"alert":c("#popup_btn").html('<a role="button" tabindex="0" class="popbtn popbtn-submit" id="popup_ok">'+c.alerts.okButton+"</a>");c("#popup_ok").click(function(){setTimeout(function(){o(true)},10)});c("#popup_ok").focus().keypress(function(p){if(p.keyCode==13||p.keyCode==27){c("#popup_ok").trigger("click")}});if(c.alerts.modal){d()}break;case"confirm":c("#popup_btn").html('<a role="button" tabindex="0" class="popbtn popbtn-cancel popbtn-half" id="popup_cancel">'+c.alerts.cancelButton+'</a><a role="button" tabindex="0" class="popbtn popbtn-submit popbtn-half" id="popup_ok">'+c.alerts.okButton+"</a>");c("#popup_ok").click(function(){setTimeout(function(){o(true)},10)});c("#popup_cancel").click(function(){setTimeout(function(){o(false)},10)});c("#popup_ok").focus();c("#popup_ok").keypress(function(p){if(p.keyCode==13){c("#popup_ok").trigger("click")}});c("#popup_cancel").keypress(function(p){if(p.keyCode==13){c("#popup_cancel").trigger("click")}});if(c.alerts.modal){d()}break;case"prompt":c("#popup_title").closest(".pop-ctn").removeClass("pop-ctn").addClass("pop-con");c("#popup_message").html('<input type="text" class="oneline" id="popup_prompt" />');c("#popup_btn").html('<a role="button" tabindex="0" class="popbtn popbtn-cancel popbtn-half" id="popup_cancel">'+c.alerts.cancelButton+'</a><a role="button" tabindex="0" class="popbtn popbtn-submit popbtn-half" id="popup_ok">'+c.alerts.okButton+"</a>");c("#popup_ok").click(function(){var e=c("#popup_prompt").val();setTimeout(function(){o(e)},10)});c("#popup_cancel").click(function(){c.alerts._hide();setTimeout(function(){if(o){o(null)}},10)});c("#popup_prompt, #popup_ok").keypress(function(p){if(p.keyCode==13){c("#popup_ok").trigger("click")}if(p.keyCode==27){c("#popup_cancel").trigger("click")}});c("#popup_cancel").keypress(function(p){if(p.keyCode==13){c("#popup_cancel").trigger("click")}if(p.keyCode==27){c("#popup_cancel").trigger("click")}});if(k){c("#popup_prompt").val(k)}if(c.alerts.modal){d()}c("#popup_prompt").focus().select();break}if(c.alerts.draggable){try{c("#popup_container").draggable({handle:c("#popup_title")});c("#popup_title").css({cursor:"move"})}catch(l){}}return c("#popup_container")},_hide:function(){c("#popup_container").remove();if(c.alerts.modal){a()}c.alerts._overlay("hide")},_errtip:function(e){c("#popup_errortip").html(e).show()},_overlay:function(g){switch(g){case"show":c.alerts._overlay("hide");var l=c('<div id="popup_overlay"></div>').css({position:"fixed",zIndex:999,top:0,left:0,width:"100%",height:"100%",background:c.alerts.overlayColor,opacity:c.alerts.overlayOpacity}).appendTo(c("BODY"));var f=c('<iframe src="javascript:false;document.write(\'\');" class="popup_overlayiframe"></iframe>').css({opacity:0});var h=c.browser.msie&&(c.browser.version=="6.0")&&!c.support.style;if(h){l.html('<p style="width:100%;height:100%"/>').css("height",c(window).height()).css("width",c(window).width()).prepend(f);l=l.css({position:"absolute"})[0];try{for(var m in {Top:1,Left:1}){l.style.setExpression(m.toLowerCase(),"(_=(document.documentElement.scroll"+m+" || document.body.scroll"+m+"))+'px'")}}catch(k){}}break;case"hide":c("#popup_overlay").remove();break}},_timeid:0,_overShow:function(e,f){f=f||3000;c("#over_container").remove();c("body").append('<div id="over_container" style="display:none"><div id="over_message"></div></div>');c("#over_message").text(e).html(c("#over_message").text().replace(/\n/g,"<br />"));c("#over_container").show();clearTimeout(this._timeid);this._timeid=setTimeout(function(g){c("#over_container").hide("fast",function(){c(this).remove()})},f);return c("#over_container")},overAlert:function(f,e){return c.alerts._overShow(f,e)},_reposition:function(){var f=((c(window).height()/2)-(c("#popup_container").outerHeight()/2))+c.alerts.verticalOffset;var e=((c(window).width()/2)-(c("#popup_container").outerWidth()/2))+c.alerts.horizontalOffset;if(f<0){f=0}if(e<0){e=0}if(c.browser.msie&&parseInt(c.browser.version)<=6){f=f+c(window).scrollTop()}c("#popup_container").css({top:f+"px",left:e+"px"});c("#popup_overlay").height(c(document).height())},_maintainPosition:function(e){if(c.alerts.repositionOnResize){switch(e){case true:c(window).bind("resize",c.alerts._reposition);break;case false:c(window).unbind("resize",c.alerts._reposition);break}}}};c.fn.mTipHide=function(){if(c(this).data("mtip")){c(this).data("mtip").css("right",null);c(this).data("mtip").css("left","-1000px")}};c.fn.mTip=function(h,g,e){var g=g||"";var f='<div class="eject_container"><div class="eject"><p class="eject_position"></p><div class="eject_close btn_eject_close"><img title="关闭" src="http://images.mafengwo.net/images/wengweng/btn_close.gif" /></div><div><div class="eject_tit">'+h+'</div><div class="eject_ts">'+g+'</div></div><div class="m_t_10"></div></div></div>';return this.each(function(){var k=c(this).offset();var m=c(f);if(c(this).data("mtip")){if(e=="left"){c(this).data("mtip").css("left",null);c(this).data("mtip").css("right",c(this).data("pos")+"px")}else{c(this).data("mtip").css("left",c(this).data("pos")+"px")}if(h!=""){c(this).data("mtip").find("div.eject_tit").html(h)}if(g!=""){c(this).data("mtip").find("div.eject_ts").html(g)}return}c("BODY").append(m);m.hide().fadeIn("slow");m.find(".btn_eject_close").click(function(){m.css("right",null);m.css("left","-1000px")});if(e=="left"){var l=(c(window).width()-k.left)+10;m.find(".eject_position").addClass("eject_r");m.css({top:k.top+"px",right:l+"px"});c(this).data("pos",l)}else{if(e=="bottom"){m.find(".eject_position").addClass("eject_t");m.css({top:(k.top+c(this).outerHeight())+10+"px",left:k.left+"px"});c(this).data("pos",k.left)}else{if(e=="top"){m.find(".eject_position").addClass("eject_b");m.css({top:(k.top-m.outerHeight())-10+"px",left:k.left+"px"});c(this).data("pos",k.left)}else{m.find(".eject_position").addClass("eject_t");m.css({top:(k.top+c(this).outerHeight())+10+"px",left:k.left+"px"});c(this).data("pos",k.left)}}}c(this).data("mtip",m)})};mAlert=function(g,h,k,f,e){return c.alerts.alert(g,h,k,f,e)};mConfirm=function(g,k,h,f,e){return c.alerts.confirm(g,k,h,f,e)};mPrompt=function(f,k,g,h,e){return c.alerts.prompt(f,k,g,h,e)};mTinyAlert=function(e,f){return c.alerts.overAlert(e,f)};mFloatPanel=function(f,e){e=e||"top";return c("<div/>").appendTo(c("body")).addClass("floatpanel").html(f).addClass("floatpanel"+e)};mAjaxReplace=function(h,e,f,g){if(c(h).hasClass("moving")){return false}var g=g||"";if(g=="parent"){c(h).parent().hide()}else{c(h).hide()}c.post(e,f,function(k){if(k.ret==1){if(g=="parent"){c(h).parent().replaceWith(c(k.html).fadeIn(1500))}else{c(h).replaceWith(c(k.html).fadeIn(1500,function(){c(this).removeClass("moving")}).addClass("moving"))}}else{majaxerr(k)}},"json")};mSubStr=function(k,f){var e="";var g=0;for(var h=0;h<k.length;h++){if(k[h].match(/[^\x00-\xff]/ig)!=null){g+=2}else{g+=1}if(g>f){break}e+=k[h]}return e};c.fn.inputDefault=function(f){var e=f.ziClass||"gray";if(c(this).val().length==0){return this.focus(function(){if(c(this).hasClass(e)){c(this).val("").removeClass(e)}}).blur(function(){if(c.trim(c(this).val()).length==0){c(this).val(f.text).addClass(e)}}).val(f.text).addClass(e)}};c.fn.img2Bg=function(e){var e=e||{};return this.each(function(){var f=c(this).attr("img2")||e.url||"";if(f.length>0){c(this).data("ourl",c(this).attr("src"));c(this).mouseover(function(){c(this).attr("src",f)}).mouseout(function(){c(this).attr("src",c(this).data("ourl"))}).parent().focus(function(){c(this).trigger("blur")})}})};c.fn.selectInput=function(f){var e={};this.each(function(){var h=h||{};var g=h.def||"0";var l=c(this);var k=c(this);c(this).change(function(){if(c(this).val()==g){k=c('<input type="text" />').attr("name",c(this).attr("name")+"_i").attr("id",c(this).attr("id")+"_i").insertAfter(c(this)).dblclick(function(){l.show().children(":first-child").attr("selected","selected");c(this).hide()});c(this).hide()}});e.val=function(){if(l.is(":visible")){return l.val()}else{return k.val()}}});return e}})(jQuery);var _vs_fans_times=-999;function PK_n(a,f,d){var l='<div class="vs_fans"><div class="oneline"><div class="p_tit">下注彩金：</div><div class="p_rcon"><span class="h2"><select id="select_tipmoney"name="select2"size="1"class="input"><option>1000</option><option>2000</option><option>5000</option><option>8000</option><option>10000</option><option value="0">自定义</option></select></span><span class="ts" id="vs_fans_times">今日还可免费发起<span class="coin_t">0</span>次</span></div></div><div class="oneline"><div class="p_tit">选择粉丝：</div><div class="p_rcon"><input type="text"name="textfield"class="to_suggest"/></div></div><div class="oneline"><div class="p_tit">选择出拳：</div><div class="p_rcon"><a id="btn_1"href="javascript:void(0)"><img val="2" img2="http://file.mafengwo.net/images/game/handwar/man_s1_on.gif"src="http://file.mafengwo.net/images/game/handwar/man_s1.gif"width="120"height="120"border="0"title="剪子"/></a><a id="btn_2"href="javascript:void(0)"><img val="5" img2="http://file.mafengwo.net/images/game/handwar/man_s2_on.gif"src="http://file.mafengwo.net/images/game/handwar/man_s2.gif"width="120"height="120"border="0"title="包袱"/></a><a id="btn_3"href="javascript:void(0)"><img val="0" src="http://file.mafengwo.net/images/game/handwar/man_s3.gif"img2="http://file.mafengwo.net/images/game/handwar/man_s3_on.gif"width="120"height="120"border="0"title="锤"/></a></div></div><div class="oneline"><div class="p_tit">附言：</div><div class="p_rcon"><textarea name="textfield2"class="textfield_tosay"style="width:360px;"></textarea></div></div></div><div class="clr3"></div>';var f=f||false;var k=false;var e=false;var g=0;if(_vs_fans_times==-999){_vs_fans_times=parseInt(a)}if(parseInt(_vs_fans_times)<=-50){mAlert("今天你不能挑战了，明天再来吧~~");return}var c=mAlert(l,"挑战我的粉丝",function(){var n=parseInt(h.val());if(isNaN(n)||n<1000||n>10000){return"请输入1000-10000的整数"}if(!k){return"请选择出拳"}if(!f&&c.find("input.input_viled").length==0){return"请选择粉丝"}if(!e){e=true;var o=b.val;var m=0;if(f){m=f}else{m=c.find(".to_suggest").data("val")}var p=c.find("textarea").val();jQuery.getJSON("/ajax/ajax_wagerother.php",{touid:m,wagerid:o,challengeflg:"challenge",cash:n,msg:p},function(q){if(q.ret==1){mTinyAlert(q.msg||"操作成功！");if(typeof(d)=="function"){d(q.usercash)}}else{mAlert(q.msg||"操作失败！")}_vs_fans_times=parseInt(q.leavenum);e=false})}return true},-1).css({width:"500px",marginLeft:"-250px"}).find("textarea").inputDefault({text:"就想和你赌一把！"}).end();if(f){c.find(".to_suggest").parent().parent().remove()}else{c.find(".to_suggest").suggest("/ajax/ajax_suggest.php?type=fans")}var h=c.find("#select_tipmoney").selectInput();var b={};c.find("img").click(function(){k=true;if(b.url){b.obj.attr("src",b.url)}b.obj=jQuery(this);b.url=jQuery(this).attr("src");b.val=jQuery(this).attr("val");jQuery(this).attr("src",jQuery(this).attr("img2"))}).parent().focus(function(){jQuery(this).trigger("blur")});if(_vs_fans_times>0){jQuery("#vs_fans_times").html('今日还可免费发起<span class="coin_t">'+_vs_fans_times+"</span>次")}else{if(_vs_fans_times>-50){jQuery("#vs_fans_times").html('每交1000金币挑战1次，今日还可发起<span class="coin_t">'+(_vs_fans_times+50)+"</span>次")}else{jQuery("#vs_fans_times").html("今日你不能发起挑战了")}}}(function(a){a.suggest=function(q,f){var b=a(q).attr("autocomplete","off");var d;var p=false;var c=0;var s=[];var r=0;if(a.trim(b.val())==""||a.trim(b.val())=="中文/拼音"){b.val("中文/拼音").css("color","#aaa")}if(!f.attachObject){f.attachObject=a(document.createElement("ul")).appendTo("body")}d=a(f.attachObject);a("."+f.resultsClass).remove();d.addClass(f.resultsClass);k();a(window).scroll(function(){k()});a(window).load(k).resize(k);b.blur(function(){setTimeout(function(){d.hide()},200)});b.focus(function(){if(a.trim(a(this).val())=="中文/拼音"){a(this).val("")}k()});b.click(function(){var e=a.trim(a(this).val());h(e);a(this).select()});try{d.bgiframe()}catch(u){}b.keyup(o);function k(){var e=b.offset();d.css({top:(e.top+q.offsetHeight)+"px",left:e.left+"px"})}function o(z){if((/27$|38$|40$/.test(z.keyCode)&&d.is(":visible"))||(/^13$|^9$/.test(z.keyCode)&&w())){if(z.preventDefault){z.preventDefault()}if(z.stopPropagation){z.stopPropagation()}z.cancelBubble=true;z.returnValue=false;switch(z.keyCode){case 38:m();break;case 40:v();break;case 13:t();break;case 27:d.hide();break}}else{if(b.val().length!=c){b.css("color","#aaa").removeClass("input_viled");if(p){clearTimeout(p)}p=setTimeout(n,f.delay);c=b.val().length}else{d.show()}}}function x(z){for(var e=0;e<s.length;e++){if(s[e]["k"]==z){s.unshift(s.splice(e,1)[0]);return s[0]["items"]}}return false}function g(B,z,e){while(s.length&&(r+z>f.maxCacheSize)){var A=s.pop();r-=A.size}s.push({k:B,size:z,items:e});r+=z}function n(){var e=a.trim(b.val());h(e)}function l(B,A){var z="";if(B.length){for(var e=0;e<B.length;e++){z+='<li rel="'+B[e].name+'"><img align="absmiddle" src="'+B[e].logo+'"/><span val="'+B[e].userid+'">'+B[e].name+"</span></li>"}z='<div class="gray ac_result_tip">'+A+"，按拼音排序</div><ul>"+z+"</ul>"}else{suggest_tip='<div class="gray ac_result_tip">对不起，找不到：'+A+"</div>";z=suggest_tip+"<ul>"+z+"</ul>"}y(z)}function h(z){if(z!=""){var e=x(z);if(e){l(e,z)}else{a.getJSON(f.source,{k:z},function(A){l(A,z);g(z,A.length,A)})}}else{y('<div class="gray ac_result_tip">请输入中文/拼音或者↑↓选择</div>')}return}function y(e){d.html(e).show();d.children("ul").children("li:first-child").addClass(f.selectClass);d.children("ul").children("li").mouseover(function(){d.children("ul").children("li").removeClass(f.selectClass);a(this).addClass(f.selectClass)}).click(function(z){z.preventDefault();z.stopPropagation();t()})}function w(){if(!d.is(":visible")){return false}var e=d.children("ul").children("li."+f.selectClass);if(!e.length){e=false}return e}function t(){$currentResult=w();if($currentResult){b.val($currentResult.children("span").html().replace(/<span>.+?<\/span>/i,""));b.data("val",$currentResult.children("span").attr("val"));c=b.val().length;d.hide();b.css("color","#000").addClass("input_viled");if(a(f.dataContainer)){a(f.dataContainer).val($currentResult.attr("rel"))}if(f.onSelect){f.onSelect.apply(b[0],[$currentResult.children("span").attr("val")])}}}function v(){$currentResult=w();if($currentResult&&$currentResult.next().length){$currentResult.removeClass(f.selectClass).next().addClass(f.selectClass)}else{d.children("ul").children("li:last-child").removeClass(f.selectClass).end().children("li:first-child").addClass(f.selectClass)}}function m(){$currentResult=w();if($currentResult&&$currentResult.prev().length){$currentResult.removeClass(f.selectClass).prev().addClass(f.selectClass)}else{d.children("ul").children("li:first-child").removeClass(f.selectClass).end().children("li:last-child").addClass(f.selectClass)}}};a.fn.suggest=function(c,b){if(!c){return}b=b||{};b.source=c;b.hot_list=b.hot_list||[];b.delay=b.delay||200;b.resultsClass=b.resultsClass||"ac_results";b.selectClass=b.selectClass||"ac_over";b.matchClass=b.matchClass||"ac_match";b.minchars=b.minchars||1;b.delimiter=b.delimiter||"\n";b.onSelect=b.onSelect||false;b.dataDelimiter=b.dataDelimiter||"\t";b.dataContainer=b.dataContainer||"#SuggestResult";b.attachObject=b.attachObject||null;b.maxCacheSize=65536;this.each(function(){new a.suggest(this,b)});return this}})(jQuery);if(jQuery){(function(a){a.extend(a.fn,{uploadify:function(b){a(this).each(function(){settings=a.extend({id:a(this).attr("id"),uploader:"uploadify.swf",script:"uploadify.php",expressInstall:null,folder:"",height:21,width:52,cancelImg:"cancel.png",wmode:"opaque",scriptAccess:"sameDomain",fileDataName:"Filedata",method:"POST",queueSizeLimit:1,simUploadLimit:1,queueID:false,displayData:"percentage",onInit:function(){},onSelect:function(){},onQueueFull:function(){},onCheck:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},b);var e=location.pathname;e=e.split("/");e.pop();e=e.join("/")+"/";var f={};f.uploadifyID=settings.id;f.pagepath=e;if(settings.buttonImg){f.buttonImg=escape(settings.buttonImg)}if(settings.buttonText){f.buttonText=escape(settings.buttonText)}if(settings.rollover){f.rollover=true}f.script=settings.script;f.folder=escape(settings.folder);if(settings.scriptData){var g="";for(var d in settings.scriptData){g+="&"+d+"="+settings.scriptData[d]}f.scriptData=escape(g.substr(1))}f.width=settings.width;f.height=settings.height;f.wmode=settings.wmode;f.method=settings.method;f.queueSizeLimit=settings.queueSizeLimit;f.simUploadLimit=settings.simUploadLimit;if(settings.hideButton){f.hideButton=true}if(settings.fileDesc){f.fileDesc=settings.fileDesc}if(settings.fileExt){f.fileExt=settings.fileExt}if(settings.multi){f.multi=true}if(settings.auto){f.auto=true}if(settings.sizeLimit){f.sizeLimit=settings.sizeLimit}if(settings.checkScript){f.checkScript=settings.checkScript}if(settings.fileDataName){f.fileDataName=settings.fileDataName}if(settings.queueID){f.queueID=settings.queueID}if(settings.onInit()!==false){a(this).css("display","none");a(this).after('<div id="'+a(this).attr("id")+'Uploader"></div>');swfobject.embedSWF(settings.uploader,settings.id+"Uploader",settings.width,settings.height,"9.0.24",settings.expressInstall,f,{quality:"high",wmode:settings.wmode,allowScriptAccess:settings.scriptAccess});if(settings.queueID==false){a("#"+a(this).attr("id")+"Uploader").after('<div id="'+a(this).attr("id")+'Queue" class="uploadifyQueue"></div>')}}if(typeof(settings.onOpen)=="function"){a(this).bind("uploadifyOpen",settings.onOpen)}a(this).bind("uploadifySelect",{action:settings.onSelect,queueID:settings.queueID},function(l,h,k){if(l.data.action(l,h,k)!==false){var m=Math.round(k.size/1024*100)*0.01;var n="KB";if(m>1000){m=Math.round(m*0.001*100)*0.01;n="MB"}var o=m.toString().split(".");if(o.length>1){m=o[0]+"."+o[1].substr(0,2)}else{m=o[0]}if(k.name.length>16){fileName=k.name.substr(0,15)+"..."}else{fileName=k.name}queue="#"+a(this).attr("id")+"Queue";if(l.data.queueID){queue="#"+l.data.queueID}a(queue).append('<div id="'+a(this).attr("id")+h+'" class="uploadifyQueueItem">								<div class="cancel">									<!--<a href="javascript:jQuery(\'#'+a(this).attr("id")+"').uploadifyCancel('"+h+'\')"><img src="'+settings.cancelImg+'" border="0" /></a>-->								</div>								<span class="fileName">'+fileName+" ("+m+n+')</span><span class="percentage"></span>								<div class="uploadifyProgress">									<div id="'+a(this).attr("id")+h+'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div>								</div>							</div>')}});if(typeof(settings.onSelectOnce)=="function"){a(this).bind("uploadifySelectOnce",settings.onSelectOnce)}a(this).bind("uploadifyQueueFull",{action:settings.onQueueFull},function(h,k){if(h.data.action(h,k)!==false){alert("The queue is full.  The max size is "+k+".")}});a(this).bind("uploadifyCheckExist",{action:settings.onCheck},function(o,n,m,l,q){var k=new Object();k=m;k.folder=e+l;if(q){for(var h in m){var p=h}}a.post(n,k,function(t){for(var r in t){if(o.data.action(o,n,m,l,q)!==false){var s=confirm("Do you want to replace the file "+t[r]+"?");if(!s){document.getElementById(a(o.target).attr("id")+"Uploader").cancelFileUpload(r,true,true)}}}if(q){document.getElementById(a(o.target).attr("id")+"Uploader").startFileUpload(p,true)}else{document.getElementById(a(o.target).attr("id")+"Uploader").startFileUpload(null,true)}},"json")});a(this).bind("uploadifyCancel",{action:settings.onCancel},function(n,h,m,o,l){if(n.data.action(n,h,m,o,l)!==false){var k=(l==true)?0:250;a("#"+a(this).attr("id")+h).fadeOut(k,function(){a(this).remove()})}});if(typeof(settings.onClearQueue)=="function"){a(this).bind("uploadifyClearQueue",settings.onClearQueue)}var c=[];a(this).bind("uploadifyError",{action:settings.onError},function(n,h,m,l){if(n.data.action(n,h,m,l)!==false){var k=new Array(h,m,l);c.push(k);a("#"+a(this).attr("id")+h+" .percentage").text(" - "+l.type+" Error");a("#"+a(this).attr("id")+h).addClass("uploadifyError")}});a(this).bind("uploadifyProgress",{action:settings.onProgress,toDisplay:settings.displayData},function(l,h,k,m){if(l.data.action(l,h,k,m)!==false){a("#"+a(this).attr("id")+h+"ProgressBar").css("width",m.percentage+"%");if(l.data.toDisplay=="percentage"){displayData=" - "+m.percentage+"%"}if(l.data.toDisplay=="speed"){displayData=" - "+m.speed+"KB/s"}if(l.data.toDisplay==null){displayData=" "}a("#"+a(this).attr("id")+h+" .percentage").text(displayData)}});a(this).bind("uploadifyComplete",{action:settings.onComplete},function(m,h,l,k,n){if(m.data.action(m,h,l,unescape(k),n)!==false){a("#"+a(this).attr("id")+h+" .percentage").text(" - Completed");a("#"+a(this).attr("id")+h).fadeOut(250,function(){a(this).remove()})}});if(typeof(settings.onAllComplete)=="function"){a(this).bind("uploadifyAllComplete",{action:settings.onAllComplete},function(h,k){if(h.data.action(h,k)!==false){c=[]}})}})},uploadifySettings:function(f,k,c){var g=false;a(this).each(function(){if(f=="scriptData"&&k!=null){if(c){var l=k}else{var l=a.extend(settings.scriptData,k)}var n="";for(var m in l){n+="&"+m+"="+escape(l[m])}k=n.substr(1)}g=document.getElementById(a(this).attr("id")+"Uploader").updateSettings(f,k)});if(k==null){if(f=="scriptData"){var b=unescape(g).split("&");var e=new Object();for(var d=0;d<b.length;d++){var h=b[d].split("=");e[h[0]]=h[1]}g=e}return g}},uploadifyUpload:function(b){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").startFileUpload(b,false)})},uploadifyCancel:function(b){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").cancelFileUpload(b,true,false)})},uploadifyClearQueue:function(){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").clearFileUploadQueue(false)})}})})(jQuery)}(function(a){a.fn.slt=function(c,b){return this.each(function(){var d;var f="";a(this).click(g);function g(){a("#liandong_select ul li").die();a("#liandong_select").remove();d=a(this).attr("id");var n=a(this).offset();var m=n.left;var k=n.top+20;var o="<div id='liandong_select'><span><a id='fh'>返回顶层列表</a><a id='gb'>[&nbsp;关闭&nbsp;]</a></span><div class='c'><ul></ul></div><div style='clear:both;'></div></div>";areasLen=b.length;var l="";for(var h=0;h<areasLen;h++){l=l+"<li title='"+b[h][1]+"' id='p"+b[h][0]+"'>"+b[h][1]+"</li>"}a("body").append(o);a("#liandong_select ul").append(l);a("#liandong_select").css({left:m+"px",top:k+"px"});a("#liandong_select span a#fh").bind("click",function(){a("#liandong_select ul").empty();a("#liandong_select ul").append(l);f=""});a("#liandong_select span a#gb").bind("click",function(){a("#liandong_select").remove()});a("#liandong_select ul li").live("click",e)}function e(){var l=a(this).attr("id");var k=f.length>0?f+">"+a(this).text():a(this).text();f=k;var h=c[l];if(h==undefined||h==""){a("#"+d+"Val").val(l.substr(1));a("#"+d).val(k);a("#liandong_select").css("display","none");f=""}else{listr="";pLen=h.length;for(j=0;j<pLen;j++){if("p"+h[j][0]==l){listr=listr+"<li title='"+h[j][1]+"' id='p"+h[j][0]+"' >"+h[j][1]+"</li>"}else{listr=listr+"<li title='"+h[j][1]+"' id='p"+h[j][0]+"'>"+h[j][1]+"</li>"}}a("#liandong_select ul").empty();a("#liandong_select ul").append(listr)}}})}})(jQuery);(function(a){a.fn.UpNum=function(d,e,b,c){return this.each(function(){var g=a(this).offset();var l=Math.round(g.left)+"px";var h=Math.round(g.top)+"px";if(d.toString().indexOf("-")==0){var m=Math.round(g.top)+30+"px"}else{var m=Math.round(g.top)-30+"px"}var f="20px";if(b){f=b}c=c||"120";var k=d||a(this).attr("money");a("<div/>").appendTo(a("body")).addClass("numeric").css({position:"absolute",top:h,left:l,color:(d.toString().indexOf("-")==0)?"#333":"red",fontFamily:"Georgia",fontSize:f,zIndex:c}).html(k).animate({top:m},{duration:1000,complete:function(){a(this).remove();if(e){e()}}})})}})(jQuery);(function(a){adf=function(d,c,b){mAjaxReplace(d,"/ajax/addfriend.php",{action:"addfollow",type:b,touid:c,_need_cstk:true})};def=function(d,c,b){mAjaxReplace(d,"/ajax/addfriend.php",{action:"delfriend",type:b,touid:c,_need_cstk:true})};m_lmsg=function(f,d,c){var b={url:"/ajax/ajax_send.php",content:"",_need_cstk:true};if(!c){c="bottom"}if(typeof(d)=="object"){a.extend(b,d)}var g=(typeof(b.word)!="undefined");var e="";if(g&&false){e='<textarea class="atsb_input">'+b.word+'</textarea><div class="atsb_h35"><div class="flt1"><input type="checkbox" value=""/>&nbsp;&nbsp;悄悄话</div><div class="flt2"><input type="button" class="btn_orange" value="确定"/></div></div>'}else{e='<textarea class="atsb_input"></textarea><input type="button" class="btn_orange" value="确定"/>'}a(f).mTip("<div class='atsb_tit'>留言</div>",e,c).data("mtip").find("div.eject").css("width",270).find("input.btn_orange").click(function(){var k=a.trim(a(f).data("mtip").find("textarea").val());var h=a(f).data("mtip").find(":checked").length;if(h&&true){b.type="msg"}if(k.length>0){a.extend(b,{content:k});a.post(b.url,b,function(l){if(l.ret==1){a(f).mTipHide();mTinyAlert("操作成功！")}else{majaxerr(l)}},"json")}else{mAlert("你还是写俩字吧")}}).end().find(":checkbox").click(function(){var h=a(f).data("mtip").find("textarea").val().replace(b.word,"");if(!a(this).is(":checked")){a(f).data("mtip").find("textarea").val(b.word+h)}else{a(f).data("mtip").find("textarea").val(h)}});setTimeout(function(){a(f).data("mtip").find("textarea").trigger("focus")[0].value+=""},20)};m_smsg=function(d,c){var b={url:"/ajax/ajax_send.php",_need_cstk:true};if(typeof(c)=="object"){a.extend(b,c)}a(d).mTip("<div class='atsb_tit'>发送消息</div>",'<textarea class="atsb_input"></textarea><div class="atsb_h35"><input type="button" class="btn_orange" value="确定"/></div>',"bottom").data("mtip").find("div.eject").css("width",270).find("input.btn_orange").click(function(){var e=a.trim(a(this).parent().prev().val());if(e.length>0){a.extend(b,{content:e});a.post(b.url,b,function(f){if(f.ret==1){a(d).mTipHide();mTinyAlert("操作成功！")}else{majaxerr(f)}},"json")}else{mAlert("空消息是不能发送的")}})}})(jQuery);function majaxerr(a,b){if(a.ret=="-1"){window.location.href="http://passport.mafengwo.cn"}else{mAlert("<div class=''>"+(a.msg||jQuery.asset.Err)+"</div>","",function(){if(typeof(b)=="function"){b()}})}}jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,n,m){var k=1.70158;var l=0;var g=n;if(h==0){return e}if((h/=m)==1){return e+n}if(!l){l=m*0.3}if(g<Math.abs(n)){g=n;var k=l/4}else{var k=l/(2*Math.PI)*Math.asin(n/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*m-k)*(2*Math.PI)/l))+e},easeOutElastic:function(f,h,e,n,m){var k=1.70158;var l=0;var g=n;if(h==0){return e}if((h/=m)==1){return e+n}if(!l){l=m*0.3}if(g<Math.abs(n)){g=n;var k=l/4}else{var k=l/(2*Math.PI)*Math.asin(n/g)}return g*Math.pow(2,-10*h)*Math.sin((h*m-k)*(2*Math.PI)/l)+n+e},easeInOutElastic:function(f,h,e,n,m){var k=1.70158;var l=0;var g=n;if(h==0){return e}if((h/=m/2)==2){return e+n}if(!l){l=m*(0.3*1.5)}if(g<Math.abs(n)){g=n;var k=l/4}else{var k=l/(2*Math.PI)*Math.asin(n/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*m-k)*(2*Math.PI)/l))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*m-k)*(2*Math.PI)/l)*0.5+n+e},easeInBack:function(e,f,a,k,h,g){if(g==undefined){g=1.70158}return k*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,k,h,g){if(g==undefined){g=1.70158}return k*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,k,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return k/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return k/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});function mGetTip(b){var a={url:"/recnew/ajax_addfds.php"};jQuery.extend(a,b);jQuery.post(a.url,a,function(c){if(c.ret==1){mTinyAlert(c.msg);if(a.reload){setTimeout(function(){top.location.reload()},1000)}}else{majaxerr(c)}},"json")}(function($){mGG=function(cnt,w){w+=4;$("<div class='mfwGG'><div class='mfwGGContent'>"+cnt+"</div><a alt='关闭' href='javascript:void(0)' class='mfwGGCloseBtn'>关闭</a></div>").appendTo($("body")).css({width:w+"px",marginLeft:"-"+w/2+"px"}).find(".mfwGGCloseBtn").click(function(){$(this).parent().fadeOut(400,function(){$(this).remove();$.alerts._overlay("hide")})});$.alerts._overlay("show")};Ding=function(iid,num,thisid,obj){$(obj).blur();if(!$(obj).data("inited")){if($(obj).closest(".float-bar").size()>0){$("#float_topvote"+thisid).UpNum("+1",function(){$("#float_topvote"+thisid).html(num+1)})}$("#topvote"+thisid).UpNum("+1",function(){$("#topvote"+thisid).html(num+1)});$.post("/group/ajax_infovote.php",{iid:iid},function(d){},"json")}$(obj).data("inited",true)};PH=function(select){return;jQuery(select).hover(function(){jQuery(this).attr({title:""});var _of=jQuery(this).offset();var _json=eval("("+jQuery(this).attr("tip")+")");var _sextxt="神秘人士";if(_json.city!=""){_json.city+="的"}if(_json.sex==1){_sextxt="帅哥"}if(_json.sex==0){_sextxt="美女"}var _atip=jQuery("<div class='mfwPH'><div class='mfwPHContent'><img align='middle' width='48' border='0' height='48' src='"+_json.logo+"'/></div><div class='mfwPHContentTxt'>"+_json.city+_sextxt+"</div></div>").appendTo(jQuery("body"));_atip.css({position:"absolute",zIndex:"50000",top:(_of.top-_atip.outerHeight())+"px",left:(_of.left+jQuery(this).outerWidth())+"px"}).fadeIn(400);jQuery(this).data("atip",_atip);return;_atip.css({position:"absolute",display:"none",zIndex:"50000",top:(jQuery(this).offset().top-_atip.outerHeight())+"px",left:(jQuery(this).offset().left+_atip.outerWidth())+"px"}).stop().fadeIn(400);jQuery(this).data("atip",_atip)},function(){jQuery(this).data("atip").remove()})}})(jQuery);(function(a){var b={"default":{template:{container:'<div align="right" class="paginator"></div>',loop:'<a class="ti" href="{url}" style="margin:2px;">{page}</a>',firstpage:'<a class="ti" href="{url}"><< First</a>',lastpage:'<a class="ti" href="{url}">Next >></a>',dot:'<a class="ti" href="javascript:void(0)">…</a>'},handle:function(s,l,d){d.recordcount=parseInt(d.recordcount);d.pagesize=parseInt(d.pagesize);d.nowpage=parseInt(d.nowpage);var u=Math.floor(d.recordcount/d.pagesize)+(d.recordcount%d.pagesize?1:0);if(u<2){return}d.nowpage=d.nowpage>u?u:d.nowpage;var p=a(s.container);var g=a(s.firstpage.replace(/{url}/,c(d.url,d.pageparameter,1)));var f=a(s.lastpage.replace(/{url}/,c(d.url,d.pageparameter,d.nowpage==u?d.nowpage:d.nowpage+1)));if(d.nowpage>1){p.append(g)}var h=1,o=u,k=false,n=true,r=true;if(u>10){o=d.nowpage+4;h=d.nowpage-4;if(d.nowpage+4>=u){o=u;h=o-8;r=false}if(d.nowpage-4<=1){h=1;o=h+8;n=false}k=true}for(var m=h,q=1;m<=o;m++,q++){var e;if(k){e=a(s.loop.replace(/{url}/g,c(d.url,d.pageparameter,m)).replace(/{page}/g,m));if(a.inArray(q,[1,2])>-1){e=a(s.loop.replace(/{url}/g,c(d.url,d.pageparameter,q)).replace(/{page}/g,q))}if(a.inArray(q,[8,9])>-1){e=a(s.loop.replace(/{url}/g,c(d.url,d.pageparameter,u+q-9)).replace(/{page}/g,u+q-9))}if(q==3&&n){p.append(a(s.dot))}if(q==8&&r){p.append(a(s.dot))}}else{e=a(s.loop.replace(/{url}/g,c(d.url,d.pageparameter,m)).replace(/{page}/g,m))}if(m==d.nowpage){e.css({"background-color":"#946400",border:"1px solid #8B4505",color:"#FFFFFF"}).attr("href","javascript:void(0)")}p.append(e)}if(d.nowpage<u){p.append(f)}l.html("");a(p).appendTo(l)}},tiny:{template:{container:'<div align="right" class="paginator"></div>',firstpage:'<a class="ti" href="{url}">&lt;&lt;</a>',lastpage:'<a class="ti" href="{url}">&gt;&gt;</a>',loop:'<a class="ti" href="{url}" style="margin:2px;">{page}</a>'},handle:function(p,l,e){e.recordcount=parseInt(e.recordcount);e.pagesize=parseInt(e.pagesize);e.nowpage=parseInt(e.nowpage);var q=Math.floor(e.recordcount/e.pagesize)+(e.recordcount%e.pagesize?1:0);if(q<2){return}e.nowpage=e.nowpage>q?q:e.nowpage;var o=a(p.container);var g=a(p.firstpage.replace(/{url}/,c(e.url,e.pageparameter,1)));var f=a(p.lastpage.replace(/{url}/,c(e.url,e.pageparameter,e.nowpage==q?e.nowpage:e.nowpage+1)));if(e.nowpage>1){o.append(g)}var h=1,n=q,d=false;if(q>5){d=true;n=e.nowpage+2;h=e.nowpage-2;if(e.nowpage+2>=q){n=q;h=n-4;d=false}if(e.nowpage-2<=1){h=1;n=h+4}}for(var m=h;m<=n;m++){_loop=a(p.loop.replace(/{url}/g,c(e.url,e.pageparameter,m)).replace(/{page}/g,m));if(m==e.nowpage){_loop.css({"background-color":"#946400",border:"1px solid #8B4505",color:"#FFFFFF"}).attr("href","javascript:void(0)")}o.append(_loop)}if(d){var k=e.nowpage+5;if(k>q){k=q}o.append('<a class="ti" style="margin:2px;" href="'+c(e.url,e.pageparameter,k)+'">...</a>')}if(e.nowpage<q){o.append(f)}l.html("");a(o).appendTo(l)}},index:{template:{container:'<div align="right" class="paginator"></div>',firstpage:'<a class="ti" href="{url}">&lt;&lt;prev</a>',lastpage:'<a class="ti" href="{url}">next&gt;&gt;</a>',loop:'<a class="ti" href="{url}" style="margin:2px;">{page}</a>'},handle:function(p,l,e){e.recordcount=parseInt(e.recordcount);e.pagesize=parseInt(e.pagesize);e.nowpage=parseInt(e.nowpage);var q=Math.floor(e.recordcount/e.pagesize)+(e.recordcount%e.pagesize?1:0);if(q<2){return}e.nowpage=e.nowpage>q?q:e.nowpage;var o=a(p.container);var g=a(p.firstpage.replace(/{url}/,c(e.url,e.pageparameter,e.nowpage-1)));var f=a(p.lastpage.replace(/{url}/,c(e.url,e.pageparameter,e.nowpage==q?e.nowpage:e.nowpage+1)));if(e.nowpage>1){o.append(g)}var h=1,n=q,d=false;if(q>9){d=true;n=e.nowpage+4;h=e.nowpage-4;if(e.nowpage+4>=q){n=q;h=n-8;d=false}if(e.nowpage-4<=1){h=1;n=h+8}}for(var m=h;m<=n;m++){_loop=a(p.loop.replace(/{url}/g,c(e.url,e.pageparameter,m)).replace(/{page}/g,m));if(m==e.nowpage){_loop.css({"background-color":"#946400",border:"1px solid #8B4505",color:"#FFFFFF"}).attr("href","javascript:void(0)")}o.append(_loop)}if(d){var k=e.nowpage+9;if(k>q){k=q}o.append('<a class="ti" style="margin:2px;" href="'+c(e.url,e.pageparameter,k)+'">...</a>')}if(e.nowpage<q){o.append(f)}l.html("");a(o).appendTo(l)}}};function c(d,f,g){var e=new RegExp("([?&])"+f+"=\\d*","g");d=d.replace(e,"$1");return(d+(d.indexOf("?")>-1?"&":"?")+f+"="+g).replace(/&+/g,"&").replace(/\?&/g,"?")}a.fn.Pager=function(d){var f={pagesize:10,nowpage:1,recordcount:100,url:window.location.href.toString(),pageparameter:"page",config:"default"};var e=a.extend(f,d||{});return this.each(function(){var g=b[e.config]||b["default"];g.handle(g.template,a(this),e)})}})(jQuery);(function(b){MAJAXBUSY=false;var a={"23":"快长大吧！","20":"虎年能吃能赚！","26":"其实。。那个。。","27":"赚钱千日供此浪漫一时！","28":"赶快给换上！","29":"这只是开始！","30":"洗洗更健康！","31":"总入不敷出也不行！","32":"要有房！要有车！","33":"放下武器，舍身成佛！"};mCsend=function(c){if(MAJAXBUSY){return}MAJAXBUSY=true;b.post("/goods/ajax.php",{act:"htmlsentgift",typeid:19},function(f){MAJAXBUSY=false;var e=mAlert(f.html,"赠送礼物",function(){if(MAJAXBUSY){return}if(typeof(c)=="undefined"&&e.find("input.input_viled").length==0){return"请选择粉丝"}if(e.find("li.on").length==0){return"请选择礼物"}var k="";if(c){k=c}else{k=b("#ipt_fans").data("val")}var h=e.find("li.on").attr("gid");var g=e.find("textarea").val();var d=e.find(":checked").length;MAJAXBUSY=true;b.post("/goods/ajax.php",{act:"sendgift",touid:k,gid:h,msg:g,anony:d},function(l){MAJAXBUSY=false;if(l.ret==1){mTinyAlert(l.msg);if(window.location.href.toString().indexOf("http://www.mafengwo.cn/u/")==0){setTimeout(function(){window.location.reload()},1500)}}else{majaxerr(l)}},"json");return true}).css({width:"500px",marginLeft:"-250px",position:"absolute",top:"17%"});e.find("li").click(function(){e.find("li.on").removeClass("on");b(this).addClass("on");var d=b(this).attr("gid");if(e.find("textarea").hasClass("gray")){if(a[d]){e.find("textarea").unbind("focus");e.find("textarea").unbind("blur");e.find("textarea").val(a[d]).inputDefault({text:a[d]})}}});e.find("textarea").inputDefault({text:"哥送的不是礼物，是寂寞！"});if(c){b("#ipt_fans").parent().parent().hide()}else{b("#ipt_fans").suggest("/ajax/ajax_suggest.php?type=fans")}},"json")};mGetGift=function(c){if(MAJAXBUSY){return}MAJAXBUSY=true;jQuery.post("/goods/ajax.php",{act:"getgift",ugid:c},function(e){MAJAXBUSY=false;if(e.ret==1){if(e.msg=="key555"){mAlert("恭喜，从"+e.html+"里掏出了铜钥匙！")}else{if(e.msg=="key888"){mAlert("恭喜，从"+e.html+"里掏出了金钥匙！")}else{mAlert("恭喜，从"+e.html+"里掏出"+e.msg+"金币！")}}}else{majaxerr(e)}},"json")};mGapple=function(){if(MAJAXBUSY){return}MAJAXBUSY=true;jQuery.post("/goods/ajax.php",{act:"apple"},function(c){MAJAXBUSY=false;if(c.ret==1){mAlert("恭喜您成功领取平安果和18888金币，在此马蜂窝全体圣斗士祝您平安夜快乐，圣诞快乐！","领取成功",function(){window.location.reload()});jQuery("#popup_close").hide()}else{majaxerr(c)}},"json")}})(jQuery);jQuery(function(){jQuery("#pnl_xmastree").unbind("click");jQuery("#pnl_xmastree").click(function(){if(jQuery("#pnl_xmastree").data("click")){}else{jQuery("#pnl_xmastree").data("click",true);var a=jQuery(this).attr("tid");jQuery.post("/goods/ajax.php",{act:"yao",ugid:a},function(b){if(b.ret==1){if(typeof(xnfeed)=="function"){xnfeed()}mAlert("恭喜，你摇出了"+b.msg+"金币！")}else{if(b.ret==3){mConfirm("只有粉丝才能摇TA家的树，现在就成为TA的粉丝吧？",function(c){if(c){jQuery.post("/ajax/addfriend.php",{action:"addfollow",type:"attfri",touid:b.msg,_need_cstk:true},function(d){if(d.ret==1){mTinyAlert("操作成功！")}else{majaxerr(d)}},"json")}},"成为TA的粉丝")}else{majaxerr(b)}}jQuery("#pnl_xmastree").data("click",false)},"json")}})});Scroll=function(a){this.oNote=jQuery("#"+a.elid)||null;this.height=a.lineHeight||15;this.count=a.displayCount||1;this.delay=a.delay||5;this.delay=(this.delay||1)*1000;this.interval=new Array();this.scrollNum=a.scrollNum||this.count;this.scrollHeight=this.height*this.scrollNum;this.oHeight=this.height*this.count;this.ctrl=a.ctrl||null;this.running=false;this.init()};Scroll.prototype={start:function(b){var a=this;if(this.oNote.attr("scrollHeight")-this.oHeight<=this.oNote.attr("scrollTop")){this.oNote.attr("scrollTop",this.oNote.attr("scrollHeight")/2-this.oHeight)}this.clear_interval(1);this.interval[1]=setInterval(function(){a.scroll_note(b)},5)},scroll_note:function(a){if(a){this.oNote[0].scrollTop++}else{this.oNote[0].scrollTop--}this.running=true;if(this.oNote[0].scrollTop%this.scrollHeight==0){this.clear_interval(1);this.running=false}},set_interval:function(){var a=this;this.interval[0]=setInterval(function(){a.start(true)},this.delay)},clear_interval:function(a){clearInterval(this.interval[a])},init:function(){var a=this;var b=this.oNote.html();this.oNote.html(b+b);this.oNote.css("height",this.oHeight);this.oNote.css("overflow","hidden");this.oNote.css("padding","0px");this.oNote.find("li").css("margin","0px");this.oNote.attr("scrollTop","0px");if(this.oNote.attr("scrollHeight")>this.oHeight){this.oNote.mouseover(function(){a.clear_interval(0)});this.oNote.mouseout(function(){a.set_interval()});if(this.ctrl){this.ctrl[0].mouseover(function(){a.clear_interval(0)});this.ctrl[0].mouseout(function(){a.set_interval()});this.ctrl[1].mouseover(function(){a.clear_interval(0)});this.ctrl[1].mouseout(function(){a.set_interval()});this.ctrl[0].click(function(){a.start(false)});this.ctrl[1].click(function(){a.start(true)})}this.set_interval()}else{if(this.ctrl){this.ctrl[0].hide();this.ctrl[1].hide()}}}};jQuery(function(){if(!jQuery("#pnl_notice").is(":visible")){jQuery("#pnl_notice").show();new Scroll({elid:"pnl_notice",lineHeight:25,scrollNum:1})}});(function(a){a.fn.LoadImage=function(b){b=a.extend({loadpic:"",w:530,h:350},b);return this.each(function(){a.fn.LoadImage.Showimg(a(this),b)})};a.fn.LoadImage.Showimg=function(d,c){var e=d.attr("src");var b=new Image();b.src=e;d.attr("src","");var f=a('<div><img width="'+c.w+'" height="'+c.h+'" src="'+c.loadpic+'" /><img src="http://file.mafengwo.cn/images/plugins/loading_blue.gif" /></div>').appendTo(a("body")).css({position:"absolute",top:d.offset().top,left:d.offset().left});d.hide();if(!b.complete){jQuery(b).bind("error load onreadystatechange",function(){f.remove();d.attr("src",e);d.show()})}else{f.remove();d.attr("src",e);d.show()}}})(jQuery);var mfw_poke=function(a){var b=mAlert('<label style="cursor:pointer" for="pokeitem_1"><input id="pokeitem_1" type="radio" checked="checked" value="对你说“很高兴认识你”" name="acttype"><img src="http://images.mafengwo.net/images/home/poke/i1.gif">很高兴认识你</label><label style="cursor:pointer" for="pokeitem_2"><input value="向你打招呼" id="pokeitem_2" type="radio" name="acttype"><img src="http://images.mafengwo.net/images/home/poke/i2.gif">打招呼</label><label style="cursor:pointer" for="pokeitem_3"><input  value="同你握了下手" id="pokeitem_3" type="radio" name="acttype"><img src="http://images.mafengwo.net/images/home/poke/i3.gif">握手</label><label style="cursor:pointer" for="pokeitem_4"><input value="聊聊" id="pokeitem_4" type="radio" name="acttype"><img src="http://images.mafengwo.net/images/home/icon_7.gif">聊聊</label><div id="pnl_pokechat" class="hide"><br>说点什么：<br><textarea style="width:200px;height:50px"></textarea></div>',"打个招呼",function(){var d=jQuery.trim(b.find(":checked").val());if(d=="聊聊"){var c=jQuery.trim(jQuery("#pnl_pokechat textarea").val());if(c.length>0){jQuery.post("/ajax/ajax_send.php",{touid:a,type:"msg",content:c,_need_cstk:true},function(e){if(e.ret==1){mTinyAlert(e.msg)}else{majaxerr(e)}},"json")}else{return"说点什么吧！"}}else{jQuery.post("/ajax/ajax_poke.php",{touid:a,msg:d,act:"poke"},function(e){if(e.ret==1){mTinyAlert(e.msg)}else{majaxerr(e)}},"json")}},-1);b.find(":radio").click(function(){if(jQuery(this).attr("id")=="pokeitem_4"){jQuery("#pnl_pokechat").removeClass("hide")}else{jQuery("#pnl_pokechat").addClass("hide")}});jQuery(".pop-ctn").addClass("pop-con").removeClass("pop-ctn")};mPop=function(b,d,c,a){mPop.GUID++;this.content=b;this.title=d||"提示";this.ctrl=c||{"确定":""};this.overlay=a||false;this.id="mPop"+mPop.GUID;this.obj=jQuery(mPop.prototype.tpl).appendTo("body").attr("id",this.id);this.init();return this};mPop.prototype.tpl='<div class="p_w"><div class="p_c"><h3><span class="_t"></span></h3><div class="ct"><p class="_p"></p></div><a href="javascript:void(0)" class="c _c" title="关闭">关</a><div class="b _b"></div></div><div class="bg"></div></div>';mPop.prototype.init=function(){var a=this;this.updateT(this.title);this.updateP(this.content);this.updateB(this.ctrl);this.obj.find("._c").click(function(){a.hide()});if(this.overlay){$.alerts._overlay("show")}mPop.list[this.id]=this.obj};mPop.prototype.close=function(){this.obj.remove();mPop.list[this.id]=null;if(this.overlay){$.alerts._overlay("hide")}};mPop.prototype.hide=function(){this.obj.hide();if(this.overlay){$.alerts._overlay("hide")}};mPop.prototype.updateP=function(a){this.obj.find("._p").html(a)};mPop.prototype.updateT=function(a){this.obj.find("._t").html(a)};mPop.prototype.updateB=function(a){this.obj.find("._b").html("");for(var c in a){var d=jQuery('<button type="button">'+c+"</button>").appendTo(this.obj.find("._b"));if(typeof(a[c])=="function"){d.click(function(){a[c](d)})}else{d.click(this.hide)}}};mPop.closeAll=function(){for(var a in mPop.list){mPop.list[a].remove();mPop.list[a]=null}};mPop.prototype.hideC=function(){this.obj.find("._c").remove()};mPop.GUID=0;mPop.list={};(function(b){var a;b.fn.seekIterate=function(c){var d=this;d.eq(c).seekExecute();setTimeout(function(){if(c<d.length-1){d.seekIterate(c+1)}},a.multiple.interval)};b.fn.seekExecute=function(){this.each(function(f){var e=jQuery(this);var d=a.startFrom;var c=b("<div id='divHilight"+f+"' />");c.css({width:d[0]==window?d.width()-10:d.outerWidth(),height:d[0]==window?d.height()-10:d.outerHeight(),"background-color":a.css.backgroundColor,"border-color":a.css.borderColor,"border-style":a.css.borderStyle,"border-width":a.css.borderWidth,position:"absolute",top:d[0]==window?0:d.offset().top,bottom:0,right:0,left:d[0]==window?0:d.offset().left,padding:"0px"}).appendTo("body").animate({top:e.offset().top-c.css("border-top-width").replace("px",""),left:e.offset().left-c.css("border-left-width").replace("px",""),width:e.outerWidth(),height:e.outerHeight()},a.animation.speed,a.animation.easeFunction,function(){c.animate({opacity:"0"},200).animate({opacity:"1"},200).animate({opacity:"0"},200).animate({opacity:"1"},200).animate({opacity:"0"},200,function(){c.remove()})})})};b.fn.seek=function(c){a=b.extend({},b.fn.seek.defaults,c);if(c&&c.css){a.css=b.extend({},b.fn.seek.defaults.css,c.css)}if(c&&c.animation){a.animation=b.extend({},b.fn.seek.defaults.animation,c.animation)}if(c&&c.multiple){a.multiple=b.extend({},b.fn.seek.defaults.multiple,c.multiple)}var d=this;if(a.multiple.simultaneous){d.not(a.startFrom).seekExecute()}else{d.not(a.startFrom).seekIterate(0)}};b.fn.seek.defaults={css:{backgroundColor:"Transparent",borderColor:"#ff4444",borderStyle:"solid",borderWidth:"1px",position:"absolute",top:0,bottom:0,right:0,left:0},startFrom:b(window),animation:{easeFunction:"swing",speed:500},multiple:{simultaneous:true,interval:800}}})(jQuery);function copyToClipboard(b){if(window.clipboardData){window.clipboardData.clearData();window.clipboardData.setData("Text",b)}else{if(navigator.userAgent.indexOf("Opera")!=-1){window.location=b}else{if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(g){mAlert("被浏览器拒绝！\n请在浏览器地址栏输入'about:config'并回车\n然后将'signed.applets.codebase_principal_support'设置为'true'")}var d=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!d){return}var c=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!c){return}c.addDataFlavor("text/unicode");var h=new Object();var a=new Object();var h=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);var k=b;h.data=k;c.setTransferData("text/unicode",h,k.length*2);var f=Components.interfaces.nsIClipboard;if(!d){return false}d.setData(c,null,f.kGlobalClipboard);mAlert("复制成功")}}}}var newMessageRemind={_step:0,_actived:true,_title:document.title,_timer:null,show:function(a){var a=a||"通知";var b=newMessageRemind._title.replace("【　　　】","").replace("【新"+a+"】","");newMessageRemind._timer=setTimeout(function(){newMessageRemind.show(a);newMessageRemind._step++;if(newMessageRemind._step==3){newMessageRemind._step=1}if(newMessageRemind._step==1){document.title="【　　　】"+b}if(newMessageRemind._step==2){document.title="【新"+a+"】"+b}},800);return[newMessageRemind._timer,newMessageRemind._title]},clear:function(){clearTimeout(newMessageRemind._timer);document.title=newMessageRemind._title}};jQuery.cookie=function(d,e,b){if(arguments.length>1&&String(e)!=="[object Object]"){b=jQuery.extend({},b);if(e===null||e===undefined){b.expires=-1}if(typeof b.expires==="number"){var g=b.expires,c=b.expires=new Date();c.setDate(c.getDate()+g)}e=String(e);return(document.cookie=[encodeURIComponent(d),"=",b.raw?e:encodeURIComponent(e),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join(""))}b=e||{};var a,f=b.raw?function(h){return h}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)").exec(document.cookie))?f(a[1]):null};function jb(b){var a=mAlert('<textarea id="pnl_jubao" style="width:370px;height:60px;"></textarea>',"填写举报原因",function(){var c=jQuery.trim(jQuery("#pnl_jubao").val());if(""==c){return"请填写举报原因！"}else{var d=b+" 举报原因："+c;jQuery.post("/ajax/ajax_msg.php",{a:"jubao",c:d},function(e){if(e.ret==1){mTinyAlert("举报成功")}else{mTinyAlert("举报失败")}},"json")}})}function mf(b){var b=$.extend(mf.settings,b);var a=$("<div class='"+b.baseCLS+"'>"+b.content+"</div>").appendTo($("body")).css({width:b.width+"px",marginLeft:"-"+b.width/2+"px",left:"50%",zIndex:1000});a.find("."+b.closeCLS).click(function(){b.onClose?b.onClose.call(a):a.remove();$.alerts._overlay("hide")});$.alerts._overlay("show");mf.last.pnl=a;mf.last.settings=b;return a}mf.settings={content:'About mf:a simple float panel!<a class="close">close</a><br>            content:"your content",<br/>            width:your panel`s width,default is 200<br/>            zIndex:your panel`s zIndex,default is 1000<br/>            baseCLS:your panel classame,default is "mf"<br/>            closeCLS:the close action base on, default is "close"<br/><br/>            close API is: mf.close();<br/>            Css Demo:<br/>.fm{position:fixed;top:17%;}<br/>            * html .fm{position: absolute;top: expression((document.documentElement.scrollTop || document.body.scrollTop) + Math.round(17 * (document.documentElement.offsetHeight || document.body.clientHeight) / 100) + "px");}            ',width:400,zIndex:1000,baseCLS:"mf",closeCLS:"close",onClose:false};mf.close=function(){if(mf.last){mf.last.settings.onClose?mf.last.settings.onClose.call(mf.last.pnl):mf.last.pnl&&mf.last.pnl.remove()}$.alerts._overlay("hide")};mf.last={};function show_pop_html(c,b,a){$.alerts._overlay("hide");c.css("top","10%");c.css("left","50%");c.css("marginLeft","-"+b+"px");c.css("marginTop",($(window).scrollTop()+50)+"px");c.css("position","absolute");if(a){c.css("zIndex",a)}else{c.css("zIndex","1001")}$.alerts._overlay("show");c.removeClass("hide")}function close_pop_html(a){$.alerts._overlay("hide");a.addClass("hide")}function active_weng(){if(!$.cookie("SHOW_ACTIVE_WENG",{path:"/"})){var a='<div class="wengComing_close"><a id="btn_wengnew_close" title="关闭" href="javascript:;">关闭</a></div>                        <div class="wengComing">                            <a target="_blank" href="http://www.mafengwo.cn/i/914893.html">嗡嗡来了</a>                        </div>';$("body").append(a);$.alerts.overlayOpacity=0.9;$.alerts._overlay("show");$("#btn_wengnew_close").click(function(){$(this).parent().next().remove().end().remove();$.alerts._overlay("hide");$.cookie("SHOW_ACTIVE_WENG",true,{expires:1,path:"/",domain:"mafengwo.cn"})})}}function add_op_log(e,c,a,g,f,b,d,h){$.post("/ajax/ajax_logs.php",{action:"add_op_logs",type:e,key:c,subkey:a,ip:f,uid:b,uuid:d,rtime:h,params:g},null,"json")}function parse_url(b){var d=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,a=d.exec(b),e=["url","fragment","protocol",false,"username","password","host","port","pathname","querystring"],f=new Object();for(var c=0;c<e.length;c++){if(!e[c]){continue}if(a&&a[c]){f[e[c]]=a[c]}else{f[e[c]]=""}}return f}(function(a){a.fn.hoverDelay=function(c){var g={hoverDuring:350,outDuring:150,hoverEvent:function(){a.noop()},outEvent:function(){a.noop()}};var e=a.extend(g,c||{});var b,d,f=this;return a(this).each(function(){a(this).hover(function(){clearTimeout(d);b=setTimeout(function(){e.hoverEvent.apply(f)},e.hoverDuring)},function(){clearTimeout(b);d=setTimeout(function(){e.outEvent.apply(f)},e.outDuring)})})}})(jQuery);(function(a){a.mfwplugins={emotions:[{title:"大笑",file:"http://images.mafengwo.net/images/i/face/1.gif"},{title:"微笑",file:"http://images.mafengwo.net/images/i/face/2.gif"},{title:"亲亲",file:"http://images.mafengwo.net/images/i/face/3.gif"},{title:"抱抱",file:"http://images.mafengwo.net/images/i/face/4.gif"},{title:"色色",file:"http://images.mafengwo.net/images/i/face/5.gif"},{title:"好失望哟",file:"http://images.mafengwo.net/images/i/face/6.gif"},{title:"好困哦",file:"http://images.mafengwo.net/images/i/face/7.gif"},{title:"害羞",file:"http://images.mafengwo.net/images/i/face/8.gif"},{title:"酷呆了",file:"http://images.mafengwo.net/images/i/face/9.gif"},{title:"晕倒",file:"http://images.mafengwo.net/images/i/face/10.gif"},{title:"眨眼",file:"http://images.mafengwo.net/images/i/face/11.gif"},{title:"鬼脸",file:"http://images.mafengwo.net/images/i/face/12.gif"},{title:"小声点",file:"http://images.mafengwo.net/images/i/face/13.gif"},{title:"吃惊",file:"http://images.mafengwo.net/images/i/face/14.gif"},{title:"翻白眼",file:"http://images.mafengwo.net/images/i/face/15.gif"},{title:"干杯",file:"http://images.mafengwo.net/images/i/face/16.gif"},{title:"困惑",file:"http://images.mafengwo.net/images/i/face/17.gif"},{title:"啥？",file:"http://images.mafengwo.net/images/i/face/18.gif"},{title:"睡觉",file:"http://images.mafengwo.net/images/i/face/19.gif"},{title:"再见了",file:"http://images.mafengwo.net/images/i/face/20.gif"},{title:"眼泪哗哗地",file:"http://images.mafengwo.net/images/i/face/21.gif"},{title:"你好讨厌",file:"http://images.mafengwo.net/images/i/face/22.gif"},{title:"我吐",file:"http://images.mafengwo.net/images/i/face/23.gif"},{title:"怒骂",file:"http://images.mafengwo.net/images/i/face/24.gif"},{title:"闭嘴",file:"http://images.mafengwo.net/images/i/face/25.gif"},{title:"打你",file:"http://images.mafengwo.net/images/i/face/26.gif"},{title:"真的生气了",file:"http://images.mafengwo.net/images/i/face/27.gif"},{title:"超级棒",file:"http://images.mafengwo.net/images/i/face/28.gif"},{title:"不咋地",file:"http://images.mafengwo.net/images/i/face/29.gif"},{title:"魅力四射",file:"http://images.mafengwo.net/images/i/face/30.gif"},{title:"心都碎了",file:"http://images.mafengwo.net/images/i/face/31.gif"},{title:"爱",file:"http://images.mafengwo.net/images/i/face/32.gif"},{title:"吻",file:"http://images.mafengwo.net/images/i/face/33.gif"},{title:"玫瑰凋谢了",file:"http://images.mafengwo.net/images/i/face/34.gif"},{title:"玫瑰盛开了",file:"http://images.mafengwo.net/images/i/face/35.gif"},{title:"生日蛋糕",file:"http://images.mafengwo.net/images/i/face/36.gif"},{title:"礼物",file:"http://images.mafengwo.net/images/i/face/37.gif"},{title:"苹果",file:"http://images.mafengwo.net/images/i/face/38.gif"},{title:"西瓜",file:"http://images.mafengwo.net/images/i/face/39.gif"},{title:"咖啡",file:"http://images.mafengwo.net/images/i/face/40.gif"},{title:"足球",file:"http://images.mafengwo.net/images/i/face/41.gif"},{title:"握手",file:"http://images.mafengwo.net/images/i/face/42.gif"},{title:"星星",file:"http://images.mafengwo.net/images/i/face/43.gif"},{title:"精灵",file:"http://images.mafengwo.net/images/i/face/44.gif"},{title:"小丑",file:"http://images.mafengwo.net/images/i/face/45.gif"},{title:"大怒",file:"http://images.mafengwo.net/images/i/face/46.gif"},{title:"生病了",file:"http://images.mafengwo.net/images/i/face/47.gif"},{title:"小可爱",file:"http://images.mafengwo.net/images/i/face/48.gif"},{title:"小心非典",file:"http://images.mafengwo.net/images/i/face/49.gif"},{title:"嘴馋了",file:"http://images.mafengwo.net/images/i/face/50.gif"},{title:"警察",file:"http://images.mafengwo.net/images/i/face/51.gif"},{title:"抓狂了",file:"http://images.mafengwo.net/images/i/face/52.gif"},{title:"不爽",file:"http://images.mafengwo.net/images/i/face/53.gif"},{title:"汗",file:"http://images.mafengwo.net/images/i/face/54.gif"},{title:"思考中",file:"http://images.mafengwo.net/images/i/face/55.gif"},{title:"见钱眼开",file:"http://images.mafengwo.net/images/i/face/56.gif"},{title:"呲牙咧嘴",file:"http://images.mafengwo.net/images/i/face/57.gif"},{title:"晕头转向",file:"http://images.mafengwo.net/images/i/face/58.gif"},{title:"好好爱你哦",file:"http://images.mafengwo.net/images/i/face/59.gif"},{title:"猪头",file:"http://images.mafengwo.net/images/i/face/60.gif"},{title:"便便",file:"http://images.mafengwo.net/images/i/face/61.gif"},{title:"月亮",file:"http://images.mafengwo.net/images/i/face/62.gif"},{title:"音乐",file:"http://images.mafengwo.net/images/i/face/63.gif"},{title:"饭",file:"http://images.mafengwo.net/images/i/face/64.gif"},{title:"真衰",file:"http://images.mafengwo.net/images/i/face/65.gif"},{title:"偷笑",file:"http://images.mafengwo.net/images/i/face/66.gif"},{title:"下雨",file:"http://images.mafengwo.net/images/i/face/67.gif"},{title:"猫猫",file:"http://images.mafengwo.net/images/i/face/68.gif"},{title:"狗狗",file:"http://images.mafengwo.net/images/i/face/69.gif"},{title:"骷髅",file:"http://images.mafengwo.net/images/i/face/70.gif"},{title:"书呆子",file:"http://images.mafengwo.net/images/i/face/71.gif"},{title:"太阳",file:"http://images.mafengwo.net/images/i/face/72.gif"},{title:"邮件",file:"http://images.mafengwo.net/images/i/face/73.gif"},{title:"帅帅男孩",file:"http://images.mafengwo.net/images/i/face/74.gif"},{title:"妩媚女孩",file:"http://images.mafengwo.net/images/i/face/75.gif"},{title:"药丸",file:"http://images.mafengwo.net/images/i/face/76.gif"},{title:"鄙视",file:"http://images.mafengwo.net/images/i/face/77.gif"},{title:"烧香",file:"http://images.mafengwo.net/images/i/face/78.gif"}],callusers:{},buildGotop:function(){if(a(".m-gotopbtn").size()>0){return false}a('<div class="m-gotopbtn"><a href="javascript:void(0);" hidefocus="true" title="飞回顶部" rel="nofollow"></a></div>').find("a").bind("click",function(){a("html,body").animate({scrollTop:0},500)}).end().appendTo(a("body"));a(window).bind("scroll",function(){if(a(document).scrollTop()>500){if(a(".m-gotopbtn a").position().top==100){a(".m-gotopbtn a").animate({top:-95},300)}}else{if(a(".m-gotopbtn a").position().top==-95){a(".m-gotopbtn a").animate({top:100},300)}}})},showClosing:function(e,h,o,l){if(e>=h){return}var k=new Date(e),c=new Date(h),g=k.getFullYear()+"."+(k.getMonth()+1)+"."+k.getDate(),n=c.getFullYear()+"."+(c.getMonth()+1)+"."+c.getDate(),f=k.getHours()+":"+k.getMinutes(),b=c.getHours()+":"+c.getMinutes(),d,m;d=g+" "+f;if(g==n){m=b}else{m=n+" "+b}l=(undefined!=l&&null!=l)?l:"确定";if("function"==typeof o){o=function(){o()}}else{l="返回首页";o=function(){location.href="/"}}mAlert('<div class="weihu">'+d+" 至 "+m+"</div>","",o,-1,true);a("#popup_ok").val(l)}};a.mfwfeed={keys:{weibo:"wb",qzone:"qz",qweibo:"qt",renren:"rr"},types:{type_w:"weng",type_ap:"a_piblic",type_ar:"a_reply",type_ac:"activity",type_f:"feed"},addFeedTask:function(l,k,f,d,b,e,h,c,m){if("undefined"==typeof(c)||null==typeof(c)||""==c){c=location.href}var g={key:l,title:k,content:f,image:d,url:b,comment:e,type:h};a.post("/ajax/ajax_user_task.php",{act:"add_task",type:"sf",data:a.toJSON(g),url:c},function(n){if("function"==typeof m){m()}},"json")},manageFeedTask:function(b,c){if("undefined"==typeof(b)||null==typeof(b)||""==b){b=location.href}a.post("/ajax/ajax_user_task.php",{act:"manage_task",type:"sf",url:b},function(e){if("function"==typeof c){c(e)}else{if(e.no==1){mAlert("分享成功")}else{mAlert("分享失败")}}})}}})(jQuery);jQuery(function(){});String.prototype.showStr=function(a,b){var d="";var e=0;var c=false;for(var h=0,g=this.length;h<g;h++){var k=this.charAt(h);var f=0;if(escape(k).length>4){f=2}else{f=1}if(e+f>a){if(h!==g){c=true}break}else{d+=k;e+=f}}if(!!b&&c){while((e+b.length)>a){var l=d.split("");var m=l.pop();if(escape(m).length>4){e-=2}else{e--}d=l.join("")}d+=b}return d};if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(c,b){var a={_element:null,_expires:null,_file:c.location.hostname,setExpires:function(d){this._expires=d||86400},init:function(){if(!this._element){try{this._element=b.createElement("input");this._element.type="hidden";this._element.addBehavior("#default#userData");b.body.appendChild(this._element)}catch(d){return false}}return true},setItem:function(e,f,d){if(this.init()){this.setExpires(d);var g=new Date();g.setTime(g.getTime()+this._expires*1000);this._element.expires=g.toUTCString();f=typeof(f)=="string"?f:JSON.stringify(f);this._element.load(this._file);this._element.setAttribute(e,f);this._element.save(this._file)}},getItem:function(d){if(this.init()){this._element.load(this._file);return this._element.getAttribute(d)}},removeItem:function(d){if(this.init()){this._element.load(this._file);this._element.removeAttribute(d);this._element.save(this._file)}}};c.dataStorage={setItem:function(e,g,d){if(c.localStorage){var h=new Date();h.setTime(h.getTime()+parseInt(d)*1000);var f={};f.expires=h.getTime();f.value=g;localStorage.setItem(e,JSON.stringify(f))}else{a.setItem(e,g,d)}},getItem:function(e){if(c.localStorage){var d=new Date();var g=localStorage.getItem(e);if(g){var f=JSON.parse(g);if(d.getTime()>f.expires){localStorage.removeItem(e)}else{return f.value}}return null}else{return a.getItem(e)}},removeItem:function(d){if(c.localStorage){localStorage.removeItem(d)}else{a.removeItem(d)}}}})(window,document);if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());